import{r as m,a as zn,R as On,b as Un}from"./react-BIF_SMrh.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var ks={exports:{}},Gt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wn=m,Fn=Symbol.for("react.element"),$n=Symbol.for("react.fragment"),Vn=Object.prototype.hasOwnProperty,Kn=Wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Dn={key:!0,ref:!0,__self:!0,__source:!0};function Cs(t,r,n){var a,o={},s=null,i=null;n!==void 0&&(s=""+n),r.key!==void 0&&(s=""+r.key),r.ref!==void 0&&(i=r.ref);for(a in r)Vn.call(r,a)&&!Dn.hasOwnProperty(a)&&(o[a]=r[a]);if(t&&t.defaultProps)for(a in r=t.defaultProps,r)o[a]===void 0&&(o[a]=r[a]);return{$$typeof:Fn,type:t,key:s,ref:i,props:o,_owner:Kn.current}}Gt.Fragment=$n;Gt.jsx=Cs;Gt.jsxs=Cs;ks.exports=Gt;var e=ks.exports,br={},Dr=zn;br.createRoot=Dr.createRoot,br.hydrateRoot=Dr.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function St(){return St=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},St.apply(this,arguments)}var ze;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ze||(ze={}));const Xr="popstate";function Xn(t){t===void 0&&(t={});function r(a,o){let{pathname:s,search:i,hash:c}=a.location;return jr("",{pathname:s,search:i,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(a,o){return typeof o=="string"?o:Vt(o)}return Gn(r,n,null,t)}function G(t,r){if(t===!1||t===null||typeof t>"u")throw new Error(r)}function Mr(t,r){if(!t){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function qn(){return Math.random().toString(36).substr(2,8)}function qr(t,r){return{usr:t.state,key:t.key,idx:r}}function jr(t,r,n,a){return n===void 0&&(n=null),St({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof r=="string"?ht(r):r,{state:n,key:r&&r.key||a||qn()})}function Vt(t){let{pathname:r="/",search:n="",hash:a=""}=t;return n&&n!=="?"&&(r+=n.charAt(0)==="?"?n:"?"+n),a&&a!=="#"&&(r+=a.charAt(0)==="#"?a:"#"+a),r}function ht(t){let r={};if(t){let n=t.indexOf("#");n>=0&&(r.hash=t.substr(n),t=t.substr(0,n));let a=t.indexOf("?");a>=0&&(r.search=t.substr(a),t=t.substr(0,a)),t&&(r.pathname=t)}return r}function Gn(t,r,n,a){a===void 0&&(a={});let{window:o=document.defaultView,v5Compat:s=!1}=a,i=o.history,c=ze.Pop,l=null,u=d();u==null&&(u=0,i.replaceState(St({},i.state,{idx:u}),""));function d(){return(i.state||{idx:null}).idx}function p(){c=ze.Pop;let g=d(),b=g==null?null:g-u;u=g,l&&l({action:c,location:v.location,delta:b})}function h(g,b){c=ze.Push;let S=jr(v.location,g,b);u=d()+1;let k=qr(S,u),w=v.createHref(S);try{i.pushState(k,"",w)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;o.location.assign(w)}s&&l&&l({action:c,location:v.location,delta:1})}function f(g,b){c=ze.Replace;let S=jr(v.location,g,b);u=d();let k=qr(S,u),w=v.createHref(S);i.replaceState(k,"",w),s&&l&&l({action:c,location:v.location,delta:0})}function x(g){let b=o.location.origin!=="null"?o.location.origin:o.location.href,S=typeof g=="string"?g:Vt(g);return S=S.replace(/ $/,"%20"),G(b,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,b)}let v={get action(){return c},get location(){return t(o,i)},listen(g){if(l)throw new Error("A history only accepts one active listener");return o.addEventListener(Xr,p),l=g,()=>{o.removeEventListener(Xr,p),l=null}},createHref(g){return r(o,g)},createURL:x,encodeLocation(g){let b=x(g);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:h,replace:f,go(g){return i.go(g)}};return v}var Gr;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Gr||(Gr={}));function Yn(t,r,n){return n===void 0&&(n="/"),Jn(t,r,n)}function Jn(t,r,n,a){let o=typeof r=="string"?ht(r):r,s=pt(o.pathname||"/",n);if(s==null)return null;let i=Ns(t);Qn(i);let c=null;for(let l=0;c==null&&l<i.length;++l){let u=ca(s);c=ia(i[l],u)}return c}function Ns(t,r,n,a){r===void 0&&(r=[]),n===void 0&&(n=[]),a===void 0&&(a="");let o=(s,i,c)=>{let l={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:i,route:s};l.relativePath.startsWith("/")&&(G(l.relativePath.startsWith(a),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(a.length));let u=Ue([a,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(G(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Ns(s.children,r,d,u)),!(s.path==null&&!s.index)&&r.push({path:u,score:aa(u,s.index),routesMeta:d})};return t.forEach((s,i)=>{var c;if(s.path===""||!((c=s.path)!=null&&c.includes("?")))o(s,i);else for(let l of Rs(s.path))o(s,i,l)}),r}function Rs(t){let r=t.split("/");if(r.length===0)return[];let[n,...a]=r,o=n.endsWith("?"),s=n.replace(/\?$/,"");if(a.length===0)return o?[s,""]:[s];let i=Rs(a.join("/")),c=[];return c.push(...i.map(l=>l===""?s:[s,l].join("/"))),o&&c.push(...i),c.map(l=>t.startsWith("/")&&l===""?"/":l)}function Qn(t){t.sort((r,n)=>r.score!==n.score?n.score-r.score:oa(r.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}const Zn=/^:[\w-]+$/,ea=3,ta=2,ra=1,sa=10,na=-2,Yr=t=>t==="*";function aa(t,r){let n=t.split("/"),a=n.length;return n.some(Yr)&&(a+=na),r&&(a+=ta),n.filter(o=>!Yr(o)).reduce((o,s)=>o+(Zn.test(s)?ea:s===""?ra:sa),a)}function oa(t,r){return t.length===r.length&&t.slice(0,-1).every((a,o)=>a===r[o])?t[t.length-1]-r[r.length-1]:0}function ia(t,r,n){let{routesMeta:a}=t,o={},s="/",i=[];for(let c=0;c<a.length;++c){let l=a[c],u=c===a.length-1,d=s==="/"?r:r.slice(s.length)||"/",p=Sr({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),h=l.route;if(!p)return null;Object.assign(o,p.params),i.push({params:o,pathname:Ue([s,p.pathname]),pathnameBase:xa(Ue([s,p.pathnameBase])),route:h}),p.pathnameBase!=="/"&&(s=Ue([s,p.pathnameBase]))}return i}function Sr(t,r){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,a]=la(t.path,t.caseSensitive,t.end),o=r.match(n);if(!o)return null;let s=o[0],i=s.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((u,d,p)=>{let{paramName:h,isOptional:f}=d;if(h==="*"){let v=c[p]||"";i=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const x=c[p];return f&&!x?u[h]=void 0:u[h]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:i,pattern:t}}function la(t,r,n){r===void 0&&(r=!1),n===void 0&&(n=!0),Mr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let a=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,c,l)=>(a.push({paramName:c,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,r?void 0:"i"),a]}function ca(t){try{return t.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return Mr(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),t}}function pt(t,r){if(r==="/")return t;if(!t.toLowerCase().startsWith(r.toLowerCase()))return null;let n=r.endsWith("/")?r.length-1:r.length,a=t.charAt(n);return a&&a!=="/"?null:t.slice(n)||"/"}const da=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pa=t=>da.test(t);function ua(t,r){r===void 0&&(r="/");let{pathname:n,search:a="",hash:o=""}=typeof t=="string"?ht(t):t,s;if(n)if(pa(n))s=n;else{if(n.includes("//")){let i=n;n=n.replace(/\/\/+/g,"/"),Mr(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+n))}n.startsWith("/")?s=Jr(n.substring(1),"/"):s=Jr(n,r)}else s=r;return{pathname:s,search:ma(a),hash:fa(o)}}function Jr(t,r){let n=r.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function xr(t,r,n,a){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ha(t){return t.filter((r,n)=>n===0||r.route.path&&r.route.path.length>0)}function Lr(t,r){let n=ha(t);return r?n.map((a,o)=>o===n.length-1?a.pathname:a.pathnameBase):n.map(a=>a.pathnameBase)}function Br(t,r,n,a){a===void 0&&(a=!1);let o;typeof t=="string"?o=ht(t):(o=St({},t),G(!o.pathname||!o.pathname.includes("?"),xr("?","pathname","search",o)),G(!o.pathname||!o.pathname.includes("#"),xr("#","pathname","hash",o)),G(!o.search||!o.search.includes("#"),xr("#","search","hash",o)));let s=t===""||o.pathname==="",i=s?"/":o.pathname,c;if(i==null)c=n;else{let p=r.length-1;if(!a&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),p-=1;o.pathname=h.join("/")}c=p>=0?r[p]:"/"}let l=ua(o,c),u=i&&i!=="/"&&i.endsWith("/"),d=(s||i===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const Ue=t=>t.join("/").replace(/\/\/+/g,"/"),xa=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ma=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,fa=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ga(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Es=["post","put","patch","delete"];new Set(Es);const va=["get",...Es];new Set(va);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wt(){return wt=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},wt.apply(this,arguments)}const Yt=m.createContext(null),Ps=m.createContext(null),He=m.createContext(null),Jt=m.createContext(null),Me=m.createContext({outlet:null,matches:[],isDataRoute:!1}),Ts=m.createContext(null);function ya(t,r){let{relative:n}=r===void 0?{}:r;xt()||G(!1);let{basename:a,navigator:o}=m.useContext(He),{hash:s,pathname:i,search:c}=Qt(t,{relative:n}),l=i;return a!=="/"&&(l=i==="/"?a:Ue([a,i])),o.createHref({pathname:l,search:c,hash:s})}function xt(){return m.useContext(Jt)!=null}function mt(){return xt()||G(!1),m.useContext(Jt).location}function As(t){m.useContext(He).static||m.useLayoutEffect(t)}function We(){let{isDataRoute:t}=m.useContext(Me);return t?La():ba()}function ba(){xt()||G(!1);let t=m.useContext(Yt),{basename:r,future:n,navigator:a}=m.useContext(He),{matches:o}=m.useContext(Me),{pathname:s}=mt(),i=JSON.stringify(Lr(o,n.v7_relativeSplatPath)),c=m.useRef(!1);return As(()=>{c.current=!0}),m.useCallback(function(u,d){if(d===void 0&&(d={}),!c.current)return;if(typeof u=="number"){a.go(u);return}let p=Br(u,JSON.parse(i),s,d.relative==="path");t==null&&r!=="/"&&(p.pathname=p.pathname==="/"?r:Ue([r,p.pathname])),(d.replace?a.replace:a.push)(p,d.state,d)},[r,a,i,s,t])}const ja=m.createContext(null);function Sa(t){let r=m.useContext(Me).outlet;return r&&m.createElement(ja.Provider,{value:t},r)}function Qt(t,r){let{relative:n}=r===void 0?{}:r,{future:a}=m.useContext(He),{matches:o}=m.useContext(Me),{pathname:s}=mt(),i=JSON.stringify(Lr(o,a.v7_relativeSplatPath));return m.useMemo(()=>Br(t,JSON.parse(i),s,n==="path"),[t,i,s,n])}function wa(t,r){return ka(t,r)}function ka(t,r,n,a){xt()||G(!1);let{navigator:o}=m.useContext(He),{matches:s}=m.useContext(Me),i=s[s.length-1],c=i?i.params:{};i&&i.pathname;let l=i?i.pathnameBase:"/";i&&i.route;let u=mt(),d;if(r){var p;let g=typeof r=="string"?ht(r):r;l==="/"||(p=g.pathname)!=null&&p.startsWith(l)||G(!1),d=g}else d=u;let h=d.pathname||"/",f=h;if(l!=="/"){let g=l.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(g.length).join("/")}let x=Yn(t,{pathname:f}),v=Pa(x&&x.map(g=>Object.assign({},g,{params:Object.assign({},c,g.params),pathname:Ue([l,o.encodeLocation?o.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?l:Ue([l,o.encodeLocation?o.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,a);return r&&v?m.createElement(Jt.Provider,{value:{location:wt({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ze.Pop}},v):v}function Ca(){let t=Ma(),r=ga(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},r),n?m.createElement("pre",{style:o},n):null,null)}const Na=m.createElement(Ca,null);class Ra extends m.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,n){return n.location!==r.location||n.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:n.error,location:n.location,revalidation:r.revalidation||n.revalidation}}componentDidCatch(r,n){console.error("React Router caught the following error during render",r,n)}render(){return this.state.error!==void 0?m.createElement(Me.Provider,{value:this.props.routeContext},m.createElement(Ts.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ea(t){let{routeContext:r,match:n,children:a}=t,o=m.useContext(Yt);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),m.createElement(Me.Provider,{value:r},a)}function Pa(t,r,n,a){var o;if(r===void 0&&(r=[]),n===void 0&&(n=null),a===void 0&&(a=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=a)!=null&&s.v7_partialHydration&&r.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,c=(o=n)==null?void 0:o.errors;if(c!=null){let d=i.findIndex(p=>p.route.id&&(c==null?void 0:c[p.route.id])!==void 0);d>=0||G(!1),i=i.slice(0,Math.min(i.length,d+1))}let l=!1,u=-1;if(n&&a&&a.v7_partialHydration)for(let d=0;d<i.length;d++){let p=i[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=d),p.route.id){let{loaderData:h,errors:f}=n,x=p.route.loader&&h[p.route.id]===void 0&&(!f||f[p.route.id]===void 0);if(p.route.lazy||x){l=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((d,p,h)=>{let f,x=!1,v=null,g=null;n&&(f=c&&p.route.id?c[p.route.id]:void 0,v=p.route.errorElement||Na,l&&(u<0&&h===0?(Ba("route-fallback"),x=!0,g=null):u===h&&(x=!0,g=p.route.hydrateFallbackElement||null)));let b=r.concat(i.slice(0,h+1)),S=()=>{let k;return f?k=v:x?k=g:p.route.Component?k=m.createElement(p.route.Component,null):p.route.element?k=p.route.element:k=d,m.createElement(Ea,{match:p,routeContext:{outlet:d,matches:b,isDataRoute:n!=null},children:k})};return n&&(p.route.ErrorBoundary||p.route.errorElement||h===0)?m.createElement(Ra,{location:n.location,revalidation:n.revalidation,component:v,error:f,children:S(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):S()},null)}var Hs=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Hs||{}),Ms=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Ms||{});function Ta(t){let r=m.useContext(Yt);return r||G(!1),r}function Aa(t){let r=m.useContext(Ps);return r||G(!1),r}function Ha(t){let r=m.useContext(Me);return r||G(!1),r}function Ls(t){let r=Ha(),n=r.matches[r.matches.length-1];return n.route.id||G(!1),n.route.id}function Ma(){var t;let r=m.useContext(Ts),n=Aa(),a=Ls();return r!==void 0?r:(t=n.errors)==null?void 0:t[a]}function La(){let{router:t}=Ta(Hs.UseNavigateStable),r=Ls(Ms.UseNavigateStable),n=m.useRef(!1);return As(()=>{n.current=!0}),m.useCallback(function(o,s){s===void 0&&(s={}),n.current&&(typeof o=="number"?t.navigate(o):t.navigate(o,wt({fromRouteId:r},s)))},[t,r])}const Qr={};function Ba(t,r,n){Qr[t]||(Qr[t]=!0)}function Ia(t,r){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Bs(t){let{to:r,replace:n,state:a,relative:o}=t;xt()||G(!1);let{future:s,static:i}=m.useContext(He),{matches:c}=m.useContext(Me),{pathname:l}=mt(),u=We(),d=Br(r,Lr(c,s.v7_relativeSplatPath),l,o==="path"),p=JSON.stringify(d);return m.useEffect(()=>u(JSON.parse(p),{replace:n,state:a,relative:o}),[u,p,o,n,a]),null}function _a(t){return Sa(t.context)}function Te(t){G(!1)}function za(t){let{basename:r="/",children:n=null,location:a,navigationType:o=ze.Pop,navigator:s,static:i=!1,future:c}=t;xt()&&G(!1);let l=r.replace(/^\/*/,"/"),u=m.useMemo(()=>({basename:l,navigator:s,static:i,future:wt({v7_relativeSplatPath:!1},c)}),[l,c,s,i]);typeof a=="string"&&(a=ht(a));let{pathname:d="/",search:p="",hash:h="",state:f=null,key:x="default"}=a,v=m.useMemo(()=>{let g=pt(d,l);return g==null?null:{location:{pathname:g,search:p,hash:h,state:f,key:x},navigationType:o}},[l,d,p,h,f,x,o]);return v==null?null:m.createElement(He.Provider,{value:u},m.createElement(Jt.Provider,{children:n,value:v}))}function Oa(t){let{children:r,location:n}=t;return wa(wr(r),n)}new Promise(()=>{});function wr(t,r){r===void 0&&(r=[]);let n=[];return m.Children.forEach(t,(a,o)=>{if(!m.isValidElement(a))return;let s=[...r,o];if(a.type===m.Fragment){n.push.apply(n,wr(a.props.children,s));return}a.type!==Te&&G(!1),!a.props.index||!a.props.children||G(!1);let i={id:a.props.id||s.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(i.children=wr(a.props.children,s)),n.push(i)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kt(){return Kt=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Kt.apply(this,arguments)}function Is(t,r){if(t==null)return{};var n={},a=Object.keys(t),o,s;for(s=0;s<a.length;s++)o=a[s],!(r.indexOf(o)>=0)&&(n[o]=t[o]);return n}function Ua(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Wa(t,r){return t.button===0&&(!r||r==="_self")&&!Ua(t)}const Fa=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],$a=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Va="6";try{window.__reactRouterVersion=Va}catch{}const Ka=m.createContext({isTransitioning:!1}),Da="startTransition",Zr=On[Da];function Xa(t){let{basename:r,children:n,future:a,window:o}=t,s=m.useRef();s.current==null&&(s.current=Xn({window:o,v5Compat:!0}));let i=s.current,[c,l]=m.useState({action:i.action,location:i.location}),{v7_startTransition:u}=a||{},d=m.useCallback(p=>{u&&Zr?Zr(()=>l(p)):l(p)},[l,u]);return m.useLayoutEffect(()=>i.listen(d),[i,d]),m.useEffect(()=>Ia(a),[a]),m.createElement(za,{basename:r,children:n,location:c.location,navigationType:c.action,navigator:i,future:a})}const qa=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ga=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ya=m.forwardRef(function(r,n){let{onClick:a,relative:o,reloadDocument:s,replace:i,state:c,target:l,to:u,preventScrollReset:d,viewTransition:p}=r,h=Is(r,Fa),{basename:f}=m.useContext(He),x,v=!1;if(typeof u=="string"&&Ga.test(u)&&(x=u,qa))try{let k=new URL(window.location.href),w=u.startsWith("//")?new URL(k.protocol+u):new URL(u),C=pt(w.pathname,f);w.origin===k.origin&&C!=null?u=C+w.search+w.hash:v=!0}catch{}let g=ya(u,{relative:o}),b=Qa(u,{replace:i,state:c,target:l,preventScrollReset:d,relative:o,viewTransition:p});function S(k){a&&a(k),k.defaultPrevented||b(k)}return m.createElement("a",Kt({},h,{href:x||g,onClick:v||s?a:S,ref:n,target:l}))}),bt=m.forwardRef(function(r,n){let{"aria-current":a="page",caseSensitive:o=!1,className:s="",end:i=!1,style:c,to:l,viewTransition:u,children:d}=r,p=Is(r,$a),h=Qt(l,{relative:p.relative}),f=mt(),x=m.useContext(Ps),{navigator:v,basename:g}=m.useContext(He),b=x!=null&&Za(h)&&u===!0,S=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,k=f.pathname,w=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;o||(k=k.toLowerCase(),w=w?w.toLowerCase():null,S=S.toLowerCase()),w&&g&&(w=pt(w,g)||w);const C=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let E=k===S||!i&&k.startsWith(S)&&k.charAt(C)==="/",y=w!=null&&(w===S||!i&&w.startsWith(S)&&w.charAt(S.length)==="/"),R={isActive:E,isPending:y,isTransitioning:b},P=E?a:void 0,T;typeof s=="function"?T=s(R):T=[s,E?"active":null,y?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let I=typeof c=="function"?c(R):c;return m.createElement(Ya,Kt({},p,{"aria-current":P,className:T,ref:n,style:I,to:l,viewTransition:u}),typeof d=="function"?d(R):d)});var kr;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(kr||(kr={}));var es;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(es||(es={}));function Ja(t){let r=m.useContext(Yt);return r||G(!1),r}function Qa(t,r){let{target:n,replace:a,state:o,preventScrollReset:s,relative:i,viewTransition:c}=r===void 0?{}:r,l=We(),u=mt(),d=Qt(t,{relative:i});return m.useCallback(p=>{if(Wa(p,n)){p.preventDefault();let h=a!==void 0?a:Vt(u)===Vt(d);l(t,{replace:h,state:o,preventScrollReset:s,relative:i,viewTransition:c})}},[u,l,d,a,o,n,t,s,i,c])}function Za(t,r){r===void 0&&(r={});let n=m.useContext(Ka);n==null&&G(!1);let{basename:a}=Ja(kr.useViewTransitionState),o=Qt(t,{relative:r.relative});if(!n.isTransitioning)return!1;let s=pt(n.currentLocation.pathname,a)||n.currentLocation.pathname,i=pt(n.nextLocation.pathname,a)||n.nextLocation.pathname;return Sr(o.pathname,i)!=null||Sr(o.pathname,s)!=null}let eo={data:""},to=t=>{if(typeof window=="object"){let r=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return r.nonce=window.__nonce__,r.parentNode||(t||document.head).appendChild(r),r.firstChild}return t||eo},ro=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,so=/\/\*[^]*?\*\/|  +/g,ts=/\n+/g,_e=(t,r)=>{let n="",a="",o="";for(let s in t){let i=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+i+";":a+=s[1]=="f"?_e(i,s):s+"{"+_e(i,s[1]=="k"?"":r)+"}":typeof i=="object"?a+=_e(i,r?r.replace(/([^,])+/g,c=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,c):c?c+" "+l:l)):s):i!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=_e.p?_e.p(s,i):s+":"+i+";")}return n+(r&&o?r+"{"+o+"}":o)+a},Ee={},_s=t=>{if(typeof t=="object"){let r="";for(let n in t)r+=n+_s(t[n]);return r}return t},no=(t,r,n,a,o)=>{let s=_s(t),i=Ee[s]||(Ee[s]=(l=>{let u=0,d=11;for(;u<l.length;)d=101*d+l.charCodeAt(u++)>>>0;return"go"+d})(s));if(!Ee[i]){let l=s!==t?t:(u=>{let d,p,h=[{}];for(;d=ro.exec(u.replace(so,""));)d[4]?h.shift():d[3]?(p=d[3].replace(ts," ").trim(),h.unshift(h[0][p]=h[0][p]||{})):h[0][d[1]]=d[2].replace(ts," ").trim();return h[0]})(t);Ee[i]=_e(o?{["@keyframes "+i]:l}:l,n?"":"."+i)}let c=n&&Ee.g?Ee.g:null;return n&&(Ee.g=Ee[i]),((l,u,d,p)=>{p?u.data=u.data.replace(p,l):u.data.indexOf(l)===-1&&(u.data=d?l+u.data:u.data+l)})(Ee[i],r,a,c),i},ao=(t,r,n)=>t.reduce((a,o,s)=>{let i=r[s];if(i&&i.call){let c=i(n),l=c&&c.props&&c.props.className||/^go/.test(c)&&c;i=l?"."+l:c&&typeof c=="object"?c.props?"":_e(c,""):c===!1?"":c}return a+o+(i??"")},"");function Zt(t){let r=this||{},n=t.call?t(r.p):t;return no(n.unshift?n.raw?ao(n,[].slice.call(arguments,1),r.p):n.reduce((a,o)=>Object.assign(a,o&&o.call?o(r.p):o),{}):n,to(r.target),r.g,r.o,r.k)}let zs,Cr,Nr;Zt.bind({g:1});let Ae=Zt.bind({k:1});function oo(t,r,n,a){_e.p=r,zs=t,Cr=n,Nr=a}function Fe(t,r){let n=this||{};return function(){let a=arguments;function o(s,i){let c=Object.assign({},s),l=c.className||o.className;n.p=Object.assign({theme:Cr&&Cr()},c),n.o=/ *go\d+/.test(l),c.className=Zt.apply(n,a)+(l?" "+l:"");let u=t;return t[0]&&(u=c.as||t,delete c.as),Nr&&u[0]&&Nr(c),zs(u,c)}return o}}var io=t=>typeof t=="function",Dt=(t,r)=>io(t)?t(r):t,lo=(()=>{let t=0;return()=>(++t).toString()})(),Os=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let r=matchMedia("(prefers-reduced-motion: reduce)");t=!r||r.matches}return t}})(),co=20,Ir="default",Us=(t,r)=>{let{toastLimit:n}=t.settings;switch(r.type){case 0:return{...t,toasts:[r.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(i=>i.id===r.toast.id?{...i,...r.toast}:i)};case 2:let{toast:a}=r;return Us(t,{type:t.toasts.find(i=>i.id===a.id)?1:0,toast:a});case 3:let{toastId:o}=r;return{...t,toasts:t.toasts.map(i=>i.id===o||o===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return r.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==r.toastId)};case 5:return{...t,pausedAt:r.time};case 6:let s=r.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+s}))}}},Ot=[],Ws={toasts:[],pausedAt:void 0,settings:{toastLimit:co}},Ce={},Fs=(t,r=Ir)=>{Ce[r]=Us(Ce[r]||Ws,t),Ot.forEach(([n,a])=>{n===r&&a(Ce[r])})},$s=t=>Object.keys(Ce).forEach(r=>Fs(t,r)),po=t=>Object.keys(Ce).find(r=>Ce[r].toasts.some(n=>n.id===t)),er=(t=Ir)=>r=>{Fs(r,t)},uo={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},ho=(t={},r=Ir)=>{let[n,a]=m.useState(Ce[r]||Ws),o=m.useRef(Ce[r]);m.useEffect(()=>(o.current!==Ce[r]&&a(Ce[r]),Ot.push([r,a]),()=>{let i=Ot.findIndex(([c])=>c===r);i>-1&&Ot.splice(i,1)}),[r]);let s=n.toasts.map(i=>{var c,l,u;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((c=t[i.type])==null?void 0:c.removeDelay)||(t==null?void 0:t.removeDelay),duration:i.duration||((l=t[i.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||uo[i.type],style:{...t.style,...(u=t[i.type])==null?void 0:u.style,...i.style}}});return{...n,toasts:s}},xo=(t,r="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:r,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||lo()}),kt=t=>(r,n)=>{let a=xo(r,t,n);return er(a.toasterId||po(a.id))({type:2,toast:a}),a.id},re=(t,r)=>kt("blank")(t,r);re.error=kt("error");re.success=kt("success");re.loading=kt("loading");re.custom=kt("custom");re.dismiss=(t,r)=>{let n={type:3,toastId:t};r?er(r)(n):$s(n)};re.dismissAll=t=>re.dismiss(void 0,t);re.remove=(t,r)=>{let n={type:4,toastId:t};r?er(r)(n):$s(n)};re.removeAll=t=>re.remove(void 0,t);re.promise=(t,r,n)=>{let a=re.loading(r.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(o=>{let s=r.success?Dt(r.success,o):void 0;return s?re.success(s,{id:a,...n,...n==null?void 0:n.success}):re.dismiss(a),o}).catch(o=>{let s=r.error?Dt(r.error,o):void 0;s?re.error(s,{id:a,...n,...n==null?void 0:n.error}):re.dismiss(a)}),t};var mo=1e3,fo=(t,r="default")=>{let{toasts:n,pausedAt:a}=ho(t,r),o=m.useRef(new Map).current,s=m.useCallback((p,h=mo)=>{if(o.has(p))return;let f=setTimeout(()=>{o.delete(p),i({type:4,toastId:p})},h);o.set(p,f)},[]);m.useEffect(()=>{if(a)return;let p=Date.now(),h=n.map(f=>{if(f.duration===1/0)return;let x=(f.duration||0)+f.pauseDuration-(p-f.createdAt);if(x<0){f.visible&&re.dismiss(f.id);return}return setTimeout(()=>re.dismiss(f.id,r),x)});return()=>{h.forEach(f=>f&&clearTimeout(f))}},[n,a,r]);let i=m.useCallback(er(r),[r]),c=m.useCallback(()=>{i({type:5,time:Date.now()})},[i]),l=m.useCallback((p,h)=>{i({type:1,toast:{id:p,height:h}})},[i]),u=m.useCallback(()=>{a&&i({type:6,time:Date.now()})},[a,i]),d=m.useCallback((p,h)=>{let{reverseOrder:f=!1,gutter:x=8,defaultPosition:v}=h||{},g=n.filter(k=>(k.position||v)===(p.position||v)&&k.height),b=g.findIndex(k=>k.id===p.id),S=g.filter((k,w)=>w<b&&k.visible).length;return g.filter(k=>k.visible).slice(...f?[S+1]:[0,S]).reduce((k,w)=>k+(w.height||0)+x,0)},[n]);return m.useEffect(()=>{n.forEach(p=>{if(p.dismissed)s(p.id,p.removeDelay);else{let h=o.get(p.id);h&&(clearTimeout(h),o.delete(p.id))}})},[n,s]),{toasts:n,handlers:{updateHeight:l,startPause:c,endPause:u,calculateOffset:d}}},go=Ae`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,vo=Ae`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,yo=Ae`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,bo=Fe("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${go} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${vo} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${yo} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,jo=Ae`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,So=Fe("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${jo} 1s linear infinite;
`,wo=Ae`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,ko=Ae`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Co=Fe("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${wo} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${ko} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,No=Fe("div")`
  position: absolute;
`,Ro=Fe("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Eo=Ae`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Po=Fe("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Eo} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,To=({toast:t})=>{let{icon:r,type:n,iconTheme:a}=t;return r!==void 0?typeof r=="string"?m.createElement(Po,null,r):r:n==="blank"?null:m.createElement(Ro,null,m.createElement(So,{...a}),n!=="loading"&&m.createElement(No,null,n==="error"?m.createElement(bo,{...a}):m.createElement(Co,{...a})))},Ao=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Ho=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Mo="0%{opacity:0;} 100%{opacity:1;}",Lo="0%{opacity:1;} 100%{opacity:0;}",Bo=Fe("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Io=Fe("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,_o=(t,r)=>{let n=t.includes("top")?1:-1,[a,o]=Os()?[Mo,Lo]:[Ao(n),Ho(n)];return{animation:r?`${Ae(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ae(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},zo=m.memo(({toast:t,position:r,style:n,children:a})=>{let o=t.height?_o(t.position||r||"top-center",t.visible):{opacity:0},s=m.createElement(To,{toast:t}),i=m.createElement(Io,{...t.ariaProps},Dt(t.message,t));return m.createElement(Bo,{className:t.className,style:{...o,...n,...t.style}},typeof a=="function"?a({icon:s,message:i}):m.createElement(m.Fragment,null,s,i))});oo(m.createElement);var Oo=({id:t,className:r,style:n,onHeightUpdate:a,children:o})=>{let s=m.useCallback(i=>{if(i){let c=()=>{let l=i.getBoundingClientRect().height;a(t,l)};c(),new MutationObserver(c).observe(i,{subtree:!0,childList:!0,characterData:!0})}},[t,a]);return m.createElement("div",{ref:s,className:r,style:n},o)},Uo=(t,r)=>{let n=t.includes("top"),a=n?{top:0}:{bottom:0},o=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Os()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${r*(n?1:-1)}px)`,...a,...o}},Wo=Zt`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Lt=16,Fo=({reverseOrder:t,position:r="top-center",toastOptions:n,gutter:a,children:o,toasterId:s,containerStyle:i,containerClassName:c})=>{let{toasts:l,handlers:u}=fo(n,s);return m.createElement("div",{"data-rht-toaster":s||"",style:{position:"fixed",zIndex:9999,top:Lt,left:Lt,right:Lt,bottom:Lt,pointerEvents:"none",...i},className:c,onMouseEnter:u.startPause,onMouseLeave:u.endPause},l.map(d=>{let p=d.position||r,h=u.calculateOffset(d,{reverseOrder:t,gutter:a,defaultPosition:r}),f=Uo(p,h);return m.createElement(Oo,{id:d.id,key:d.id,onHeightUpdate:u.updateHeight,className:d.visible?Wo:"",style:f},d.type==="custom"?Dt(d.message,d):o?o(d):m.createElement(zo,{toast:d,position:p}))}))},M=re;function Vs(t,r){return function(){return t.apply(r,arguments)}}const{toString:$o}=Object.prototype,{getPrototypeOf:_r}=Object,{iterator:tr,toStringTag:Ks}=Symbol,rr=(t=>r=>{const n=$o.call(r);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),be=t=>(t=t.toLowerCase(),r=>rr(r)===t),sr=t=>r=>typeof r===t,{isArray:ft}=Array,ut=sr("undefined");function Ct(t){return t!==null&&!ut(t)&&t.constructor!==null&&!ut(t.constructor)&&de(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Ds=be("ArrayBuffer");function Vo(t){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(t):r=t&&t.buffer&&Ds(t.buffer),r}const Ko=sr("string"),de=sr("function"),Xs=sr("number"),Nt=t=>t!==null&&typeof t=="object",Do=t=>t===!0||t===!1,Ut=t=>{if(rr(t)!=="object")return!1;const r=_r(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Ks in t)&&!(tr in t)},Xo=t=>{if(!Nt(t)||Ct(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},qo=be("Date"),Go=be("File"),Yo=be("Blob"),Jo=be("FileList"),Qo=t=>Nt(t)&&de(t.pipe),Zo=t=>{let r;return t&&(typeof FormData=="function"&&t instanceof FormData||de(t.append)&&((r=rr(t))==="formdata"||r==="object"&&de(t.toString)&&t.toString()==="[object FormData]"))},ei=be("URLSearchParams"),[ti,ri,si,ni]=["ReadableStream","Request","Response","Headers"].map(be),ai=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Rt(t,r,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let a,o;if(typeof t!="object"&&(t=[t]),ft(t))for(a=0,o=t.length;a<o;a++)r.call(null,t[a],a,t);else{if(Ct(t))return;const s=n?Object.getOwnPropertyNames(t):Object.keys(t),i=s.length;let c;for(a=0;a<i;a++)c=s[a],r.call(null,t[c],c,t)}}function qs(t,r){if(Ct(t))return null;r=r.toLowerCase();const n=Object.keys(t);let a=n.length,o;for(;a-- >0;)if(o=n[a],r===o.toLowerCase())return o;return null}const Ye=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Gs=t=>!ut(t)&&t!==Ye;function Rr(){const{caseless:t,skipUndefined:r}=Gs(this)&&this||{},n={},a=(o,s)=>{const i=t&&qs(n,s)||s;Ut(n[i])&&Ut(o)?n[i]=Rr(n[i],o):Ut(o)?n[i]=Rr({},o):ft(o)?n[i]=o.slice():(!r||!ut(o))&&(n[i]=o)};for(let o=0,s=arguments.length;o<s;o++)arguments[o]&&Rt(arguments[o],a);return n}const oi=(t,r,n,{allOwnKeys:a}={})=>(Rt(r,(o,s)=>{n&&de(o)?t[s]=Vs(o,n):t[s]=o},{allOwnKeys:a}),t),ii=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),li=(t,r,n,a)=>{t.prototype=Object.create(r.prototype,a),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:r.prototype}),n&&Object.assign(t.prototype,n)},ci=(t,r,n,a)=>{let o,s,i;const c={};if(r=r||{},t==null)return r;do{for(o=Object.getOwnPropertyNames(t),s=o.length;s-- >0;)i=o[s],(!a||a(i,t,r))&&!c[i]&&(r[i]=t[i],c[i]=!0);t=n!==!1&&_r(t)}while(t&&(!n||n(t,r))&&t!==Object.prototype);return r},di=(t,r,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=r.length;const a=t.indexOf(r,n);return a!==-1&&a===n},pi=t=>{if(!t)return null;if(ft(t))return t;let r=t.length;if(!Xs(r))return null;const n=new Array(r);for(;r-- >0;)n[r]=t[r];return n},ui=(t=>r=>t&&r instanceof t)(typeof Uint8Array<"u"&&_r(Uint8Array)),hi=(t,r)=>{const a=(t&&t[tr]).call(t);let o;for(;(o=a.next())&&!o.done;){const s=o.value;r.call(t,s[0],s[1])}},xi=(t,r)=>{let n;const a=[];for(;(n=t.exec(r))!==null;)a.push(n);return a},mi=be("HTMLFormElement"),fi=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,a,o){return a.toUpperCase()+o}),rs=(({hasOwnProperty:t})=>(r,n)=>t.call(r,n))(Object.prototype),gi=be("RegExp"),Ys=(t,r)=>{const n=Object.getOwnPropertyDescriptors(t),a={};Rt(n,(o,s)=>{let i;(i=r(o,s,t))!==!1&&(a[s]=i||o)}),Object.defineProperties(t,a)},vi=t=>{Ys(t,(r,n)=>{if(de(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const a=t[n];if(de(a)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},yi=(t,r)=>{const n={},a=o=>{o.forEach(s=>{n[s]=!0})};return ft(t)?a(t):a(String(t).split(r)),n},bi=()=>{},ji=(t,r)=>t!=null&&Number.isFinite(t=+t)?t:r;function Si(t){return!!(t&&de(t.append)&&t[Ks]==="FormData"&&t[tr])}const wi=t=>{const r=new Array(10),n=(a,o)=>{if(Nt(a)){if(r.indexOf(a)>=0)return;if(Ct(a))return a;if(!("toJSON"in a)){r[o]=a;const s=ft(a)?[]:{};return Rt(a,(i,c)=>{const l=n(i,o+1);!ut(l)&&(s[c]=l)}),r[o]=void 0,s}}return a};return n(t,0)},ki=be("AsyncFunction"),Ci=t=>t&&(Nt(t)||de(t))&&de(t.then)&&de(t.catch),Js=((t,r)=>t?setImmediate:r?((n,a)=>(Ye.addEventListener("message",({source:o,data:s})=>{o===Ye&&s===n&&a.length&&a.shift()()},!1),o=>{a.push(o),Ye.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",de(Ye.postMessage)),Ni=typeof queueMicrotask<"u"?queueMicrotask.bind(Ye):typeof process<"u"&&process.nextTick||Js,Ri=t=>t!=null&&de(t[tr]),j={isArray:ft,isArrayBuffer:Ds,isBuffer:Ct,isFormData:Zo,isArrayBufferView:Vo,isString:Ko,isNumber:Xs,isBoolean:Do,isObject:Nt,isPlainObject:Ut,isEmptyObject:Xo,isReadableStream:ti,isRequest:ri,isResponse:si,isHeaders:ni,isUndefined:ut,isDate:qo,isFile:Go,isBlob:Yo,isRegExp:gi,isFunction:de,isStream:Qo,isURLSearchParams:ei,isTypedArray:ui,isFileList:Jo,forEach:Rt,merge:Rr,extend:oi,trim:ai,stripBOM:ii,inherits:li,toFlatObject:ci,kindOf:rr,kindOfTest:be,endsWith:di,toArray:pi,forEachEntry:hi,matchAll:xi,isHTMLForm:mi,hasOwnProperty:rs,hasOwnProp:rs,reduceDescriptors:Ys,freezeMethods:vi,toObjectSet:yi,toCamelCase:fi,noop:bi,toFiniteNumber:ji,findKey:qs,global:Ye,isContextDefined:Gs,isSpecCompliantForm:Si,toJSONObject:wi,isAsyncFn:ki,isThenable:Ci,setImmediate:Js,asap:Ni,isIterable:Ri};function z(t,r,n,a,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",r&&(this.code=r),n&&(this.config=n),a&&(this.request=a),o&&(this.response=o,this.status=o.status?o.status:null)}j.inherits(z,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:j.toJSONObject(this.config),code:this.code,status:this.status}}});const Qs=z.prototype,Zs={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Zs[t]={value:t}});Object.defineProperties(z,Zs);Object.defineProperty(Qs,"isAxiosError",{value:!0});z.from=(t,r,n,a,o,s)=>{const i=Object.create(Qs);j.toFlatObject(t,i,function(d){return d!==Error.prototype},u=>u!=="isAxiosError");const c=t&&t.message?t.message:"Error",l=r==null&&t?t.code:r;return z.call(i,c,l,n,a,o),t&&i.cause==null&&Object.defineProperty(i,"cause",{value:t,configurable:!0}),i.name=t&&t.name||"Error",s&&Object.assign(i,s),i};const Ei=null;function Er(t){return j.isPlainObject(t)||j.isArray(t)}function en(t){return j.endsWith(t,"[]")?t.slice(0,-2):t}function ss(t,r,n){return t?t.concat(r).map(function(o,s){return o=en(o),!n&&s?"["+o+"]":o}).join(n?".":""):r}function Pi(t){return j.isArray(t)&&!t.some(Er)}const Ti=j.toFlatObject(j,{},null,function(r){return/^is[A-Z]/.test(r)});function nr(t,r,n){if(!j.isObject(t))throw new TypeError("target must be an object");r=r||new FormData,n=j.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,g){return!j.isUndefined(g[v])});const a=n.metaTokens,o=n.visitor||d,s=n.dots,i=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&j.isSpecCompliantForm(r);if(!j.isFunction(o))throw new TypeError("visitor must be a function");function u(x){if(x===null)return"";if(j.isDate(x))return x.toISOString();if(j.isBoolean(x))return x.toString();if(!l&&j.isBlob(x))throw new z("Blob is not supported. Use a Buffer instead.");return j.isArrayBuffer(x)||j.isTypedArray(x)?l&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function d(x,v,g){let b=x;if(x&&!g&&typeof x=="object"){if(j.endsWith(v,"{}"))v=a?v:v.slice(0,-2),x=JSON.stringify(x);else if(j.isArray(x)&&Pi(x)||(j.isFileList(x)||j.endsWith(v,"[]"))&&(b=j.toArray(x)))return v=en(v),b.forEach(function(k,w){!(j.isUndefined(k)||k===null)&&r.append(i===!0?ss([v],w,s):i===null?v:v+"[]",u(k))}),!1}return Er(x)?!0:(r.append(ss(g,v,s),u(x)),!1)}const p=[],h=Object.assign(Ti,{defaultVisitor:d,convertValue:u,isVisitable:Er});function f(x,v){if(!j.isUndefined(x)){if(p.indexOf(x)!==-1)throw Error("Circular reference detected in "+v.join("."));p.push(x),j.forEach(x,function(b,S){(!(j.isUndefined(b)||b===null)&&o.call(r,b,j.isString(S)?S.trim():S,v,h))===!0&&f(b,v?v.concat(S):[S])}),p.pop()}}if(!j.isObject(t))throw new TypeError("data must be an object");return f(t),r}function ns(t){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(a){return r[a]})}function zr(t,r){this._pairs=[],t&&nr(t,this,r)}const tn=zr.prototype;tn.append=function(r,n){this._pairs.push([r,n])};tn.toString=function(r){const n=r?function(a){return r.call(this,a,ns)}:ns;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function Ai(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function rn(t,r,n){if(!r)return t;const a=n&&n.encode||Ai;j.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let s;if(o?s=o(r,n):s=j.isURLSearchParams(r)?r.toString():new zr(r,n).toString(a),s){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class as{constructor(){this.handlers=[]}use(r,n,a){return this.handlers.push({fulfilled:r,rejected:n,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){j.forEach(this.handlers,function(a){a!==null&&r(a)})}}const sn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Hi=typeof URLSearchParams<"u"?URLSearchParams:zr,Mi=typeof FormData<"u"?FormData:null,Li=typeof Blob<"u"?Blob:null,Bi={isBrowser:!0,classes:{URLSearchParams:Hi,FormData:Mi,Blob:Li},protocols:["http","https","file","blob","url","data"]},Or=typeof window<"u"&&typeof document<"u",Pr=typeof navigator=="object"&&navigator||void 0,Ii=Or&&(!Pr||["ReactNative","NativeScript","NS"].indexOf(Pr.product)<0),_i=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",zi=Or&&window.location.href||"http://localhost",Oi=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Or,hasStandardBrowserEnv:Ii,hasStandardBrowserWebWorkerEnv:_i,navigator:Pr,origin:zi},Symbol.toStringTag,{value:"Module"})),le={...Oi,...Bi};function Ui(t,r){return nr(t,new le.classes.URLSearchParams,{visitor:function(n,a,o,s){return le.isNode&&j.isBuffer(n)?(this.append(a,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...r})}function Wi(t){return j.matchAll(/\w+|\[(\w*)]/g,t).map(r=>r[0]==="[]"?"":r[1]||r[0])}function Fi(t){const r={},n=Object.keys(t);let a;const o=n.length;let s;for(a=0;a<o;a++)s=n[a],r[s]=t[s];return r}function nn(t){function r(n,a,o,s){let i=n[s++];if(i==="__proto__")return!0;const c=Number.isFinite(+i),l=s>=n.length;return i=!i&&j.isArray(o)?o.length:i,l?(j.hasOwnProp(o,i)?o[i]=[o[i],a]:o[i]=a,!c):((!o[i]||!j.isObject(o[i]))&&(o[i]=[]),r(n,a,o[i],s)&&j.isArray(o[i])&&(o[i]=Fi(o[i])),!c)}if(j.isFormData(t)&&j.isFunction(t.entries)){const n={};return j.forEachEntry(t,(a,o)=>{r(Wi(a),o,n,0)}),n}return null}function $i(t,r,n){if(j.isString(t))try{return(r||JSON.parse)(t),j.trim(t)}catch(a){if(a.name!=="SyntaxError")throw a}return(n||JSON.stringify)(t)}const Et={transitional:sn,adapter:["xhr","http","fetch"],transformRequest:[function(r,n){const a=n.getContentType()||"",o=a.indexOf("application/json")>-1,s=j.isObject(r);if(s&&j.isHTMLForm(r)&&(r=new FormData(r)),j.isFormData(r))return o?JSON.stringify(nn(r)):r;if(j.isArrayBuffer(r)||j.isBuffer(r)||j.isStream(r)||j.isFile(r)||j.isBlob(r)||j.isReadableStream(r))return r;if(j.isArrayBufferView(r))return r.buffer;if(j.isURLSearchParams(r))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let c;if(s){if(a.indexOf("application/x-www-form-urlencoded")>-1)return Ui(r,this.formSerializer).toString();if((c=j.isFileList(r))||a.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return nr(c?{"files[]":r}:r,l&&new l,this.formSerializer)}}return s||o?(n.setContentType("application/json",!1),$i(r)):r}],transformResponse:[function(r){const n=this.transitional||Et.transitional,a=n&&n.forcedJSONParsing,o=this.responseType==="json";if(j.isResponse(r)||j.isReadableStream(r))return r;if(r&&j.isString(r)&&(a&&!this.responseType||o)){const i=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(r,this.parseReviver)}catch(c){if(i)throw c.name==="SyntaxError"?z.from(c,z.ERR_BAD_RESPONSE,this,null,this.response):c}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:le.classes.FormData,Blob:le.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};j.forEach(["delete","get","head","post","put","patch"],t=>{Et.headers[t]={}});const Vi=j.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ki=t=>{const r={};let n,a,o;return t&&t.split(`
`).forEach(function(i){o=i.indexOf(":"),n=i.substring(0,o).trim().toLowerCase(),a=i.substring(o+1).trim(),!(!n||r[n]&&Vi[n])&&(n==="set-cookie"?r[n]?r[n].push(a):r[n]=[a]:r[n]=r[n]?r[n]+", "+a:a)}),r},os=Symbol("internals");function jt(t){return t&&String(t).trim().toLowerCase()}function Wt(t){return t===!1||t==null?t:j.isArray(t)?t.map(Wt):String(t)}function Di(t){const r=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=n.exec(t);)r[a[1]]=a[2];return r}const Xi=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function mr(t,r,n,a,o){if(j.isFunction(a))return a.call(this,r,n);if(o&&(r=n),!!j.isString(r)){if(j.isString(a))return r.indexOf(a)!==-1;if(j.isRegExp(a))return a.test(r)}}function qi(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,n,a)=>n.toUpperCase()+a)}function Gi(t,r){const n=j.toCamelCase(" "+r);["get","set","has"].forEach(a=>{Object.defineProperty(t,a+n,{value:function(o,s,i){return this[a].call(this,r,o,s,i)},configurable:!0})})}let pe=class{constructor(r){r&&this.set(r)}set(r,n,a){const o=this;function s(c,l,u){const d=jt(l);if(!d)throw new Error("header name must be a non-empty string");const p=j.findKey(o,d);(!p||o[p]===void 0||u===!0||u===void 0&&o[p]!==!1)&&(o[p||l]=Wt(c))}const i=(c,l)=>j.forEach(c,(u,d)=>s(u,d,l));if(j.isPlainObject(r)||r instanceof this.constructor)i(r,n);else if(j.isString(r)&&(r=r.trim())&&!Xi(r))i(Ki(r),n);else if(j.isObject(r)&&j.isIterable(r)){let c={},l,u;for(const d of r){if(!j.isArray(d))throw TypeError("Object iterator must return a key-value pair");c[u=d[0]]=(l=c[u])?j.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}i(c,n)}else r!=null&&s(n,r,a);return this}get(r,n){if(r=jt(r),r){const a=j.findKey(this,r);if(a){const o=this[a];if(!n)return o;if(n===!0)return Di(o);if(j.isFunction(n))return n.call(this,o,a);if(j.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,n){if(r=jt(r),r){const a=j.findKey(this,r);return!!(a&&this[a]!==void 0&&(!n||mr(this,this[a],a,n)))}return!1}delete(r,n){const a=this;let o=!1;function s(i){if(i=jt(i),i){const c=j.findKey(a,i);c&&(!n||mr(a,a[c],c,n))&&(delete a[c],o=!0)}}return j.isArray(r)?r.forEach(s):s(r),o}clear(r){const n=Object.keys(this);let a=n.length,o=!1;for(;a--;){const s=n[a];(!r||mr(this,this[s],s,r,!0))&&(delete this[s],o=!0)}return o}normalize(r){const n=this,a={};return j.forEach(this,(o,s)=>{const i=j.findKey(a,s);if(i){n[i]=Wt(o),delete n[s];return}const c=r?qi(s):String(s).trim();c!==s&&delete n[s],n[c]=Wt(o),a[c]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const n=Object.create(null);return j.forEach(this,(a,o)=>{a!=null&&a!==!1&&(n[o]=r&&j.isArray(a)?a.join(", "):a)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,n])=>r+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...n){const a=new this(r);return n.forEach(o=>a.set(o)),a}static accessor(r){const a=(this[os]=this[os]={accessors:{}}).accessors,o=this.prototype;function s(i){const c=jt(i);a[c]||(Gi(o,i),a[c]=!0)}return j.isArray(r)?r.forEach(s):s(r),this}};pe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);j.reduceDescriptors(pe.prototype,({value:t},r)=>{let n=r[0].toUpperCase()+r.slice(1);return{get:()=>t,set(a){this[n]=a}}});j.freezeMethods(pe);function fr(t,r){const n=this||Et,a=r||n,o=pe.from(a.headers);let s=a.data;return j.forEach(t,function(c){s=c.call(n,s,o.normalize(),r?r.status:void 0)}),o.normalize(),s}function an(t){return!!(t&&t.__CANCEL__)}function gt(t,r,n){z.call(this,t??"canceled",z.ERR_CANCELED,r,n),this.name="CanceledError"}j.inherits(gt,z,{__CANCEL__:!0});function on(t,r,n){const a=n.config.validateStatus;!n.status||!a||a(n.status)?t(n):r(new z("Request failed with status code "+n.status,[z.ERR_BAD_REQUEST,z.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Yi(t){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}function Ji(t,r){t=t||10;const n=new Array(t),a=new Array(t);let o=0,s=0,i;return r=r!==void 0?r:1e3,function(l){const u=Date.now(),d=a[s];i||(i=u),n[o]=l,a[o]=u;let p=s,h=0;for(;p!==o;)h+=n[p++],p=p%t;if(o=(o+1)%t,o===s&&(s=(s+1)%t),u-i<r)return;const f=d&&u-d;return f?Math.round(h*1e3/f):void 0}}function Qi(t,r){let n=0,a=1e3/r,o,s;const i=(u,d=Date.now())=>{n=d,o=null,s&&(clearTimeout(s),s=null),t(...u)};return[(...u)=>{const d=Date.now(),p=d-n;p>=a?i(u,d):(o=u,s||(s=setTimeout(()=>{s=null,i(o)},a-p)))},()=>o&&i(o)]}const Xt=(t,r,n=3)=>{let a=0;const o=Ji(50,250);return Qi(s=>{const i=s.loaded,c=s.lengthComputable?s.total:void 0,l=i-a,u=o(l),d=i<=c;a=i;const p={loaded:i,total:c,progress:c?i/c:void 0,bytes:l,rate:u||void 0,estimated:u&&c&&d?(c-i)/u:void 0,event:s,lengthComputable:c!=null,[r?"download":"upload"]:!0};t(p)},n)},is=(t,r)=>{const n=t!=null;return[a=>r[0]({lengthComputable:n,total:t,loaded:a}),r[1]]},ls=t=>(...r)=>j.asap(()=>t(...r)),Zi=le.hasStandardBrowserEnv?((t,r)=>n=>(n=new URL(n,le.origin),t.protocol===n.protocol&&t.host===n.host&&(r||t.port===n.port)))(new URL(le.origin),le.navigator&&/(msie|trident)/i.test(le.navigator.userAgent)):()=>!0,el=le.hasStandardBrowserEnv?{write(t,r,n,a,o,s,i){if(typeof document>"u")return;const c=[`${t}=${encodeURIComponent(r)}`];j.isNumber(n)&&c.push(`expires=${new Date(n).toUTCString()}`),j.isString(a)&&c.push(`path=${a}`),j.isString(o)&&c.push(`domain=${o}`),s===!0&&c.push("secure"),j.isString(i)&&c.push(`SameSite=${i}`),document.cookie=c.join("; ")},read(t){if(typeof document>"u")return null;const r=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return r?decodeURIComponent(r[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function tl(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function rl(t,r){return r?t.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):t}function ln(t,r,n){let a=!tl(r);return t&&(a||n==!1)?rl(t,r):r}const cs=t=>t instanceof pe?{...t}:t;function Qe(t,r){r=r||{};const n={};function a(u,d,p,h){return j.isPlainObject(u)&&j.isPlainObject(d)?j.merge.call({caseless:h},u,d):j.isPlainObject(d)?j.merge({},d):j.isArray(d)?d.slice():d}function o(u,d,p,h){if(j.isUndefined(d)){if(!j.isUndefined(u))return a(void 0,u,p,h)}else return a(u,d,p,h)}function s(u,d){if(!j.isUndefined(d))return a(void 0,d)}function i(u,d){if(j.isUndefined(d)){if(!j.isUndefined(u))return a(void 0,u)}else return a(void 0,d)}function c(u,d,p){if(p in r)return a(u,d);if(p in t)return a(void 0,u)}const l={url:s,method:s,data:s,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:c,headers:(u,d,p)=>o(cs(u),cs(d),p,!0)};return j.forEach(Object.keys({...t,...r}),function(d){const p=l[d]||o,h=p(t[d],r[d],d);j.isUndefined(h)&&p!==c||(n[d]=h)}),n}const cn=t=>{const r=Qe({},t);let{data:n,withXSRFToken:a,xsrfHeaderName:o,xsrfCookieName:s,headers:i,auth:c}=r;if(r.headers=i=pe.from(i),r.url=rn(ln(r.baseURL,r.url,r.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&i.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),j.isFormData(n)){if(le.hasStandardBrowserEnv||le.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(j.isFunction(n.getHeaders)){const l=n.getHeaders(),u=["content-type","content-length"];Object.entries(l).forEach(([d,p])=>{u.includes(d.toLowerCase())&&i.set(d,p)})}}if(le.hasStandardBrowserEnv&&(a&&j.isFunction(a)&&(a=a(r)),a||a!==!1&&Zi(r.url))){const l=o&&s&&el.read(s);l&&i.set(o,l)}return r},sl=typeof XMLHttpRequest<"u",nl=sl&&function(t){return new Promise(function(n,a){const o=cn(t);let s=o.data;const i=pe.from(o.headers).normalize();let{responseType:c,onUploadProgress:l,onDownloadProgress:u}=o,d,p,h,f,x;function v(){f&&f(),x&&x(),o.cancelToken&&o.cancelToken.unsubscribe(d),o.signal&&o.signal.removeEventListener("abort",d)}let g=new XMLHttpRequest;g.open(o.method.toUpperCase(),o.url,!0),g.timeout=o.timeout;function b(){if(!g)return;const k=pe.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),C={data:!c||c==="text"||c==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:k,config:t,request:g};on(function(y){n(y),v()},function(y){a(y),v()},C),g=null}"onloadend"in g?g.onloadend=b:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(b)},g.onabort=function(){g&&(a(new z("Request aborted",z.ECONNABORTED,t,g)),g=null)},g.onerror=function(w){const C=w&&w.message?w.message:"Network Error",E=new z(C,z.ERR_NETWORK,t,g);E.event=w||null,a(E),g=null},g.ontimeout=function(){let w=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const C=o.transitional||sn;o.timeoutErrorMessage&&(w=o.timeoutErrorMessage),a(new z(w,C.clarifyTimeoutError?z.ETIMEDOUT:z.ECONNABORTED,t,g)),g=null},s===void 0&&i.setContentType(null),"setRequestHeader"in g&&j.forEach(i.toJSON(),function(w,C){g.setRequestHeader(C,w)}),j.isUndefined(o.withCredentials)||(g.withCredentials=!!o.withCredentials),c&&c!=="json"&&(g.responseType=o.responseType),u&&([h,x]=Xt(u,!0),g.addEventListener("progress",h)),l&&g.upload&&([p,f]=Xt(l),g.upload.addEventListener("progress",p),g.upload.addEventListener("loadend",f)),(o.cancelToken||o.signal)&&(d=k=>{g&&(a(!k||k.type?new gt(null,t,g):k),g.abort(),g=null)},o.cancelToken&&o.cancelToken.subscribe(d),o.signal&&(o.signal.aborted?d():o.signal.addEventListener("abort",d)));const S=Yi(o.url);if(S&&le.protocols.indexOf(S)===-1){a(new z("Unsupported protocol "+S+":",z.ERR_BAD_REQUEST,t));return}g.send(s||null)})},al=(t,r)=>{const{length:n}=t=t?t.filter(Boolean):[];if(r||n){let a=new AbortController,o;const s=function(u){if(!o){o=!0,c();const d=u instanceof Error?u:this.reason;a.abort(d instanceof z?d:new gt(d instanceof Error?d.message:d))}};let i=r&&setTimeout(()=>{i=null,s(new z(`timeout ${r} of ms exceeded`,z.ETIMEDOUT))},r);const c=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),t=null)};t.forEach(u=>u.addEventListener("abort",s));const{signal:l}=a;return l.unsubscribe=()=>j.asap(c),l}},ol=function*(t,r){let n=t.byteLength;if(n<r){yield t;return}let a=0,o;for(;a<n;)o=a+r,yield t.slice(a,o),a=o},il=async function*(t,r){for await(const n of ll(t))yield*ol(n,r)},ll=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const r=t.getReader();try{for(;;){const{done:n,value:a}=await r.read();if(n)break;yield a}}finally{await r.cancel()}},ds=(t,r,n,a)=>{const o=il(t,r);let s=0,i,c=l=>{i||(i=!0,a&&a(l))};return new ReadableStream({async pull(l){try{const{done:u,value:d}=await o.next();if(u){c(),l.close();return}let p=d.byteLength;if(n){let h=s+=p;n(h)}l.enqueue(new Uint8Array(d))}catch(u){throw c(u),u}},cancel(l){return c(l),o.return()}},{highWaterMark:2})},ps=64*1024,{isFunction:Bt}=j,cl=(({Request:t,Response:r})=>({Request:t,Response:r}))(j.global),{ReadableStream:us,TextEncoder:hs}=j.global,xs=(t,...r)=>{try{return!!t(...r)}catch{return!1}},dl=t=>{t=j.merge.call({skipUndefined:!0},cl,t);const{fetch:r,Request:n,Response:a}=t,o=r?Bt(r):typeof fetch=="function",s=Bt(n),i=Bt(a);if(!o)return!1;const c=o&&Bt(us),l=o&&(typeof hs=="function"?(x=>v=>x.encode(v))(new hs):async x=>new Uint8Array(await new n(x).arrayBuffer())),u=s&&c&&xs(()=>{let x=!1;const v=new n(le.origin,{body:new us,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!v}),d=i&&c&&xs(()=>j.isReadableStream(new a("").body)),p={stream:d&&(x=>x.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!p[x]&&(p[x]=(v,g)=>{let b=v&&v[x];if(b)return b.call(v);throw new z(`Response type '${x}' is not supported`,z.ERR_NOT_SUPPORT,g)})});const h=async x=>{if(x==null)return 0;if(j.isBlob(x))return x.size;if(j.isSpecCompliantForm(x))return(await new n(le.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if(j.isArrayBufferView(x)||j.isArrayBuffer(x))return x.byteLength;if(j.isURLSearchParams(x)&&(x=x+""),j.isString(x))return(await l(x)).byteLength},f=async(x,v)=>{const g=j.toFiniteNumber(x.getContentLength());return g??h(v)};return async x=>{let{url:v,method:g,data:b,signal:S,cancelToken:k,timeout:w,onDownloadProgress:C,onUploadProgress:E,responseType:y,headers:R,withCredentials:P="same-origin",fetchOptions:T}=cn(x),I=r||fetch;y=y?(y+"").toLowerCase():"text";let _=al([S,k&&k.toAbortSignal()],w),A=null;const F=_&&_.unsubscribe&&(()=>{_.unsubscribe()});let V;try{if(E&&u&&g!=="get"&&g!=="head"&&(V=await f(R,b))!==0){let ne=new n(v,{method:"POST",body:b,duplex:"half"}),ce;if(j.isFormData(b)&&(ce=ne.headers.get("content-type"))&&R.setContentType(ce),ne.body){const[je,me]=is(V,Xt(ls(E)));b=ds(ne.body,ps,je,me)}}j.isString(P)||(P=P?"include":"omit");const U=s&&"credentials"in n.prototype,O={...T,signal:_,method:g.toUpperCase(),headers:R.normalize().toJSON(),body:b,duplex:"half",credentials:U?P:void 0};A=s&&new n(v,O);let K=await(s?I(A,T):I(v,O));const X=d&&(y==="stream"||y==="response");if(d&&(C||X&&F)){const ne={};["status","statusText","headers"].forEach(H=>{ne[H]=K[H]});const ce=j.toFiniteNumber(K.headers.get("content-length")),[je,me]=C&&is(ce,Xt(ls(C),!0))||[];K=new a(ds(K.body,ps,je,()=>{me&&me(),F&&F()}),ne)}y=y||"text";let q=await p[j.findKey(p,y)||"text"](K,x);return!X&&F&&F(),await new Promise((ne,ce)=>{on(ne,ce,{data:q,headers:pe.from(K.headers),status:K.status,statusText:K.statusText,config:x,request:A})})}catch(U){throw F&&F(),U&&U.name==="TypeError"&&/Load failed|fetch/i.test(U.message)?Object.assign(new z("Network Error",z.ERR_NETWORK,x,A),{cause:U.cause||U}):z.from(U,U&&U.code,x,A)}}},pl=new Map,dn=t=>{let r=t&&t.env||{};const{fetch:n,Request:a,Response:o}=r,s=[a,o,n];let i=s.length,c=i,l,u,d=pl;for(;c--;)l=s[c],u=d.get(l),u===void 0&&d.set(l,u=c?new Map:dl(r)),d=u;return u};dn();const Ur={http:Ei,xhr:nl,fetch:{get:dn}};j.forEach(Ur,(t,r)=>{if(t){try{Object.defineProperty(t,"name",{value:r})}catch{}Object.defineProperty(t,"adapterName",{value:r})}});const ms=t=>`- ${t}`,ul=t=>j.isFunction(t)||t===null||t===!1;function hl(t,r){t=j.isArray(t)?t:[t];const{length:n}=t;let a,o;const s={};for(let i=0;i<n;i++){a=t[i];let c;if(o=a,!ul(a)&&(o=Ur[(c=String(a)).toLowerCase()],o===void 0))throw new z(`Unknown adapter '${c}'`);if(o&&(j.isFunction(o)||(o=o.get(r))))break;s[c||"#"+i]=o}if(!o){const i=Object.entries(s).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let c=n?i.length>1?`since :
`+i.map(ms).join(`
`):" "+ms(i[0]):"as no adapter specified";throw new z("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return o}const pn={getAdapter:hl,adapters:Ur};function gr(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new gt(null,t)}function fs(t){return gr(t),t.headers=pe.from(t.headers),t.data=fr.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),pn.getAdapter(t.adapter||Et.adapter,t)(t).then(function(a){return gr(t),a.data=fr.call(t,t.transformResponse,a),a.headers=pe.from(a.headers),a},function(a){return an(a)||(gr(t),a&&a.response&&(a.response.data=fr.call(t,t.transformResponse,a.response),a.response.headers=pe.from(a.response.headers))),Promise.reject(a)})}const un="1.13.2",ar={};["object","boolean","number","function","string","symbol"].forEach((t,r)=>{ar[t]=function(a){return typeof a===t||"a"+(r<1?"n ":" ")+t}});const gs={};ar.transitional=function(r,n,a){function o(s,i){return"[Axios v"+un+"] Transitional option '"+s+"'"+i+(a?". "+a:"")}return(s,i,c)=>{if(r===!1)throw new z(o(i," has been removed"+(n?" in "+n:"")),z.ERR_DEPRECATED);return n&&!gs[i]&&(gs[i]=!0,console.warn(o(i," has been deprecated since v"+n+" and will be removed in the near future"))),r?r(s,i,c):!0}};ar.spelling=function(r){return(n,a)=>(console.warn(`${a} is likely a misspelling of ${r}`),!0)};function xl(t,r,n){if(typeof t!="object")throw new z("options must be an object",z.ERR_BAD_OPTION_VALUE);const a=Object.keys(t);let o=a.length;for(;o-- >0;){const s=a[o],i=r[s];if(i){const c=t[s],l=c===void 0||i(c,s,t);if(l!==!0)throw new z("option "+s+" must be "+l,z.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new z("Unknown option "+s,z.ERR_BAD_OPTION)}}const Ft={assertOptions:xl,validators:ar},Se=Ft.validators;let Je=class{constructor(r){this.defaults=r||{},this.interceptors={request:new as,response:new as}}async request(r,n){try{return await this._request(r,n)}catch(a){if(a instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const s=o.stack?o.stack.replace(/^.+\n/,""):"";try{a.stack?s&&!String(a.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+s):a.stack=s}catch{}}throw a}}_request(r,n){typeof r=="string"?(n=n||{},n.url=r):n=r||{},n=Qe(this.defaults,n);const{transitional:a,paramsSerializer:o,headers:s}=n;a!==void 0&&Ft.assertOptions(a,{silentJSONParsing:Se.transitional(Se.boolean),forcedJSONParsing:Se.transitional(Se.boolean),clarifyTimeoutError:Se.transitional(Se.boolean)},!1),o!=null&&(j.isFunction(o)?n.paramsSerializer={serialize:o}:Ft.assertOptions(o,{encode:Se.function,serialize:Se.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Ft.assertOptions(n,{baseUrl:Se.spelling("baseURL"),withXsrfToken:Se.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=s&&j.merge(s.common,s[n.method]);s&&j.forEach(["delete","get","head","post","put","patch","common"],x=>{delete s[x]}),n.headers=pe.concat(i,s);const c=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(n)===!1||(l=l&&v.synchronous,c.unshift(v.fulfilled,v.rejected))});const u=[];this.interceptors.response.forEach(function(v){u.push(v.fulfilled,v.rejected)});let d,p=0,h;if(!l){const x=[fs.bind(this),void 0];for(x.unshift(...c),x.push(...u),h=x.length,d=Promise.resolve(n);p<h;)d=d.then(x[p++],x[p++]);return d}h=c.length;let f=n;for(;p<h;){const x=c[p++],v=c[p++];try{f=x(f)}catch(g){v.call(this,g);break}}try{d=fs.call(this,f)}catch(x){return Promise.reject(x)}for(p=0,h=u.length;p<h;)d=d.then(u[p++],u[p++]);return d}getUri(r){r=Qe(this.defaults,r);const n=ln(r.baseURL,r.url,r.allowAbsoluteUrls);return rn(n,r.params,r.paramsSerializer)}};j.forEach(["delete","get","head","options"],function(r){Je.prototype[r]=function(n,a){return this.request(Qe(a||{},{method:r,url:n,data:(a||{}).data}))}});j.forEach(["post","put","patch"],function(r){function n(a){return function(s,i,c){return this.request(Qe(c||{},{method:r,headers:a?{"Content-Type":"multipart/form-data"}:{},url:s,data:i}))}}Je.prototype[r]=n(),Je.prototype[r+"Form"]=n(!0)});let ml=class hn{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const a=this;this.promise.then(o=>{if(!a._listeners)return;let s=a._listeners.length;for(;s-- >0;)a._listeners[s](o);a._listeners=null}),this.promise.then=o=>{let s;const i=new Promise(c=>{a.subscribe(c),s=c}).then(o);return i.cancel=function(){a.unsubscribe(s)},i},r(function(s,i,c){a.reason||(a.reason=new gt(s,i,c),n(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const n=this._listeners.indexOf(r);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const r=new AbortController,n=a=>{r.abort(a)};return this.subscribe(n),r.signal.unsubscribe=()=>this.unsubscribe(n),r.signal}static source(){let r;return{token:new hn(function(o){r=o}),cancel:r}}};function fl(t){return function(n){return t.apply(null,n)}}function gl(t){return j.isObject(t)&&t.isAxiosError===!0}const Tr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Tr).forEach(([t,r])=>{Tr[r]=t});function xn(t){const r=new Je(t),n=Vs(Je.prototype.request,r);return j.extend(n,Je.prototype,r,{allOwnKeys:!0}),j.extend(n,r,null,{allOwnKeys:!0}),n.create=function(o){return xn(Qe(t,o))},n}const Y=xn(Et);Y.Axios=Je;Y.CanceledError=gt;Y.CancelToken=ml;Y.isCancel=an;Y.VERSION=un;Y.toFormData=nr;Y.AxiosError=z;Y.Cancel=Y.CanceledError;Y.all=function(r){return Promise.all(r)};Y.spread=fl;Y.isAxiosError=gl;Y.mergeConfig=Qe;Y.AxiosHeaders=pe;Y.formToJSON=t=>nn(j.isHTMLForm(t)?new FormData(t):t);Y.getAdapter=pn.getAdapter;Y.HttpStatusCode=Tr;Y.default=Y;const{Axios:td,AxiosError:rd,CanceledError:sd,isCancel:nd,CancelToken:ad,VERSION:od,all:id,Cancel:ld,isAxiosError:cd,spread:dd,toFormData:pd,AxiosHeaders:ud,HttpStatusCode:hd,formToJSON:xd,getAdapter:md,mergeConfig:fd}=Y,vl=()=>"/api",yl=vl(),D=Y.create({baseURL:yl,headers:{"Content-Type":"application/json"}});D.interceptors.request.use(t=>{const r=localStorage.getItem("token");return r&&(t.headers=t.headers||{},t.headers.Authorization=`Bearer ${r}`),t});D.interceptors.response.use(t=>t,t=>{var r;return((r=t.response)==null?void 0:r.status)===401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.pathname.includes("/login")||(window.location.href="/login")),Promise.reject(t)});const Ar={login:t=>D.post("/auth/login",t),register:t=>D.post("/auth/register",t),me:()=>D.get("/auth/me"),changePassword:t=>D.post("/auth/change-password",t),updateProfile:t=>D.put("/auth/profile",t)},se={connect:t=>D.post("/marzban/connect",t),getConfigs:()=>D.get("/marzban/configs"),updateConfig:(t,r)=>D.put(`/marzban/configs/${t}`,r),deleteConfig:t=>D.delete(`/marzban/configs/${t}`),getSystemStats:t=>D.get(`/marzban/configs/${t}/system`),getInbounds:t=>D.get(`/marzban/configs/${t}/inbounds`),getNodes:t=>D.get(`/marzban/configs/${t}/nodes`),restartXray:t=>D.post(`/marzban/configs/${t}/restart-xray`),getNodesUsage:(t,r,n)=>D.get(`/marzban/configs/${t}/nodes-usage?start=${r}&end=${n}`),getCoreConfig:t=>D.get(`/marzban/configs/${t}/core-config`),updateCoreConfig:(t,r)=>D.put(`/marzban/configs/${t}/core-config`,r),getHosts:t=>D.get(`/marzban/configs/${t}/hosts`),updateHosts:(t,r)=>D.put(`/marzban/configs/${t}/hosts`,r)},Oe={getUsers:(t,r)=>D.get(`/users/${t}`,{params:r}),getUser:(t,r)=>D.get(`/users/${t}/${encodeURIComponent(r)}`),createUser:(t,r)=>D.post(`/users/${t}`,r),updateUser:(t,r,n)=>D.put(`/users/${t}/${encodeURIComponent(r)}`,n),deleteUser:(t,r)=>D.delete(`/users/${t}/${encodeURIComponent(r)}`),resetTraffic:(t,r)=>D.post(`/users/${t}/${encodeURIComponent(r)}/reset`),revokeSubscription:(t,r)=>D.post(`/users/${t}/${encodeURIComponent(r)}/revoke`)},mn=m.createContext(null);function bl({children:t}){const[r,n]=m.useState(null),[a,o]=m.useState(!0);m.useEffect(function(){s()},[]);var s=async function(){var d=localStorage.getItem("token"),p=localStorage.getItem("user");if(d&&p)try{n(JSON.parse(p));try{var h=await Ar.me();h.data&&h.data.user&&(n(h.data.user),localStorage.setItem("user",JSON.stringify(h.data.user)))}catch(f){f.response&&f.response.status===401?(console.log("Token expired, logging out"),localStorage.removeItem("token"),localStorage.removeItem("user"),n(null)):console.log("Token verify failed (network issue), keeping session:",f.message)}}catch(f){console.error("Auth check failed:",f)}o(!1)},i=async function(d,p){var v,g,b,S,k,w,C,E,y,R,P;var h=await Ar.login({username:d,email:d,password:p});console.log("LOGIN RESPONSE:",h.data);var f=((v=h.data)==null?void 0:v.token)||((g=h.data)==null?void 0:g.accessToken)||((b=h.data)==null?void 0:b.access_token)||((S=h.data)==null?void 0:S.jwt)||((w=(k=h.data)==null?void 0:k.data)==null?void 0:w.token)||((E=(C=h.data)==null?void 0:C.data)==null?void 0:E.accessToken),x=((y=h.data)==null?void 0:y.user)||((P=(R=h.data)==null?void 0:R.data)==null?void 0:P.user)||null;if(!f)throw new Error("Login succeeded but token was not returned by API");return localStorage.setItem("token",f),x?(localStorage.setItem("user",JSON.stringify(x)),n(x)):n({username:d}),{user:x,token:f}},c=function(){localStorage.removeItem("token"),localStorage.removeItem("user"),n(null)},l=function(d){n(d),localStorage.setItem("user",JSON.stringify(d))},u={user:r,loading:a,login:i,logout:c,updateUser:l,isAuthenticated:!!r};return e.jsx(mn.Provider,{value:u,children:t})}function $e(){var t=m.useContext(mn);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}var fn=m.createContext(null);function jl({children:t}){var[r,n]=m.useState(function(){try{var s=localStorage.getItem("theme");if(s)return s;if(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)return"dark"}catch{}return"dark"});m.useEffect(function(){document.documentElement.setAttribute("data-theme",r),r==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",r)},[r]);var a=function(){n(function(s){return s==="dark"?"light":"dark"})},o={theme:r,toggleTheme:a,isDark:r==="dark"};return e.jsx(fn.Provider,{value:o,children:t})}function gn(){var t=m.useContext(fn);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t}var vn=m.createContext(null);function yn({children:t}){var{isAuthenticated:r}=$e(),[n,a]=m.useState([]),[o,s]=m.useState(null),[i,c]=m.useState(!1);m.useEffect(function(){r?l():(a([]),s(null))},[r]);var l=async function(){try{c(!0);var v=await se.getConfigs(),g=v.data&&v.data.configs?v.data.configs:[];if(a(g),g.length>0&&!o&&s(g[0]),o){for(var b=null,S=0;S<g.length;S++)if(g[S].id===o.id){b=g[S];break}s(b||g[0]||null)}}catch(k){console.error("Failed to load configs:",k),a([])}finally{c(!1)}},u=async function(v){try{var g=await se.connect(v);return await l(),g.data&&g.data.config&&s(g.data.config),g.data}catch(b){throw b}},d=async function(v,g){try{var b=await se.updateConfig(v,g);return await l(),b.data}catch(S){throw S}},p=async function(v){try{await se.deleteConfig(v),o&&o.id===v&&s(null),await l()}catch(g){throw g}},h=function(v){s(v)},f=async function(){await l()},x={configs:n,activeConfig:o,loading:i,loadConfigs:l,addConfig:u,updateConfig:d,removeConfig:p,selectConfig:h,refreshConfigs:f,hasConfigs:n.length>0};return e.jsx(vn.Provider,{value:x,children:t})}function Ve(){var t=m.useContext(vn);if(!t)throw new Error("useMarzban must be used within a MarzbanProvider");return t}function Sl(){const[t,r]=m.useState(""),[n,a]=m.useState(""),[o,s]=m.useState(!1),[i,c]=m.useState(!1),{theme:l,toggleTheme:u}=gn(),[d,p]=m.useState(window.innerWidth<768);m.useEffect(()=>{const y=()=>p(window.innerWidth<768);return window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[]);const{login:h}=$e(),f=We();var x=async function(y){var P,T;if(y.preventDefault(),!t||!n){M.error("Please enter username and password");return}c(!0);try{await h(t,n),M.success("Login successful!"),f("/")}catch(I){var R=((T=(P=I.response)==null?void 0:P.data)==null?void 0:T.error)||"Login failed";M.error(R)}finally{c(!1)}};const v=l==="dark",g=v?"linear-gradient(135deg, #000000 0%, #020617 100%)":"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)",b=v?"rgba(15, 23, 42, 0.6)":"rgba(255, 255, 255, 0.8)",S=v?"rgba(30, 41, 59, 0.5)":"rgba(255, 255, 255, 0.6)",k=v?"#ffffff":"#0f172a",w=v?"rgba(255, 255, 255, 0.5)":"rgba(15, 23, 42, 0.5)",C=v?"rgba(0, 0, 0, 0.4)":"rgba(255, 255, 255, 0.9)",E=v?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)";return e.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:g,padding:d?"16px":"20px",position:"relative",overflow:"hidden",transition:"background 0.5s ease"},children:[e.jsx("button",{onClick:u,style:{position:"absolute",top:"20px",right:"20px",background:v?"rgba(255,255,255,0.1)":"rgba(255,255,255,0.5)",border:`1px solid ${S}`,borderRadius:"50%",width:"44px",height:"44px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:k,zIndex:50,backdropFilter:"blur(4px)",transition:"all 0.2s"},title:`Switch to ${v?"Light":"Dark"} Mode`,children:v?e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"22px",height:"22px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"22px",height:"22px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),e.jsx("div",{style:{position:"absolute",top:"20%",left:"50%",transform:"translate(-50%, -50%)",width:"300px",height:"300px",background:v?"rgba(139, 92, 246, 0.1)":"rgba(59, 130, 246, 0.2)",filter:"blur(80px)",borderRadius:"50%",pointerEvents:"none",transition:"background 0.5s ease"}}),e.jsxs("div",{style:{width:"100%",maxWidth:"400px",background:b,backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderRadius:"24px",border:`1px solid ${S}`,padding:d?"32px 24px":"48px",boxShadow:v?"0 25px 50px -12px rgba(0, 0, 0, 0.8)":"0 25px 50px -12px rgba(0, 0, 0, 0.1)",position:"relative",zIndex:10,transition:"all 0.3s ease"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[e.jsx("div",{style:{width:"80px",height:"80px",margin:"0 auto 20px",display:"flex",alignItems:"center",justifyContent:"center",background:v?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)",borderRadius:"20px",padding:"10px",border:`1px solid ${S}`},children:e.jsx("img",{src:"/logo.png",alt:"Marzban Logo",style:{width:"100%",height:"100%",objectFit:"contain"}})}),e.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:"700",color:k,margin:"0 0 8px 0",letterSpacing:"-0.025em"},children:"MARZ-X"}),e.jsx("p",{style:{color:w,margin:0,fontSize:"0.9rem"},children:"Enter your credentials to access the dashboard"})]}),e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",color:w,fontSize:"0.85rem",marginBottom:"8px",fontWeight:"500"},children:"Username"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("div",{style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:w},children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"20px",height:"20px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsx("input",{type:"text",value:t,onChange:function(y){r(y.target.value)},className:"form-input",placeholder:"Enter username",style:{width:"100%",padding:"14px 16px 14px 48px",background:C,border:`1px solid ${E}`,borderRadius:"12px",color:k,fontSize:"0.95rem",outline:"none",transition:"all 0.2s"},onFocus:y=>y.target.style.borderColor="#0d287eff",onBlur:y=>y.target.style.borderColor=E,required:!0,autoComplete:"username"})]})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("label",{style:{display:"block",color:w,fontSize:"0.85rem",marginBottom:"8px",fontWeight:"500"},children:"Password"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("div",{style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:w},children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"20px",height:"20px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx("input",{type:o?"text":"password",value:n,onChange:function(y){a(y.target.value)},placeholder:"Enter password",style:{width:"100%",padding:"14px 48px 14px 48px",background:C,border:`1px solid ${E}`,borderRadius:"12px",color:k,fontSize:"0.95rem",outline:"none",transition:"all 0.2s"},onFocus:y=>y.target.style.borderColor="#1e40af",onBlur:y=>y.target.style.borderColor=E,required:!0,autoComplete:"current-password"}),e.jsx("button",{type:"button",onClick:function(){s(!o)},style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer",color:w,padding:"8px",display:"flex",alignItems:"center",justifyContent:"center"},title:o?"Hide password":"Show password",children:o?e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"20px",height:"20px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"20px",height:"20px"},children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),e.jsx("button",{type:"submit",disabled:i,style:{width:"100%",padding:"16px",background:"#182a52ee",border:"none",borderRadius:"12px",color:"white",fontSize:"1rem",fontWeight:"600",cursor:i?"not-allowed":"pointer",opacity:i?.8:1,marginTop:"8px",boxShadow:v?"0 4px 12px rgba(0, 0, 0, 0.3)":"0 4px 12px rgba(30, 64, 175, 0.3)",transition:"transform 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},onMouseDown:y=>!i&&(y.currentTarget.style.transform="scale(0.98)"),onMouseUp:y=>!i&&(y.currentTarget.style.transform="scale(1)"),onMouseLeave:y=>!i&&(y.currentTarget.style.transform="scale(1)"),children:i?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"animate-spin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"20px",height:"20px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})}),e.jsx("span",{children:"Signing in..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Sign In"}),e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"18px",height:"18px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})]}),e.jsx("p",{style:{textAlign:"center",color:w,fontSize:"0.75rem",marginTop:"32px",marginBottom:0},children:"MARZ-X Dashboard  Secure Login"})]})]})}function wl(){const{activeConfig:t}=Ve(),r=We(),[n,a]=m.useState(null),[o,s]=m.useState(null),[i,c]=m.useState(null),[l,u]=m.useState(!0),[d,p]=m.useState(null),[h,f]=m.useState(!1),[x,v]=m.useState(!1),[g,b]=m.useState(!1),[S,k]=m.useState(null),[w,C]=m.useState(!1),[E,y]=m.useState("7d"),[R,P]=m.useState(""),[T,I]=m.useState(""),[_,A]=m.useState(null),[F,V]=m.useState([]),U=m.useRef(null);m.useEffect(function(){return t?(X(),ne(),ce(),O()):u(!1),function(){K()}},[t]);var O=function(){K(),U.current=setInterval(function(){q()},3e3)},K=function(){U.current&&(clearInterval(U.current),U.current=null)},X=async function(){try{u(!0);var B=await se.getSystemStats(t.id);a(B.data),p(new Date)}catch{M.error("Failed to load system stats")}finally{u(!1)}},q=async function(){try{var B=await se.getSystemStats(t.id);a(B.data),p(new Date)}catch{console.error("Failed to refresh stats")}},ne=async function(){try{var B=new Date,$=B.getFullYear(),ee=B.getMonth()+1,J=$+"-"+String(ee).padStart(2,"0")+"-01",Re=new Date($,ee,0).getDate(),Ze=new Date(Date.now()+864e5).toISOString().split("T")[0];console.log(Ze);var Q=await se.getNodesUsage(t.id,J,Ze);s(Q.data)}catch(he){console.error("Failed to load monthly usage:",he)}},ce=async function(){try{const $=new Date().toISOString().split("T")[0],ee=new Date(Date.now()+864e5).toISOString().split("T")[0];var B=await se.getNodesUsage(t.id,$,ee);c(B.data)}catch($){console.error("Failed to load daily usage:",$)}},je=function(){v(!0)},me=async function(){v(!1),f(!0);try{await se.restartXray(t.id),M.success("Xray Core restarted successfully!")}catch{M.error("Failed to restart Xray Core")}finally{f(!1)}},H=function(){b(!0),A(null),L("7d")},L=async function(B){C(!0);try{var $,ee,J=[];if(B==="custom"){if(!R||!T){M.error("Please select both start and end dates"),C(!1);return}for(var Re=new Date(R+"T00:00:00"),Ze=new Date(T+"T00:00:00");Re<=Ze;){var Q=Re.getFullYear()+"-"+String(Re.getMonth()+1).padStart(2,"0")+"-"+String(Re.getDate()).padStart(2,"0");J.push(Q),Re.setDate(Re.getDate()+1)}}else for(var he=new Date,_n=parseInt(B.replace("d","")),cr=_n-1;cr>=0;cr--){var dr=new Date(he.getTime()-cr*24*60*60*1e3),Q=dr.getFullYear()+"-"+String(dr.getMonth()+1).padStart(2,"0")+"-"+String(dr.getDate()).padStart(2,"0");J.push(Q)}for(var $r=[],pr=0;pr<J.length;pr++){var et=J[pr],ur=et.split("-"),hr=new Date(parseInt(ur[0]),parseInt(ur[1])-1,parseInt(ur[2])+1),Vr=hr.getFullYear()+"-"+String(hr.getMonth()+1).padStart(2,"0")+"-"+String(hr.getDate()).padStart(2,"0");console.log("Fetching data from "+et+" to "+Vr);try{var Ht=await se.getNodesUsage(t.id,et,Vr);console.log("Response for "+et,Ht.data),Ht.data&&Ht.data.usages&&Ht.data.usages.forEach(function(te){$r.push({...te,fetchDate:et})})}catch(te){console.error("Failed to load data for "+et,te)}}var Mt={usages:$r};if(k(Mt),y(B),Mt&&Mt.usages){var qe={};J.forEach(function(te){qe[te]={date:te,upload:0,download:0,total:0}}),Mt.usages.forEach(function(te){var Le=te.fetchDate||(te.created_at?te.created_at.split("T")[0]:null);Le&&qe[Le]?(qe[Le].upload+=te.uplink||0,qe[Le].download+=te.downlink||0,qe[Le].total+=(te.uplink||0)+(te.downlink||0)):console.log("Date not in map:",Le,"Usage:",te)}),console.log("Daily breakdown data:",qe);var Kr=Object.values(qe).sort(function(te,Le){return new Date(te.date)-new Date(Le.date)});console.log("Daily array for chart:",Kr),V(Kr)}}catch(te){M.error("Failed to load usage analytics"),console.error(te)}finally{C(!1)}},ie=function(B){if(!S||!S.usages||S.usages.length===0)return{download:0,upload:0,total:0,nodes:[]};var $=0,ee=0,J={},Re=B?S.usages.filter(function(Q){var he=Q.fetchDate||(Q.created_at?Q.created_at.split("T")[0]:null);return he===B}):S.usages;Re.forEach(function(Q){ee+=Q.uplink||0,$+=Q.downlink||0;var he=Q.node_name||Q.node_id||"Unknown";J[he]||(J[he]={upload:0,download:0,total:0}),J[he].upload+=Q.uplink||0,J[he].download+=Q.downlink||0,J[he].total+=(Q.uplink||0)+(Q.downlink||0)});var Ze=Object.entries(J).map(function([Q,he]){return{name:Q,...he}});return{download:$,upload:ee,total:$+ee,nodes:Ze}},fe=function(B){if(!B||B===0)return"0 B";var $=1e3,ee=["B","KB","MB","GB","TB","PB"],J=Math.floor(Math.log(B)/Math.log($));return parseFloat((B/Math.pow($,J)).toFixed(2))+" "+ee[J]},De=function(B){if(!B||B===0)return"0 B/s";var $=1024,ee=["B/s","KB/s","MB/s","GB/s"],J=Math.floor(Math.log(B)/Math.log($));return parseFloat((B/Math.pow($,J)).toFixed(2))+" "+ee[J]},Tt=function(B){return B?B.toLocaleTimeString():""},vt=function(B){return B?(B/(1e3*1e3*1e3)).toFixed(1)+" GB":"0 GB"},At=function(){if(!o||!o.usages||o.usages.length===0)return{download:0,upload:0,total:0};var B=0,$=0;return o.usages.forEach(function(ee){$+=ee.uplink||0,B+=ee.downlink||0}),{download:B,upload:$,total:B+$}},yt=function(){if(!i||!i.usages||i.usages.length===0)return{download:0,upload:0,total:0};var B=i.usages[0].uplink||0,$=i.usages[0].downlink||0;return{download:B,upload:$,total:B+$}};if(l)return e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{className:"loading-text",children:"Loading Dashboard..."})]});if(!t)return e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"icon-box",style:{background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6"},children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2"})})}),e.jsx("h2",{children:"Server Not Configured"}),e.jsx("p",{children:"You haven't added a Marzban server yet."}),e.jsx("button",{onClick:()=>r("/settings"),className:"btn btn-primary",children:"Go to Settings"})]});if(!n)return e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"icon-box",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h2",{children:"Failed to Load Stats"}),e.jsx("p",{children:"Unable to connect to the server."}),e.jsx("button",{onClick:X,className:"btn btn-primary",children:"Try Again"})]});var N=Math.round(n.cpu_usage||0),W=Math.round(n.mem_used/n.mem_total*100),Z=At(),ue=yt(),Xe=(n.incoming_bandwidth||0)+(n.outgoing_bandwidth||0);return e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("div",{className:"server-info-card",children:[e.jsxs("div",{className:"server-info-header",children:[e.jsxs("div",{className:"server-info-title",children:[e.jsx("div",{className:"icon",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2"})})}),e.jsxs("div",{children:[e.jsx("h2",{children:t?t.name:"Server"}),e.jsx("p",{children:t?t.endpointUrl:""})]})]}),e.jsxs("div",{className:"server-actions",children:[e.jsxs("div",{className:"live-indicator",children:[e.jsx("div",{className:"dot"}),e.jsx("span",{className:"text",children:"Live"}),e.jsx("span",{className:"time",children:Tt(d)})]}),e.jsxs("button",{onClick:je,className:"btn btn-warning",disabled:h,children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),e.jsx("span",{children:h?"Restarting...":"Restart Xray"})]}),e.jsxs("button",{onClick:X,className:"btn btn-secondary",children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),e.jsx("span",{children:"Refresh"})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"20px"},children:[e.jsxs("div",{className:"metric-panel",style:{display:"flex",alignItems:"center",gap:"24px",background:"rgba(255,255,255,0.03)",borderRadius:"16px",padding:"24px",border:"1px solid var(--border-color)"},children:[e.jsx(vs,{value:N,label:"CPU",color:N>80?"#ef4444":N>60?"#f59e0b":"#22c55e"}),e.jsxs("div",{className:"metric-panel-text",children:[e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:"Processor"}),e.jsxs("p",{style:{color:"var(--text-primary)",fontSize:"1.5rem",fontWeight:"700"},children:[n.cpu_cores," Cores"]}),e.jsxs("p",{style:{color:"var(--text-muted)",fontSize:"0.8125rem",marginTop:"8px"},children:["Usage: ",N,"%"]})]})]}),e.jsxs("div",{className:"metric-panel",style:{display:"flex",alignItems:"center",gap:"24px",background:"rgba(255,255,255,0.03)",borderRadius:"16px",padding:"24px",border:"1px solid var(--border-color)"},children:[e.jsx(vs,{value:W,label:"RAM",color:W>80?"#ef4444":W>60?"#f59e0b":"#3b82f6"}),e.jsxs("div",{className:"metric-panel-text",children:[e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:"Memory"}),e.jsx("p",{style:{color:"var(--text-primary)",fontSize:"1.5rem",fontWeight:"700"},children:vt(n.mem_total)}),e.jsxs("p",{style:{color:"var(--text-muted)",fontSize:"0.8125rem",marginTop:"8px"},children:["Used: ",vt(n.mem_used)]})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",borderRadius:"16px",padding:"24px",border:"1px solid var(--border-color)"},children:[e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",marginBottom:"16px"},children:"Real-time Network"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, #22c55e 0%, #16a34a 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2.5",style:{width:"20px",height:"20px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("p",{style:{color:"var(--accent-green)",fontSize:"0.8125rem"},children:"Download"}),e.jsx("p",{style:{color:"var(--text-primary)",fontSize:"1.25rem",fontWeight:"700"},children:De(n.incoming_bandwidth_speed)})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2.5",style:{width:"20px",height:"20px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 10l7-7m0 0l7 7m-7-7v18"})})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("p",{style:{color:"var(--accent-blue)",fontSize:"0.8125rem"},children:"Upload"}),e.jsx("p",{style:{color:"var(--text-primary)",fontSize:"1.25rem",fontWeight:"700"},children:De(n.outgoing_bandwidth_speed)})]})]})]})]})]}),e.jsxs("div",{className:"metric-grid",style:{marginTop:"20px",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))"},children:[e.jsxs("div",{className:"metric-card",style:{borderColor:"rgba(233, 17, 53, 0.35)"},children:[e.jsx("div",{className:"icon",style:{background:"linear-gradient(135deg, #e91135  0%, #960a0a 100%)"},children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12h3l3-9 4 18 3-9h5"})})}),e.jsx("div",{className:"value",style:{color:"#e9113598",fontSize:"1.25rem"},children:fe(ue.total)}),e.jsx("div",{className:"label",children:"Daily Usage"})]}),e.jsxs("div",{className:"metric-card",style:{borderColor:"rgba(20, 184, 166, 0.35)"},children:[e.jsx("div",{className:"icon",style:{background:"linear-gradient(135deg, #14b8a6 0%, #0d9488 100%)"},children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),e.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),e.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),e.jsx("div",{className:"value",style:{color:"#14b8a698",fontSize:"1.25rem"},children:fe(Z.total)}),e.jsx("div",{className:"label",children:"Monthly Usage"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:"icon",style:{background:"linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%)"},children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsx("div",{className:"value",children:fe(Xe)}),e.jsx("div",{className:"label",children:"Total Bandwidth"})]}),e.jsxs("div",{className:"metric-card",style:{borderColor:"rgba(139, 92, 246, 0.35)",cursor:"pointer"},onClick:H,children:[e.jsx("div",{className:"icon",style:{background:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)"},children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})})}),e.jsx("div",{className:"value",style:{color:"#8b5cf698",fontSize:"1.25rem"},children:"Analytics"}),e.jsx("div",{className:"label",children:"View Usage Analytics"})]})]})]}),e.jsxs("div",{className:"users-section",children:[e.jsx("div",{className:"section-header",children:e.jsxs("h3",{children:[e.jsx("div",{className:"icon",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),"User Statistics"]})}),e.jsxs("div",{className:"user-stats-grid",children:[e.jsxs("div",{className:"user-stat-card total",children:[e.jsx("div",{className:"value",children:n.total_user}),e.jsx("div",{className:"label",children:"Total Users"})]}),e.jsxs("div",{className:"user-stat-card online",children:[e.jsx("div",{className:"value",children:n.online_users}),e.jsx("div",{className:"label",children:"Online Now"})]}),e.jsxs("div",{className:"user-stat-card active",children:[e.jsx("div",{className:"value",children:n.users_active}),e.jsx("div",{className:"label",children:"Active"})]}),e.jsxs("div",{className:"user-stat-card expired",children:[e.jsx("div",{className:"value",children:n.users_expired}),e.jsx("div",{className:"label",children:"Expired"})]}),e.jsxs("div",{className:"user-stat-card limited",children:[e.jsx("div",{className:"value",children:n.users_limited}),e.jsx("div",{className:"label",children:"Limited"})]}),e.jsxs("div",{className:"user-stat-card disabled",children:[e.jsx("div",{className:"value",children:n.users_disabled+n.users_on_hold}),e.jsx("div",{className:"label",children:"Disabled/Hold"})]})]})]}),x&&e.jsx(kl,{title:"Restart Xray",message:"Are you sure you want to restart the Xray Core? This might interrupt active connections briefly.",onConfirm:me,onCancel:()=>v(!1)}),g&&e.jsx(Cl,{usageAnalytics:S,usageLoading:w,dateRange:E,customStartDate:R,customEndDate:T,dailyBreakdown:F,selectedDate:_,onDateRangeChange:L,onCustomStartDateChange:P,onCustomEndDateChange:I,onDateSelect:A,onClose:()=>{b(!1),A(null),y("7d")},calculateUsageStats:ie,formatBytes:fe})]})}function kl({title:t,message:r,onConfirm:n,onCancel:a}){return e.jsx("div",{className:"modal-overlay",onClick:a,style:{position:"fixed",inset:0,zIndex:1050,backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:e.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),style:{maxWidth:"400px",width:"100%",margin:"0"},children:[e.jsx("div",{className:"modal-header",style:{borderBottom:"none",paddingBottom:"0"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"rgba(245, 158, 11, 0.15)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#f59e0b",strokeWidth:"2",style:{width:"24px",height:"24px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h3",{style:{margin:0},children:t})]})}),e.jsx("div",{className:"modal-body",style:{paddingTop:"16px"},children:e.jsx("p",{style:{color:"var(--text-secondary)",margin:0},children:r})}),e.jsxs("div",{className:"modal-footer",style:{borderTop:"none",paddingTop:"8px"},children:[e.jsx("button",{onClick:a,className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{onClick:n,className:"btn btn-warning",children:"Restart"})]})]})})}function vs({value:t,label:r,color:n}){var a=120,o=10,s=(a-o)/2,i=2*Math.PI*s,c=i-t/100*i,l=a/2;return e.jsxs("div",{className:"speedometer",children:[e.jsxs("svg",{className:"speedometer-circle",viewBox:"0 0 "+a+" "+a,children:[e.jsx("circle",{className:"speedometer-bg",cx:l,cy:l,r:s}),e.jsx("circle",{className:"speedometer-progress",cx:l,cy:l,r:s,stroke:n,strokeDasharray:i,strokeDashoffset:c})]}),e.jsxs("div",{className:"speedometer-center",children:[e.jsxs("div",{className:"speedometer-value",style:{color:n},children:[t,"%"]}),e.jsx("div",{className:"speedometer-label",children:r})]})]})}function Cl({usageAnalytics:t,usageLoading:r,dateRange:n,customStartDate:a,customEndDate:o,dailyBreakdown:s,selectedDate:i,onDateRangeChange:c,onCustomStartDateChange:l,onCustomEndDateChange:u,onDateSelect:d,onClose:p,calculateUsageStats:h,formatBytes:f}){var x=h(i),v=[{value:"3d",label:"Last 3 Days"},{value:"7d",label:"Last 7 Days"},{value:"14d",label:"Last 14 Days"},{value:"30d",label:"Last 30 Days"}],g=function(w){var C=new Date(w+"T00:00:00");return C.toLocaleDateString("en-US",{month:"short",day:"numeric"})},b=function(w){var C=new Date(w+"T00:00:00");return C.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})},S=function(){return!i||!s?null:s.find(function(w){return w.date===i})},k=S();return e.jsx("div",{className:"modal-overlay",onClick:p,style:{position:"fixed",inset:0,zIndex:1050,backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"12px",overflowY:"auto"},children:e.jsxs("div",{className:"modal-content",onClick:w=>w.stopPropagation(),style:{maxWidth:"900px",width:"100%",margin:"20px auto",maxHeight:"95vh",overflowY:"auto",borderRadius:"16px",overflow:"hidden"},children:[e.jsxs("div",{className:"modal-header",style:{borderBottom:"1px solid var(--border-color)",padding:"16px 20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flex:1},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"rgba(139, 92, 246, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#8b5cf6",strokeWidth:"2",style:{width:"20px",height:"20px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12h3l3-9 4 18 3-9h5"})})}),e.jsxs("div",{style:{minWidth:0},children:[e.jsx("h3",{style:{margin:0,fontSize:"1.125rem"},children:"Usage Analytics"}),e.jsx("p",{style:{margin:0,fontSize:"0.8125rem",color:"var(--text-muted)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:i?`Data for ${g(i)}`:"Bandwidth usage breakdown"})]})]}),e.jsx("button",{onClick:p,style:{background:"none",border:"none",cursor:"pointer",padding:"8px",color:"var(--text-muted)",flexShrink:0},children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"20px",height:"20px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"modal-body",style:{padding:"20px"},children:[!i&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"10px",color:"var(--text-secondary)",fontSize:"0.875rem",fontWeight:"500"},children:"Quick Filters"}),e.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:v.map(function(w){return e.jsx("button",{onClick:()=>c(w.value),disabled:r,className:n===w.value?"btn btn-primary":"btn btn-secondary",style:{padding:"8px 14px",fontSize:"0.8125rem",opacity:n===w.value?1:.7},children:w.label},w.value)})})]}),e.jsxs("div",{style:{marginBottom:"20px",padding:"16px",background:"rgba(255,255,255,0.03)",borderRadius:"12px",border:"1px solid var(--border-color)"},children:[e.jsx("label",{style:{display:"block",marginBottom:"12px",color:"var(--text-secondary)",fontSize:"0.875rem",fontWeight:"500"},children:"Custom Date Range"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"0.75rem",color:"var(--text-muted)"},children:"Start Date"}),e.jsx("input",{type:"date",value:a,onChange:w=>l(w.target.value),style:{width:"100%",padding:"8px 10px",background:"var(--bg-primary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"0.8125rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"0.75rem",color:"var(--text-muted)"},children:"End Date"}),e.jsx("input",{type:"date",value:o,onChange:w=>u(w.target.value),style:{width:"100%",padding:"8px 10px",background:"var(--bg-primary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"0.8125rem"}})]}),e.jsx("button",{onClick:()=>c("custom"),disabled:r||!a||!o,className:"btn btn-primary",style:{padding:"8px 14px",fontSize:"0.8125rem",gridColumn:"span 2"},children:"Apply Custom Range"})]})]})]}),i&&e.jsxs("div",{style:{marginBottom:"20px",padding:"12px 16px",background:"rgba(139, 92, 246, 0.1)",borderRadius:"10px",border:"1px solid rgba(139, 92, 246, 0.3)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)",display:"block"},children:"Filtered by date:"}),e.jsx("span",{style:{fontSize:"0.9375rem",color:"#8b5cf6",fontWeight:"600"},children:b(i)})]}),e.jsx("button",{onClick:()=>d(null),className:"btn btn-secondary",style:{fontSize:"0.8125rem",padding:"6px 12px"},children:"Clear Filter"})]}),r&&e.jsxs("div",{style:{textAlign:"center",padding:"40px"},children:[e.jsx("div",{className:"spinner",style:{margin:"0 auto 16px"}}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:"Loading usage data..."})]}),!r&&t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"12px",marginBottom:"24px"},children:[e.jsx("style",{children:`
                    @media (max-width: 768px) {
                      .total-bandwidth-card {
                        grid-column: span 2 !important;
                      }
                    }
                  `}),e.jsxs("div",{style:{padding:"14px",background:"linear-gradient(135deg, rgba(34, 197, 94, 0.1) 0%, rgba(22, 163, 74, 0.05) 100%)",borderRadius:"12px",border:"1px solid rgba(34, 197, 94, 0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#22c55e",strokeWidth:"2",style:{width:"16px",height:"16px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),e.jsx("span",{style:{fontSize:"0.8125rem",color:"var(--text-muted)"},children:"Download"})]}),e.jsx("p",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#22c55e",margin:0},children:f(x.download)})]}),e.jsxs("div",{style:{padding:"14px",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(37, 99, 235, 0.05) 100%)",borderRadius:"12px",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#3b82f6",strokeWidth:"2",style:{width:"16px",height:"16px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 10l7-7m0 0l7 7m-7-7v18"})}),e.jsx("span",{style:{fontSize:"0.8125rem",color:"var(--text-muted)"},children:"Upload"})]}),e.jsx("p",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#3b82f6",margin:0},children:f(x.upload)})]}),e.jsxs("div",{className:"total-bandwidth-card",style:{padding:"14px",background:"linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(124, 58, 237, 0.05) 100%)",borderRadius:"12px",border:"1px solid rgba(139, 92, 246, 0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#8b5cf6",strokeWidth:"2",style:{width:"16px",height:"16px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),e.jsx("span",{style:{fontSize:"0.8125rem",color:"var(--text-muted)"},children:"Total"})]}),e.jsx("p",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#8b5cf6",margin:0},children:f(x.total)})]})]}),s&&s.length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h4",{style:{marginBottom:"16px",color:"var(--text-secondary)",fontSize:"0.9375rem",fontWeight:"600"},children:"Daily Usage Breakdown"}),e.jsx(Nl,{data:s,formatBytes:f,formatDate:g,onBarClick:d,selectedDate:i})]}),!1,(!s||s.length===0)&&e.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"var(--text-muted)"},children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"48px",height:"48px",margin:"0 auto 16px",opacity:.5},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),e.jsx("p",{style:{fontSize:"0.875rem"},children:"No usage data available for the selected period"})]})]}),!r&&i&&k&&!1]}),e.jsx("div",{className:"modal-footer",style:{borderTop:"1px solid var(--border-color)",padding:"12px 20px",borderBottomLeftRadius:"16px",borderBottomRightRadius:"16px"},children:e.jsx("button",{onClick:p,className:"btn btn-secondary",style:{fontSize:"0.875rem"},children:"Close"})})]})})}function Nl({data:t,formatBytes:r,formatDate:n,onBarClick:a,selectedDate:o}){if(!t||t.length===0)return null;var s=Math.max(...t.map(b=>b.total));s===0&&(s=1e9);for(var i=280,c={left:70,bottom:50,top:20,right:20},l=i-c.top-c.bottom,u=32,d=6,p=t.length*u+(t.length-1)*d,h=p+c.left+c.right,f=function(b){var S=new Date(b+"T00:00:00"),k=S.getDate(),w=S.toLocaleDateString("en-US",{month:"short"});return k===1?String(k).padStart(2,"0")+" "+w:String(k).padStart(2,"0")},x=function(b){var S=b/1e9;return S.toFixed(1)+" GB"},v=[],g=0;g<=4;g++)v.push(s/4*g);return e.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",borderRadius:"12px",border:"1px solid var(--border-color)",padding:"20px",overflowX:"auto"},children:[e.jsxs("div",{style:{minWidth:`${h}px`,width:"100%",height:`${i}px`,position:"relative"},children:[e.jsx("div",{style:{position:"absolute",left:"0",top:`${c.top}px`,width:`${c.left}px`,height:`${l}px`,display:"flex",flexDirection:"column",justifyContent:"space-between",paddingRight:"10px"},children:v.slice().reverse().map(function(b,S){return e.jsx("div",{style:{fontSize:"0.6875rem",color:"var(--text-muted)",textAlign:"right",lineHeight:"1",transform:"translateY(-50%)"},children:x(b)},S)})}),e.jsxs("div",{style:{position:"absolute",left:`${c.left}px`,top:`${c.top}px`,right:`${c.right}px`,bottom:`${c.bottom}px`,height:`${l}px`},children:[e.jsx("div",{style:{position:"absolute",inset:0},children:v.slice().reverse().map(function(b,S){return e.jsx("div",{style:{position:"absolute",top:`${S/4*100}%`,left:"0",right:"0",height:"1px",background:"rgba(255,255,255,0.05)",transform:"translateY(-0.5px)"}},S)})}),e.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"flex-end",gap:`${d}px`},children:t.map(function(b,S){var k=s>0?b.total/s*100:0;b.total>0&&k<2&&(k=2);var w=o===b.date,C=S<t.length/2,E=C?"right":"left";return e.jsxs("div",{onClick:()=>a(w?null:b.date),style:{width:`${u}px`,height:`${k}%`,background:w?"linear-gradient(180deg, #7c3aed 0%, #6d28d9 100%)":"linear-gradient(180deg, #8b5cf6 0%, #7c3aed 100%)",borderRadius:"4px 4px 0 0",cursor:"pointer",transition:"all 0.2s ease",position:"relative",flexShrink:0,border:w?"2px solid #a78bfa":"none",boxShadow:w?"0 0 8px rgba(139, 92, 246, 0.4)":"none",transform:w?"scale(1.05)":"scale(1)",zIndex:1},onMouseEnter:y=>{w||(y.currentTarget.style.background="linear-gradient(180deg, #a78bfa 0%, #8b5cf6 100%)",y.currentTarget.style.transform="translateY(-4px)"),y.currentTarget.style.zIndex="200";var R=y.currentTarget.querySelector(".bar-tooltip");R&&(R.style.opacity="1")},onMouseLeave:y=>{w||(y.currentTarget.style.background="linear-gradient(180deg, #8b5cf6 0%, #7c3aed 100%)",y.currentTarget.style.transform="translateY(0)"),y.currentTarget.style.zIndex="1";var R=y.currentTarget.querySelector(".bar-tooltip");R&&(R.style.opacity="0")},children:[e.jsxs("div",{className:"bar-tooltip",style:{position:"absolute",top:"20%",left:E==="right"?"100%":"auto",right:E==="left"?"100%":"auto",transform:E==="right"?"translateX(12px)":"translateX(-12px)",background:"var(--bg-secondary)",border:"2px solid rgba(139, 92, 246, 0.6)",borderRadius:"10px",padding:"10px 12px",whiteSpace:"nowrap",fontSize:"0.75rem",opacity:"0",pointerEvents:"none",transition:"opacity 0.2s ease",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.3), 0 0 20px rgba(139, 92, 246, 0.2)",zIndex:300,backdropFilter:"blur(12px)",minWidth:"160px",maxWidth:"200px"},children:[e.jsx("style",{children:`
                        @media (max-width: 768px) {
                          .bar-tooltip {
                            min-width: 120px !important;
                            max-width: 140px !important;
                            font-size: 0.625rem !important;
                            padding: 6px 8px !important;
                            transform: translateX(8px) !important;
                          }
                        }
                      `}),e.jsx("div",{style:{color:"#a78bfa",fontWeight:"700",marginBottom:"6px",fontSize:"0.8125rem",textAlign:"center"},children:n(b.date)}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"5px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#22c55e",strokeWidth:"2.5",style:{width:"12px",height:"12px",flexShrink:0},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),e.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.6875rem"},children:"Down"})]}),e.jsx("span",{style:{color:"#22c55e",fontWeight:"700",fontSize:"0.75rem"},children:r(b.download)})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#3b82f6",strokeWidth:"2.5",style:{width:"12px",height:"12px",flexShrink:0},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 10l7-7m0 0l7 7m-7-7v18"})}),e.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.6875rem"},children:"Up"})]}),e.jsx("span",{style:{color:"#3b82f6",fontWeight:"700",fontSize:"0.75rem"},children:r(b.upload)})]}),e.jsxs("div",{style:{borderTop:"2px solid rgba(139, 92, 246, 0.4)",marginTop:"2px",paddingTop:"6px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"var(--text-primary)",fontSize:"0.75rem",fontWeight:"600"},children:"Total"}),e.jsx("span",{style:{color:"#8b5cf6",fontWeight:"700",fontSize:"0.8125rem"},children:r(b.total)})]})]}),e.jsx("style",{children:`
                        @media (max-width: 768px) {
                          .bar-tooltip > div:first-child {
                            font-size: 0.6875rem !important;
                            margin-bottom: 4px !important;
                          }
                          .bar-tooltip svg {
                            width: 10px !important;
                            height: 10px !important;
                          }
                          .bar-tooltip span {
                            font-size: 0.5625rem !important;
                          }
                        }
                      `}),E==="right"&&e.jsx("div",{className:"tooltip-arrow-right",style:{position:"absolute",left:"-8px",top:"50%",transform:"translateY(-50%)",width:"0",height:"0",borderTop:"8px solid transparent",borderBottom:"8px solid transparent",borderRight:"8px solid var(--bg-secondary)"}}),E==="left"&&e.jsx("div",{className:"tooltip-arrow-left",style:{position:"absolute",right:"-8px",top:"50%",transform:"translateY(-50%)",width:"0",height:"0",borderTop:"8px solid transparent",borderBottom:"8px solid transparent",borderLeft:"8px solid var(--bg-secondary)"}})]}),e.jsx("div",{style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",paddingTop:"8px",fontSize:"0.6875rem",color:w?"#a78bfa":"var(--text-muted)",fontWeight:w?"700":"normal",whiteSpace:"nowrap",textAlign:"center"},children:f(b.date)})]},S)})})]})]}),e.jsx("div",{style:{marginTop:"10px",textAlign:"center",fontSize:"0.75rem",color:"var(--text-muted)"},children:"Click on any bar to filter usage data by date"})]})}var or={},bn={exports:{}},Rl="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",El=Rl,Pl=El;function jn(){}function Sn(){}Sn.resetWarningCache=jn;var Tl=function(){function t(a,o,s,i,c,l){if(l!==Pl){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function r(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:r,element:t,elementType:t,instanceOf:r,node:t,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:Sn,resetWarningCache:jn};return n.PropTypes=n,n};bn.exports=Tl();var wn=bn.exports,kn={L:1,M:0,Q:3,H:2},Cn={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},Al=Cn;function Nn(t){this.mode=Al.MODE_8BIT_BYTE,this.data=t}Nn.prototype={getLength:function(t){return this.data.length},write:function(t){for(var r=0;r<this.data.length;r++)t.put(this.data.charCodeAt(r),8)}};var Hl=Nn,It=kn;function ke(t,r){this.totalCount=t,this.dataCount=r}ke.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];ke.getRSBlocks=function(t,r){var n=ke.getRsBlockTable(t,r);if(n==null)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+r);for(var a=n.length/3,o=new Array,s=0;s<a;s++)for(var i=n[s*3+0],c=n[s*3+1],l=n[s*3+2],u=0;u<i;u++)o.push(new ke(c,l));return o};ke.getRsBlockTable=function(t,r){switch(r){case It.L:return ke.RS_BLOCK_TABLE[(t-1)*4+0];case It.M:return ke.RS_BLOCK_TABLE[(t-1)*4+1];case It.Q:return ke.RS_BLOCK_TABLE[(t-1)*4+2];case It.H:return ke.RS_BLOCK_TABLE[(t-1)*4+3];default:return}};var Ml=ke;function Rn(){this.buffer=new Array,this.length=0}Rn.prototype={get:function(t){var r=Math.floor(t/8);return(this.buffer[r]>>>7-t%8&1)==1},put:function(t,r){for(var n=0;n<r;n++)this.putBit((t>>>r-n-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(t){var r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),t&&(this.buffer[r]|=128>>>this.length%8),this.length++}};var Ll=Rn,ye={glog:function(t){if(t<1)throw new Error("glog("+t+")");return ye.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return ye.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var oe=0;oe<8;oe++)ye.EXP_TABLE[oe]=1<<oe;for(var oe=8;oe<256;oe++)ye.EXP_TABLE[oe]=ye.EXP_TABLE[oe-4]^ye.EXP_TABLE[oe-5]^ye.EXP_TABLE[oe-6]^ye.EXP_TABLE[oe-8];for(var oe=0;oe<255;oe++)ye.LOG_TABLE[ye.EXP_TABLE[oe]]=oe;var En=ye,Ge=En;function $t(t,r){if(t.length==null)throw new Error(t.length+"/"+r);for(var n=0;n<t.length&&t[n]==0;)n++;this.num=new Array(t.length-n+r);for(var a=0;a<t.length-n;a++)this.num[a]=t[a+n]}$t.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var r=new Array(this.getLength()+t.getLength()-1),n=0;n<this.getLength();n++)for(var a=0;a<t.getLength();a++)r[n+a]^=Ge.gexp(Ge.glog(this.get(n))+Ge.glog(t.get(a)));return new $t(r,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var r=Ge.glog(this.get(0))-Ge.glog(t.get(0)),n=new Array(this.getLength()),a=0;a<this.getLength();a++)n[a]=this.get(a);for(var a=0;a<t.getLength();a++)n[a]^=Ge.gexp(Ge.glog(t.get(a))+r);return new $t(n,0).mod(t)}};var Pn=$t,ge=Cn,ys=Pn,Bl=En,Be={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},ae={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var r=t<<10;ae.getBCHDigit(r)-ae.getBCHDigit(ae.G15)>=0;)r^=ae.G15<<ae.getBCHDigit(r)-ae.getBCHDigit(ae.G15);return(t<<10|r)^ae.G15_MASK},getBCHTypeNumber:function(t){for(var r=t<<12;ae.getBCHDigit(r)-ae.getBCHDigit(ae.G18)>=0;)r^=ae.G18<<ae.getBCHDigit(r)-ae.getBCHDigit(ae.G18);return t<<12|r},getBCHDigit:function(t){for(var r=0;t!=0;)r++,t>>>=1;return r},getPatternPosition:function(t){return ae.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,r,n){switch(t){case Be.PATTERN000:return(r+n)%2==0;case Be.PATTERN001:return r%2==0;case Be.PATTERN010:return n%3==0;case Be.PATTERN011:return(r+n)%3==0;case Be.PATTERN100:return(Math.floor(r/2)+Math.floor(n/3))%2==0;case Be.PATTERN101:return r*n%2+r*n%3==0;case Be.PATTERN110:return(r*n%2+r*n%3)%2==0;case Be.PATTERN111:return(r*n%3+(r+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var r=new ys([1],0),n=0;n<t;n++)r=r.multiply(new ys([1,Bl.gexp(n)],0));return r},getLengthInBits:function(t,r){if(1<=r&&r<10)switch(t){case ge.MODE_NUMBER:return 10;case ge.MODE_ALPHA_NUM:return 9;case ge.MODE_8BIT_BYTE:return 8;case ge.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(r<27)switch(t){case ge.MODE_NUMBER:return 12;case ge.MODE_ALPHA_NUM:return 11;case ge.MODE_8BIT_BYTE:return 16;case ge.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else if(r<41)switch(t){case ge.MODE_NUMBER:return 14;case ge.MODE_ALPHA_NUM:return 13;case ge.MODE_8BIT_BYTE:return 16;case ge.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}else throw new Error("type:"+r)},getLostPoint:function(t){for(var r=t.getModuleCount(),n=0,a=0;a<r;a++)for(var o=0;o<r;o++){for(var s=0,i=t.isDark(a,o),c=-1;c<=1;c++)if(!(a+c<0||r<=a+c))for(var l=-1;l<=1;l++)o+l<0||r<=o+l||c==0&&l==0||i==t.isDark(a+c,o+l)&&s++;s>5&&(n+=3+s-5)}for(var a=0;a<r-1;a++)for(var o=0;o<r-1;o++){var u=0;t.isDark(a,o)&&u++,t.isDark(a+1,o)&&u++,t.isDark(a,o+1)&&u++,t.isDark(a+1,o+1)&&u++,(u==0||u==4)&&(n+=3)}for(var a=0;a<r;a++)for(var o=0;o<r-6;o++)t.isDark(a,o)&&!t.isDark(a,o+1)&&t.isDark(a,o+2)&&t.isDark(a,o+3)&&t.isDark(a,o+4)&&!t.isDark(a,o+5)&&t.isDark(a,o+6)&&(n+=40);for(var o=0;o<r;o++)for(var a=0;a<r-6;a++)t.isDark(a,o)&&!t.isDark(a+1,o)&&t.isDark(a+2,o)&&t.isDark(a+3,o)&&t.isDark(a+4,o)&&!t.isDark(a+5,o)&&t.isDark(a+6,o)&&(n+=40);for(var d=0,o=0;o<r;o++)for(var a=0;a<r;a++)t.isDark(a,o)&&d++;var p=Math.abs(100*d/r/r-50)/5;return n+=p*10,n}},Il=ae,_l=Hl,Tn=Ml,An=Ll,Ke=Il,zl=Pn;function Ne(t,r){this.typeNumber=t,this.errorCorrectLevel=r,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var xe=Ne.prototype;xe.addData=function(t){var r=new _l(t);this.dataList.push(r),this.dataCache=null};xe.isDark=function(t,r){if(t<0||this.moduleCount<=t||r<0||this.moduleCount<=r)throw new Error(t+","+r);return this.modules[t][r]};xe.getModuleCount=function(){return this.moduleCount};xe.make=function(){if(this.typeNumber<1){var t=1;for(t=1;t<40;t++){for(var r=Tn.getRSBlocks(t,this.errorCorrectLevel),n=new An,a=0,o=0;o<r.length;o++)a+=r[o].dataCount;for(var o=0;o<this.dataList.length;o++){var s=this.dataList[o];n.put(s.mode,4),n.put(s.getLength(),Ke.getLengthInBits(s.mode,t)),s.write(n)}if(n.getLengthInBits()<=a*8)break}this.typeNumber=t}this.makeImpl(!1,this.getBestMaskPattern())};xe.makeImpl=function(t,r){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++)this.modules[n][a]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,r),this.typeNumber>=7&&this.setupTypeNumber(t),this.dataCache==null&&(this.dataCache=Ne.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,r)};xe.setupPositionProbePattern=function(t,r){for(var n=-1;n<=7;n++)if(!(t+n<=-1||this.moduleCount<=t+n))for(var a=-1;a<=7;a++)r+a<=-1||this.moduleCount<=r+a||(0<=n&&n<=6&&(a==0||a==6)||0<=a&&a<=6&&(n==0||n==6)||2<=n&&n<=4&&2<=a&&a<=4?this.modules[t+n][r+a]=!0:this.modules[t+n][r+a]=!1)};xe.getBestMaskPattern=function(){for(var t=0,r=0,n=0;n<8;n++){this.makeImpl(!0,n);var a=Ke.getLostPoint(this);(n==0||t>a)&&(t=a,r=n)}return r};xe.createMovieClip=function(t,r,n){var a=t.createEmptyMovieClip(r,n),o=1;this.make();for(var s=0;s<this.modules.length;s++)for(var i=s*o,c=0;c<this.modules[s].length;c++){var l=c*o,u=this.modules[s][c];u&&(a.beginFill(0,100),a.moveTo(l,i),a.lineTo(l+o,i),a.lineTo(l+o,i+o),a.lineTo(l,i+o),a.endFill())}return a};xe.setupTimingPattern=function(){for(var t=8;t<this.moduleCount-8;t++)this.modules[t][6]==null&&(this.modules[t][6]=t%2==0);for(var r=8;r<this.moduleCount-8;r++)this.modules[6][r]==null&&(this.modules[6][r]=r%2==0)};xe.setupPositionAdjustPattern=function(){for(var t=Ke.getPatternPosition(this.typeNumber),r=0;r<t.length;r++)for(var n=0;n<t.length;n++){var a=t[r],o=t[n];if(this.modules[a][o]==null)for(var s=-2;s<=2;s++)for(var i=-2;i<=2;i++)s==-2||s==2||i==-2||i==2||s==0&&i==0?this.modules[a+s][o+i]=!0:this.modules[a+s][o+i]=!1}};xe.setupTypeNumber=function(t){for(var r=Ke.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var a=!t&&(r>>n&1)==1;this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=a}for(var n=0;n<18;n++){var a=!t&&(r>>n&1)==1;this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=a}};xe.setupTypeInfo=function(t,r){for(var n=this.errorCorrectLevel<<3|r,a=Ke.getBCHTypeInfo(n),o=0;o<15;o++){var s=!t&&(a>>o&1)==1;o<6?this.modules[o][8]=s:o<8?this.modules[o+1][8]=s:this.modules[this.moduleCount-15+o][8]=s}for(var o=0;o<15;o++){var s=!t&&(a>>o&1)==1;o<8?this.modules[8][this.moduleCount-o-1]=s:o<9?this.modules[8][15-o-1+1]=s:this.modules[8][15-o-1]=s}this.modules[this.moduleCount-8][8]=!t};xe.mapData=function(t,r){for(var n=-1,a=this.moduleCount-1,o=7,s=0,i=this.moduleCount-1;i>0;i-=2)for(i==6&&i--;;){for(var c=0;c<2;c++)if(this.modules[a][i-c]==null){var l=!1;s<t.length&&(l=(t[s]>>>o&1)==1);var u=Ke.getMask(r,a,i-c);u&&(l=!l),this.modules[a][i-c]=l,o--,o==-1&&(s++,o=7)}if(a+=n,a<0||this.moduleCount<=a){a-=n,n=-n;break}}};Ne.PAD0=236;Ne.PAD1=17;Ne.createData=function(t,r,n){for(var a=Tn.getRSBlocks(t,r),o=new An,s=0;s<n.length;s++){var i=n[s];o.put(i.mode,4),o.put(i.getLength(),Ke.getLengthInBits(i.mode,t)),i.write(o)}for(var c=0,s=0;s<a.length;s++)c+=a[s].dataCount;if(o.getLengthInBits()>c*8)throw new Error("code length overflow. ("+o.getLengthInBits()+">"+c*8+")");for(o.getLengthInBits()+4<=c*8&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=c*8||(o.put(Ne.PAD0,8),o.getLengthInBits()>=c*8));)o.put(Ne.PAD1,8);return Ne.createBytes(o,a)};Ne.createBytes=function(t,r){for(var n=0,a=0,o=0,s=new Array(r.length),i=new Array(r.length),c=0;c<r.length;c++){var l=r[c].dataCount,u=r[c].totalCount-l;a=Math.max(a,l),o=Math.max(o,u),s[c]=new Array(l);for(var d=0;d<s[c].length;d++)s[c][d]=255&t.buffer[d+n];n+=l;var p=Ke.getErrorCorrectPolynomial(u),h=new zl(s[c],p.getLength()-1),f=h.mod(p);i[c]=new Array(p.getLength()-1);for(var d=0;d<i[c].length;d++){var x=d+f.getLength()-i[c].length;i[c][d]=x>=0?f.get(x):0}}for(var v=0,d=0;d<r.length;d++)v+=r[d].totalCount;for(var g=new Array(v),b=0,d=0;d<a;d++)for(var c=0;c<r.length;c++)d<s[c].length&&(g[b++]=s[c][d]);for(var d=0;d<o;d++)for(var c=0;c<r.length;c++)d<i[c].length&&(g[b++]=i[c][d]);return g};var Ol=Ne,Wr={};Object.defineProperty(Wr,"__esModule",{value:!0});var Ul=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Wl=wn,ve=Mn(Wl),Hn=m,_t=Mn(Hn);function Mn(t){return t&&t.__esModule?t:{default:t}}function Fl(t,r){var n={};for(var a in t)r.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a]);return n}var $l={bgColor:ve.default.oneOfType([ve.default.object,ve.default.string]).isRequired,bgD:ve.default.string.isRequired,fgColor:ve.default.oneOfType([ve.default.object,ve.default.string]).isRequired,fgD:ve.default.string.isRequired,size:ve.default.number.isRequired,title:ve.default.string,viewBoxSize:ve.default.number.isRequired,xmlns:ve.default.string},Fr=(0,Hn.forwardRef)(function(t,r){var n=t.bgColor,a=t.bgD,o=t.fgD,s=t.fgColor,i=t.size,c=t.title,l=t.viewBoxSize,u=t.xmlns,d=u===void 0?"http://www.w3.org/2000/svg":u,p=Fl(t,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return _t.default.createElement("svg",Ul({},p,{height:i,ref:r,viewBox:"0 0 "+l+" "+l,width:i,xmlns:d}),c?_t.default.createElement("title",null,c):null,_t.default.createElement("path",{d:a,fill:n}),_t.default.createElement("path",{d:o,fill:s}))});Fr.displayName="QRCodeSvg";Fr.propTypes=$l;Wr.default=Fr;Object.defineProperty(or,"__esModule",{value:!0});or.QRCode=void 0;var Vl=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Kl=wn,Pe=Pt(Kl),Dl=kn,Xl=Pt(Dl),ql=Ol,Gl=Pt(ql),Ln=m,Yl=Pt(Ln),Jl=Wr,Ql=Pt(Jl);function Pt(t){return t&&t.__esModule?t:{default:t}}function Zl(t,r){var n={};for(var a in t)r.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a]);return n}var ec={bgColor:Pe.default.oneOfType([Pe.default.object,Pe.default.string]),fgColor:Pe.default.oneOfType([Pe.default.object,Pe.default.string]),level:Pe.default.string,size:Pe.default.number,value:Pe.default.string.isRequired},ir=(0,Ln.forwardRef)(function(t,r){var n=t.bgColor,a=n===void 0?"#FFFFFF":n,o=t.fgColor,s=o===void 0?"#000000":o,i=t.level,c=i===void 0?"L":i,l=t.size,u=l===void 0?256:l,d=t.value,p=Zl(t,["bgColor","fgColor","level","size","value"]),h=new Gl.default(-1,Xl.default[c]);h.addData(d),h.make();var f=h.modules;return Yl.default.createElement(Ql.default,Vl({},p,{bgColor:a,bgD:f.map(function(x,v){return x.map(function(g,b){return g?"":"M "+b+" "+v+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:s,fgD:f.map(function(x,v){return x.map(function(g,b){return g?"M "+b+" "+v+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:r,size:u,viewBoxSize:f.length}))});or.QRCode=ir;ir.displayName="QRCode";ir.propTypes=ec;var bs=or.default=ir;function tc(){const{activeConfig:t}=Ve(),r=We(),[n,a]=m.useState([]),[o,s]=m.useState([]),[i,c]=m.useState(0),[l,u]=m.useState(!0),[d,p]=m.useState(window.innerWidth<768),[h,f]=m.useState(""),[x,v]=m.useState(""),[g,b]=m.useState("newest"),[S,k]=m.useState(0),w=20,[C,E]=m.useState(!1),[y,R]=m.useState(!1),[P,T]=m.useState(!1),[I,_]=m.useState(!1),[A,F]=m.useState(null),[V,U]=m.useState(null),[O,K]=m.useState(null),X=m.useRef(null);m.useEffect(()=>{const N=()=>p(window.innerWidth<768);return window.addEventListener("resize",N),()=>window.removeEventListener("resize",N)},[]),m.useEffect(function(){t?(q(),ne()):u(!1)},[t,x]),m.useEffect(function(){return X.current&&clearTimeout(X.current),X.current=setTimeout(function(){t&&(k(0),q())},500),function(){X.current&&clearTimeout(X.current)}},[h]),m.useEffect(function(){if(!n.length){s([]);return}let N=[...n].sort(function(Xe,B){var $=Xe.created_at?new Date(Xe.created_at).getTime():0,ee=B.created_at?new Date(B.created_at).getTime():0;return g==="newest"?ee-$:$-ee});const W=S*w,Z=W+w,ue=N.slice(W,Z);s(ue)},[n,S,g]);var q=async function(){try{u(!0);var N={offset:0,limit:1e4};x&&(N.status=x),h&&(N.search=h);var W=await Oe.getUsers(t.id,N);W.data&&W.data.users?(a(W.data.users),c(W.data.users.length)):(a([]),c(0))}catch(Z){console.error("Failed to load users:",Z),M.error("Failed to load users"),a([]),c(0)}finally{u(!1)}},ne=async function(){try{try{var N=await se.getCoreConfig(t.id);if(N.data&&N.data.inbounds&&N.data.inbounds.length>0){K(N.data);return}}catch{console.log("Core config failed")}var W=await se.getInbounds(t.id);if(W.data){var Z={inbounds:[]};Object.keys(W.data).forEach(function(ue){var Xe=W.data[ue];Array.isArray(Xe)&&Xe.forEach(function(B){Z.inbounds.push({protocol:ue,tag:B})})}),K(Z)}}catch(ue){console.error("Failed to load inbounds:",ue)}},ce=function(N,W,Z){F({title:N,message:W,onConfirm:Z}),T(!0)},je=function(){A&&A.onConfirm&&A.onConfirm(),T(!1),F(null)},me=function(N){ce("Delete User",'Are you sure you want to delete "'+N+'"?',async function(){try{await Oe.deleteUser(t.id,N),M.success("User deleted"),q()}catch{M.error("Failed to delete user")}})},H=function(N){ce("Reset Traffic",'Reset traffic for "'+N+'"?',async function(){try{await Oe.resetTraffic(t.id,N),M.success("Traffic reset"),q()}catch{M.error("Failed to reset traffic")}})},L=function(N){var W=N.status==="active"?"disabled":"active",Z=W==="active"?"Enable":"Disable";ce(Z+" User",Z+' user "'+N.username+'"?',async function(){try{await Oe.updateUser(t.id,N.username,{status:W}),M.success("User "+(W==="active"?"enabled":"disabled")),q()}catch{M.error("Failed to update status")}})},ie=function(N){U(N),R(!0)},fe=function(N){if((!N.links||N.links.length===0)&&!N.subscription_url){M.error("No links or subscription available");return}U(N),_(!0)},De=function(N){if(!N||N===0)return"0 B";var W=1024,Z=["B","KB","MB","GB","TB"],ue=Math.floor(Math.log(N)/Math.log(W));return parseFloat((N/Math.pow(W,ue)).toFixed(2))+" "+Z[ue]},Tt=function(N){return!N||N===0?"Never":new Date(N*1e3).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},vt=function(N){return N?new Date(N).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-"},At=function(N){var W={active:{background:"rgba(34, 197, 94, 0.15)",color:"#22c55e",border:"1px solid rgba(34, 197, 94, 0.3)"},disabled:{background:"rgba(100, 116, 139, 0.15)",color:"#94a3b8",border:"1px solid rgba(100, 116, 139, 0.3)"},limited:{background:"rgba(245, 158, 11, 0.15)",color:"#f59e0b",border:"1px solid rgba(245, 158, 11, 0.3)"},expired:{background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)"},on_hold:{background:"rgba(59, 130, 246, 0.15)",color:"#3b82f6",border:"1px solid rgba(59, 130, 246, 0.3)"}};return W[N]||W.disabled},yt=Math.ceil(i/w);return t?e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",flexWrap:"wrap",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:"700",color:"var(--text-primary)",margin:0},children:"Users"}),e.jsxs("p",{style:{color:"var(--text-muted)",marginTop:"4px"},children:["Total:  ",i," users"]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("button",{onClick:q,disabled:l,className:"btn",title:"Refresh List",style:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f59e0b",color:"white",border:"none",padding:"0 12px",borderRadius:"0.5rem",cursor:"pointer",transition:"opacity 0.2s",opacity:l?.7:1},onMouseOver:N=>N.currentTarget.style.opacity="0.9",onMouseOut:N=>N.currentTarget.style.opacity="1",children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",style:{width:"20px",height:"20px",animation:l?"spin 1s linear infinite":"none"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m-15.357-2A8.001 8.001 0 0019.419 15m0 0H15"})}),"Refresh"]}),e.jsxs("button",{onClick:function(){E(!0)},className:"btn btn-primary",children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"20px",height:"20px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),e.jsx("span",{children:"Create User"})]})]})]}),e.jsx("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"20px",marginBottom:"24px"},children:e.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsxs("div",{style:{position:"relative",flex:"1",minWidth:"200px"},children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",width:"20px",height:"20px",color:"var(--text-muted)"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",value:h,onChange:function(N){f(N.target.value)},placeholder:"Search...",className:"form-input",style:{paddingLeft:"44px",paddingRight:"40px",width:"100%"}}),h&&e.jsx("button",{onClick:()=>f(""),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer",color:"var(--text-muted)",display:"flex",alignItems:"center",justifyContent:"center",padding:"4px",borderRadius:"50%"},title:"Clear search",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"16px",height:"16px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("select",{value:x,onChange:function(N){v(N.target.value),k(0)},className:"form-input",style:{width:"auto",minWidth:"130px"},children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"disabled",children:"Disabled"}),e.jsx("option",{value:"limited",children:"Limited"}),e.jsx("option",{value:"expired",children:"Expired"}),e.jsx("option",{value:"on_hold",children:"On Hold"})]}),e.jsxs("select",{value:g,onChange:function(N){b(N.target.value),k(0)},className:"form-input",style:{width:"auto",minWidth:"130px"},children:[e.jsx("option",{value:"newest",children:"Newest First"}),e.jsx("option",{value:"oldest",children:"Oldest First"})]}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:function(){f(""),v(""),b("newest"),k(0)},children:"Reset"})]})}),e.jsxs("div",{style:{background:d?"transparent":"var(--bg-card)",border:d?"none":"1px solid var(--border-color)",borderRadius:"16px",overflow:"hidden"},children:[l?e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{className:"loading-text",children:"Loading users... "})]}):o.length===0?e.jsx("div",{style:{padding:"48px",textAlign:"center"},children:e.jsx("p",{style:{color:"var(--text-muted)"},children:"No users found"})}):d?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:o.map(function(N){var W=N.data_limit?Math.min(N.used_traffic/N.data_limit*100,100):0,Z=At(N.status);return e.jsxs("div",{className:"table-body",style:{border:"1px solid var(--border-color)",borderRadius:"16px",padding:"16px",boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontWeight:"700",color:"var(--text-primary)",margin:0,fontSize:"1.1rem"},children:N.username}),N.note&&e.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-muted)",margin:"4px 0 0 0"},children:N.note})]}),e.jsx("span",{style:{padding:"4px 10px",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"600",textTransform:"uppercase",...Z},children:N.status})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",borderRadius:"12px",padding:"12px",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:"Data Usage"}),e.jsxs("span",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"600"},children:[De(N.used_traffic)," / ",N.data_limit?De(N.data_limit):""]})]}),N.data_limit>0&&e.jsx("div",{style:{width:"100%",height:"6px",background:"var(--border-color)",borderRadius:"3px"},children:e.jsx("div",{style:{width:W+"%",height:"100%",borderRadius:"3px",background:W>90?"#ef4444":W>70?"#f59e0b":"#22c55e"}})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"8px"},children:[e.jsx("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Expires:"}),e.jsx("span",{style:{fontSize:"0.8rem",color:"var(--text-primary)"},children:Tt(N.expire)})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",borderTop:"1px solid var(--border-color)",paddingTop:"12px"},children:[e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:vt(N.created_at)}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx(we,{onClick:function(){fe(N)},title:"Links",color:"#8b5cf6",icon:"qr"}),e.jsx(we,{onClick:function(){L(N)},title:N.status==="active"?"Disable":"Enable",color:N.status==="active"?"#f59e0b":"#22c55e",icon:N.status==="active"?"pause":"play"}),e.jsx(we,{onClick:function(){H(N.username)},title:"Reset",color:"#f97316",icon:"reset"}),e.jsx(we,{onClick:function(){ie(N)},title:"Edit",color:"#3b82f6",icon:"edit"}),e.jsx(we,{onClick:function(){me(N.username)},title:"Delete",color:"#ef4444",icon:"delete"})]})]})]},N.username)})}):e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"rgba(4, 4, 4, 0.48)"},children:[e.jsx("th",{style:{padding:"16px 20px",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"var(--text-muted)",borderBottom:"1px solid var(--border-color)"},children:"Username"}),e.jsx("th",{style:{padding:"16px 20px",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"var(--text-muted)",borderBottom:"1px solid var(--border-color)"},children:"Status"}),e.jsx("th",{style:{padding:"16px 20px",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"var(--text-muted)",borderBottom:"1px solid var(--border-color)"},children:"Used / Limit"}),e.jsx("th",{style:{padding:"16px 20px",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"var(--text-muted)",borderBottom:"1px solid var(--border-color)"},children:"Expires"}),e.jsx("th",{style:{padding:"16px 20px",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"var(--text-muted)",borderBottom:"1px solid var(--border-color)"},children:"Created"}),e.jsx("th",{style:{padding:"16px 20px",textAlign:"right",fontSize:"0.875rem",fontWeight:"600",color:"var(--text-muted)",borderBottom:"1px solid var(--border-color)"},children:"Actions"})]})}),e.jsx("tbody",{className:"table-body",children:o.map(function(N){var W=N.data_limit?Math.min(N.used_traffic/N.data_limit*100,100):0,Z=At(N.status);return e.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[e.jsxs("td",{style:{padding:"16px 20px"},children:[e.jsx("p",{style:{fontWeight:"600",color:"var(--text-primary)",margin:0},children:N.username}),N.note&&e.jsx("p",{style:{fontSize:"0.8125rem",color:"var(--text-muted)",margin:"4px 0 0 0"},children:N.note})]}),e.jsx("td",{style:{padding:"16px 20px"},children:e.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"9999px",fontSize:"0.8125rem",fontWeight:"600",...Z},children:N.status})}),e.jsxs("td",{style:{padding:"16px 20px"},children:[e.jsxs("p",{style:{margin:0,fontSize:"0.875rem",color:"var(--text-primary)"},children:[e.jsx("strong",{children:De(N.used_traffic)}),e.jsxs("span",{style:{color:"var(--text-muted)"},children:[" / ",N.data_limit?De(N.data_limit):""]})]}),N.data_limit>0&&e.jsx("div",{style:{width:"100px",height:"6px",background:"var(--border-color)",borderRadius:"3px",marginTop:"6px"},children:e.jsx("div",{style:{width:W+"%",height:"100%",borderRadius:"3px",background:W>90?"#ef4444":W>70?"#f59e0b":"#22c55e"}})})]}),e.jsx("td",{style:{color:"var(--text-muted)",fontSize:"0.875rem",padding:"16px 20px"},children:Tt(N.expire)}),e.jsx("td",{style:{color:"var(--text-muted)",fontSize:"0.875rem",padding:"16px 20px"},children:vt(N.created_at)}),e.jsx("td",{style:{padding:"16px 20px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"4px"},children:[e.jsx(we,{onClick:function(){fe(N)},title:"Show Links & QRs",color:"#8b5cf6",icon:"qr"}),e.jsx(we,{onClick:function(){L(N)},title:N.status==="active"?"Disable":"Enable",color:N.status==="active"?"#f59e0b":"#22c55e",icon:N.status==="active"?"pause":"play"}),e.jsx(we,{onClick:function(){H(N.username)},title:"Reset traffic",color:"#f97316",icon:"reset"}),e.jsx(we,{onClick:function(){ie(N)},title:"Edit",color:"#3b82f6",icon:"edit"}),e.jsx(we,{onClick:function(){me(N.username)},title:"Delete",color:"#ef4444",icon:"delete"})]})})]},N.username)})})]})}),o.length>0&&yt>1&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 20px",borderTop:d?"none":"1px solid var(--border-color)",background:"transparent"},children:[e.jsxs("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",margin:0},children:["Showing ",S*w+1," to ",Math.min((S+1)*w,i)," of ",i]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:function(){k(S-1)},disabled:S===0,className:"btn btn-secondary",style:{opacity:S===0?.5:1},children:"Previous"}),e.jsx("button",{onClick:function(){k(S+1)},disabled:S>=yt-1,className:"btn btn-secondary",style:{opacity:S>=yt-1?.5:1},children:"Next"})]})]})]}),P&&A&&e.jsx(rc,{title:A.title,message:A.message,onConfirm:je,onCancel:function(){T(!1),F(null)}}),I&&V&&e.jsx(sc,{userData:V,serverUrl:t?t.endpointUrl:"",onClose:function(){_(!1),U(null)}}),C&&e.jsx(nc,{coreConfig:O,onClose:function(){E(!1)},onSuccess:function(){E(!1),q()}}),y&&V&&e.jsx(ac,{userData:V,coreConfig:O,onClose:function(){R(!1),U(null)},onSuccess:function(){R(!1),U(null),q()}})]}):e.jsxs("div",{className:"empty-state",style:{padding:"40px",textAlign:"center",marginTop:"40px"},children:[e.jsx("div",{className:"icon-box",style:{background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6",width:"64px",height:"64px",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px auto"},children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"32px",height:"32px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2"})})}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"10px"},children:"Server Not Configured"}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"20px"},children:"You haven't added a Marzban server yet."}),e.jsx("button",{onClick:()=>r("/settings"),className:"btn btn-primary",children:"Go to Settings"})]})}function we({onClick:t,title:r,color:n,icon:a}){var o=function(){switch(a){case"copy":return e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"});case"link":return e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"});case"pause":return e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"});case"play":return e.jsxs(e.Fragment,{children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]});case"reset":return e.jsxs(e.Fragment,{children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 20v-5h-.581m-15.357-2A8.001 8.001 0 0019.419 15m0 0H15"})]});case"edit":return e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"});case"delete":return e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"});case"qr":return e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4h4v4H3V4zm1 1v2h2V5H4zm14-1h4v4h-4V4zm1 1v2h2V5h-2zM3 16h4v4H3v-4zm1 1v2h2v-2H4zm14-1h4v4h-4v-4zm1 1v2h2v-2h-2zM9 3h2v2H9V3zm0 4h2v2H9V7zm0 4h2v2H9v-2zm0 4h2v2H9v-2zm4-12h2v2h-2V3zm0 4h2v2h-2V7zm0 4h2v2h-2v-2zm0 4h2v2h-2v-2z"});default:return null}};return e.jsx("button",{onClick:t,title:r,style:{padding:"8px",borderRadius:"8px",background:"transparent",border:"none",cursor:"pointer",color:n,transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center"},onMouseOver:function(s){s.currentTarget.style.background="rgba(255,255,255,0.1)"},onMouseOut:function(s){s.currentTarget.style.background="transparent"},children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"18px",height:"18px"},children:o()})})}function rc({title:t,message:r,onConfirm:n,onCancel:a}){return e.jsx("div",{className:"modal-overlay",onClick:a,style:{position:"fixed",inset:0,zIndex:1050,backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:e.jsxs("div",{className:"modal-content",style:{maxWidth:"400px",width:"100%",margin:"0"},onClick:function(o){o.stopPropagation()},children:[e.jsx("div",{className:"modal-header",style:{borderBottom:"none",paddingBottom:"0"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"rgba(239, 68, 68, 0.15)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#ef4444",strokeWidth:"2",style:{width:"24px",height:"24px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h3",{style:{margin:0},children:t})]})}),e.jsx("div",{className:"modal-body",style:{paddingTop:"16px"},children:e.jsx("p",{style:{color:"var(--text-secondary)",margin:0},children:r})}),e.jsxs("div",{className:"modal-footer",style:{borderTop:"none",paddingTop:"8px"},children:[e.jsx("button",{onClick:a,className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{onClick:n,className:"btn btn-danger",children:"Confirm"})]})]})})}function sc({userData:t,serverUrl:r,onClose:n}){var a=function(){if(!t.subscription_url)return"";var p=t.subscription_url.match(/\/sub\/[^\/\s]+/);return p?p[0]:""},o=function(){var p=a();if(!p)return"";var h=r.replace(/\/+$/,"");return h+p},s=o(),i={};t.inbounds&&Object.keys(t.inbounds).forEach(function(p){i[p.toLowerCase()]=t.inbounds[p]||[]});var c=function(p){var h={};return(p||[]).map(function(f){var S;var x=(f.split("://")[0]||"").toLowerCase();h[x]=h[x]?h[x]+1:1;var v=h[x]-1,g=(S=i[x])==null?void 0:S[v],b=g||l(f);return{link:f,displayName:b,proto:x}})},l=function(p){try{var h=p.split("#")[1];if(h)return decodeURIComponent(h);var f=p.split("://")[0];return f?f.toUpperCase()+" Link":"Link"}catch{return"Link"}},u=c(t.links||[]),d=function(p,h){navigator.clipboard.writeText(p),M.success(`${h||"Content"} copied to clipboard!`)};return e.jsx("div",{className:"modal-overlay",onClick:n,style:{position:"fixed",inset:0,zIndex:1050,backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:e.jsxs("div",{className:"modal-content",style:{width:"100%",maxWidth:"640px",maxHeight:"90vh",overflowY:"auto",display:"flex",flexDirection:"column",margin:"0"},onClick:p=>p.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",marginRight:"10px"},children:["Links: ",t.username]}),e.jsx("button",{onClick:n,className:"modal-close",style:{flexShrink:0},children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"modal-body",style:{display:"flex",flexDirection:"column",gap:"20px",padding:"16px"},children:[s&&e.jsxs("div",{style:{background:"rgba(6, 182, 212, 0.08)",border:"1px solid rgba(6, 182, 212, 0.25)",borderRadius:"16px",padding:"16px"},children:[e.jsx("h4",{style:{color:"#22d3ee",margin:"0 0 16px 0",fontSize:"1rem",fontWeight:"600"},children:"Subscription Link"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[e.jsx("div",{onClick:()=>d(s,"Subscription URL"),style:{background:"white",padding:"12px",borderRadius:"16px",cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",maxWidth:"100%"},title:"Click QR to copy",children:e.jsx(bs,{value:s,size:150,style:{maxWidth:"100%",height:"auto"}})}),e.jsxs("div",{style:{width:"100%",display:"flex",gap:"8px"},children:[e.jsx("input",{type:"text",value:s,readOnly:!0,className:"form-input",style:{flex:1,minWidth:0,fontFamily:"monospace",fontSize:"0.8125rem"}}),e.jsx("button",{onClick:()=>d(s,"Subscription URL"),className:"btn btn-primary",style:{background:"#06b6d4",borderColor:"#0891b2",whiteSpace:"nowrap"},children:"Copy"})]})]})]}),e.jsx("hr",{style:{border:"none",borderTop:"1px solid var(--border-color)",margin:0}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("h4",{style:{margin:0,color:"var(--text-primary)"},children:["Node Links (",u.length,")"]}),u.length===0&&e.jsx("p",{style:{color:"var(--text-muted)",margin:0},children:"No links available."}),u.map((p,h)=>e.jsx("div",{style:{background:"rgba(255,255,255,0.03)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"16px"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[e.jsxs("span",{style:{fontWeight:"600",color:"var(--text-primary)",alignSelf:"flex-start",display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[e.jsx("span",{className:"badge badge-gray",children:(p.proto||"").toUpperCase()}),e.jsx("span",{style:{wordBreak:"break-all"},children:p.displayName})]}),e.jsx("div",{onClick:()=>d(p.link,p.displayName),style:{background:"white",padding:"10px",borderRadius:"12px",cursor:"pointer",maxWidth:"100%"},title:"Click QR to copy",children:e.jsx(bs,{value:p.link,size:130,style:{maxWidth:"100%",height:"auto"}})}),e.jsxs("div",{style:{width:"100%",display:"flex",gap:"8px"},children:[e.jsx("input",{type:"text",value:p.link,readOnly:!0,className:"form-input",style:{flex:1,minWidth:0,fontFamily:"monospace",fontSize:"0.75rem",textOverflow:"ellipsis"}}),e.jsx("button",{onClick:()=>d(p.link,p.displayName),className:"btn btn-secondary",style:{whiteSpace:"nowrap"},children:"Copy"})]})]})},h))]})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{onClick:n,className:"btn btn-secondary",style:{width:"100%"},children:"Close"})})]})})}function qt(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var r=Math.random()*16|0;return(t==="x"?r:r&3|8).toString(16)})}function Hr(t){if(!t||!t.inbounds)return{};var r={};return t.inbounds.forEach(function(n){n.protocol&&n.tag&&(r[n.protocol]||(r[n.protocol]=[]),r[n.protocol].push(n.tag))}),r}function nc({coreConfig:t,onClose:r,onSuccess:n}){const{activeConfig:a}=Ve(),[o,s]=m.useState(!1),[i,c]=m.useState({}),[l,u]=m.useState({}),[d,p]=m.useState({username:"",status:"active",data_limit:"",data_limit_unit:"gb",data_limit_reset_strategy:"no_reset",expire_days:"",note:"",on_hold_expire_duration:""});m.useEffect(function(){if(t){var g=Hr(t);c(g);var b={};Object.keys(g).forEach(function(S){b[S]=[...g[S]]}),u(b)}},[t]);var h=function(g,b){u(function(S){var k=S[g]||[];return{...S,[g]:k.includes(b)?k.filter(function(w){return w!==b}):[...k,b]}})},f=function(g){u(function(b){var S=i[g]||[],k=b[g]||[];return{...b,[g]:k.length===S.length?[]:[...S]}})},x=async function(g){var P,T,I,_;if(g.preventDefault(),d.username.length<3||d.username.length>32){M.error("Username must be 3-32 chars");return}if(!/^[a-zA-Z0-9_-]+$/.test(d.username)){M.error("Username: only a-z, 0-9, _");return}var b=Object.values(l).some(function(A){return A.length>0});if(!b){M.error("Select at least one inbound");return}if(d.status==="on_hold"&&!d.on_hold_expire_duration){M.error("On Hold requires duration");return}s(!0);try{var S={mb:1048576,gb:1073741824,tb:1099511627776},k=d.data_limit?parseFloat(d.data_limit)*S[d.data_limit_unit]:0,w=d.expire_days&&d.status!=="on_hold"?Math.floor(Date.now()/1e3)+parseInt(d.expire_days)*86400:0,C={},E={};Object.keys(l).forEach(function(A){l[A].length>0&&(E[A]=l[A],A==="vmess"||A==="vless"?C[A]={id:qt()}:A==="trojan"?C[A]={password:qt()}:C[A]={})});var y={username:d.username,status:d.status,data_limit:k,data_limit_reset_strategy:d.data_limit_reset_strategy,expire:w,note:d.note||"",proxies:C,inbounds:E};d.status==="on_hold"&&(y.on_hold_expire_duration=parseInt(d.on_hold_expire_duration)*86400,y.expire=0),await Oe.createUser(a.id,y),M.success("User created!"),n()}catch(A){var R=((T=(P=A.response)==null?void 0:P.data)==null?void 0:T.detail)||((_=(I=A.response)==null?void 0:I.data)==null?void 0:_.error)||"Failed";M.error(typeof R=="string"?R:JSON.stringify(R))}finally{s(!1)}},v=Object.keys(i);return e.jsx("div",{className:"modal-overlay",onClick:r,style:{position:"fixed",inset:0,zIndex:1050,backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:e.jsxs("div",{className:"modal-content",style:{maxWidth:"600px",width:"100%",margin:"0",maxHeight:"90vh",overflowY:"auto"},onClick:function(g){g.stopPropagation()},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Create New User"}),e.jsx("button",{onClick:r,className:"modal-close",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Username *"}),e.jsx("input",{type:"text",value:d.username,onChange:function(g){p({...d,username:g.target.value})},required:!0,className:"form-input",placeholder:"3-32 chars"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsxs("select",{value:d.status,onChange:function(g){p({...d,status:g.target.value})},className:"form-input",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"on_hold",children:"On Hold"}),e.jsx("option",{value:"disabled",children:"Disabled"})]})]}),d.status==="on_hold"&&e.jsxs("div",{className:"form-group",style:{background:"rgba(59, 130, 246, 0.1)",padding:"16px",borderRadius:"12px",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[e.jsx("label",{className:"form-label",style:{color:"var(--accent-blue)"},children:"On Hold Duration (days) *"}),e.jsx("input",{type:"number",value:d.on_hold_expire_duration,onChange:function(g){p({...d,on_hold_expire_duration:g.target.value})},className:"form-input",placeholder:"Days",min:"1",required:!0}),e.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"8px"},children:"Active for this many days after first connection"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Data Limit"}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("input",{type:"number",value:d.data_limit,onChange:function(g){p({...d,data_limit:g.target.value})},className:"form-input",placeholder:"0 = Unlimited",min:"0",step:"0.01",style:{flex:1}}),e.jsxs("select",{value:d.data_limit_unit,onChange:function(g){p({...d,data_limit_unit:g.target.value})},className:"form-input",style:{width:"auto"},children:[e.jsx("option",{value:"mb",children:"MB"}),e.jsx("option",{value:"gb",children:"GB"}),e.jsx("option",{value:"tb",children:"TB"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Data Reset"}),e.jsxs("select",{value:d.data_limit_reset_strategy,onChange:function(g){p({...d,data_limit_reset_strategy:g.target.value})},className:"form-input",children:[e.jsx("option",{value:"no_reset",children:"No Reset"}),e.jsx("option",{value:"day",children:"Daily"}),e.jsx("option",{value:"week",children:"Weekly"}),e.jsx("option",{value:"month",children:"Monthly"}),e.jsx("option",{value:"year",children:"Yearly"})]})]}),d.status!=="on_hold"&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Expire After (days)"}),e.jsx("input",{type:"number",value:d.expire_days,onChange:function(g){p({...d,expire_days:g.target.value})},className:"form-input",placeholder:"0 = Never",min:"0"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Inbounds *"}),e.jsx("div",{style:{background:"rgba(255,255,255,0.03)",borderRadius:"12px",border:"1px solid var(--border-color)",padding:"16px"},children:v.length===0?e.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center",margin:0},children:"Loading..."}):v.map(function(g){var b=i[g],S=l[g]||[],k=S.length===b.length&&b.length>0;return e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("div",{onClick:function(){f(g)},style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",cursor:"pointer"},children:[e.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"4px",border:"2px solid "+(k?"var(--accent-blue)":"var(--border-color)"),background:k?"var(--accent-blue)":"transparent",display:"flex",alignItems:"center",justifyContent:"center"},children:k&&e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",style:{width:"14px",height:"14px"},children:e.jsx("path",{d:"M5 13l4 4L19 7"})})}),e.jsx("span",{style:{fontWeight:"600",color:"var(--text-primary)",textTransform:"uppercase",fontSize:"0.8125rem"},children:g}),e.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["(",S.length,"/",b.length,")"]})]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",paddingLeft:"28px"},children:b.map(function(w){var C=S.includes(w);return e.jsxs("label",{onClick:function(){h(g,w)},style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",padding:"6px 12px",borderRadius:"8px",background:C?"rgba(59, 130, 246, 0.15)":"rgba(255,255,255,0.03)",border:"1px solid "+(C?"rgba(59, 130, 246, 0.3)":"var(--border-color)")},children:[e.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"4px",border:"2px solid "+(C?"var(--accent-blue)":"var(--text-muted)"),background:C?"var(--accent-blue)":"transparent",display:"flex",alignItems:"center",justifyContent:"center"},children:C&&e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",style:{width:"12px",height:"12px"},children:e.jsx("path",{d:"M5 13l4 4L19 7"})})}),e.jsx("span",{style:{fontSize:"0.8125rem",color:C?"var(--text-primary)":"var(--text-muted)"},children:w})]},w)})})]},g)})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Note"}),e.jsx("textarea",{value:d.note,onChange:function(g){p({...d,note:g.target.value})},className:"form-input",placeholder:"Optional...",rows:2})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:o,children:o?"Creating...":"Create User"})]})]})]})})}function ac({userData:t,coreConfig:r,onClose:n,onSuccess:a}){const{activeConfig:o}=Ve(),[s,i]=m.useState(!1),[c,l]=m.useState(!1);var u=t.username;const[d,p]=m.useState({status:t.status==="expired"||t.status==="limited"?"active":t.status,data_limit:t.data_limit?(t.data_limit/(1024*1024*1024)).toFixed(2):"",data_limit_unit:"gb",data_limit_reset_strategy:t.data_limit_reset_strategy||"no_reset",expire_days:"",note:t.note||""}),[h,f]=m.useState({}),[x,v]=m.useState({});m.useEffect(()=>{if(r){const y=Hr(r);f(y)}},[r]),m.useEffect(()=>{if(r&&t.inbounds){const y=Hr(r),R={};Object.keys(y).forEach(P=>{R[P]=[]}),Object.keys(t.inbounds).forEach(P=>{t.inbounds[P]&&(R[P]=t.inbounds[P])}),v(R)}},[r,t]);var g=function(y,R){v(function(P){var T=P[y]||[];return{...P,[y]:T.includes(R)?T.filter(function(I){return I!==R}):[...T,R]}})},b=function(y){v(function(R){var P=h[y]||[],T=R[y]||[];return{...R,[y]:T.length===P.length?[]:[...P]}})},S=function(){var y=[];return t.proxies&&(t.proxies.vmess&&t.proxies.vmess.id&&y.push({protocol:"VMess",id:t.proxies.vmess.id}),t.proxies.vless&&t.proxies.vless.id&&y.push({protocol:"VLess",id:t.proxies.vless.id}),t.proxies.trojan&&t.proxies.trojan.password&&y.push({protocol:"Trojan",id:t.proxies.trojan.password})),y},k=async function(){l(!0);try{await Oe.revokeSubscription(o.id,u),M.success("UUID reset successfully!"),a()}catch(y){console.error("Reset UUID error:",y),M.error("Failed to reset UUID")}finally{l(!1)}},w=async function(y){var A,F,V,U;y.preventDefault(),i(!0);try{var R={mb:1048576,gb:1073741824,tb:1099511627776},P={...t.proxies},T=!1;Object.keys(x).forEach(O=>{x[O]&&x[O].length>0&&(!P[O]||Object.keys(P[O]).length===0&&O!=="shadowsocks")&&(O==="vmess"||O==="vless"?(P[O]={id:qt()},T=!0):O==="trojan"?(P[O]={password:qt()},T=!0):O==="shadowsocks"&&(P[O]||(P[O]={},T=!0)))});var I={status:d.status,note:d.note||"",data_limit_reset_strategy:d.data_limit_reset_strategy,data_limit:d.data_limit?parseFloat(d.data_limit)*R[d.data_limit_unit]:0,inbounds:x};T&&(I.proxies=P),d.expire_days&&(I.expire=Math.floor(Date.now()/1e3)+parseInt(d.expire_days)*86400),t.status==="expired"&&d.status==="active"&&await Oe.updateUser(o.id,u,{status:"disabled"}),await Oe.updateUser(o.id,u,I),M.success("User updated!"),a()}catch(O){console.error("Update error:",O);var _=((F=(A=O.response)==null?void 0:A.data)==null?void 0:F.detail)||((U=(V=O.response)==null?void 0:V.data)==null?void 0:U.error)||"Failed to update";M.error(typeof _=="string"?_:JSON.stringify(_))}finally{i(!1)}},C=S(),E=Object.keys(h);return e.jsx("div",{className:"modal-overlay",onClick:n,style:{position:"fixed",inset:0,zIndex:1050,backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:e.jsxs("div",{className:"modal-content",style:{maxWidth:"550px",width:"100%",margin:"0",maxHeight:"90vh",overflowY:"auto"},onClick:function(y){y.stopPropagation()},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:["Edit:  ",u]}),e.jsx("button",{onClick:n,className:"modal-close",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:w,children:[e.jsxs("div",{className:"modal-body",children:[C.length>0&&e.jsxs("div",{className:"form-group",style:{background:"rgba(139, 92, 246, 0.1)",padding:"16px",borderRadius:"12px",border:"1px solid rgba(139, 92, 246, 0.2)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("label",{className:"form-label",style:{color:"var(--accent-purple)",margin:0},children:"Current IDs"}),e.jsx("button",{type:"button",onClick:k,disabled:c,className:"btn btn-warning",style:{padding:"6px 12px",fontSize:"0.8125rem"},children:c?"Resetting...":"Reset UUID"})]}),C.map(function(y,R){return e.jsxs("div",{style:{marginBottom:R<C.length-1?"8px":0},children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-muted)",margin:"0 0 4px 0"},children:y.protocol}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("code",{style:{flex:1,padding:"8px 12px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",fontSize:"0.7rem",color:"var(--text-secondary)",wordBreak:"break-all",fontFamily:"monospace"},children:y.id}),e.jsx("button",{type:"button",onClick:function(){navigator.clipboard.writeText(y.id),M.success("Copied!")},style:{padding:"8px",borderRadius:"8px",background:"rgba(255,255,255,0.1)",border:"none",cursor:"pointer",color:"var(--text-muted)"},children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"16px",height:"16px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]},R)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsxs("select",{value:d.status,onChange:function(y){p({...d,status:y.target.value})},className:"form-input",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"disabled",children:"Disabled"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Data Limit"}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("input",{type:"number",value:d.data_limit,onChange:function(y){p({...d,data_limit:y.target.value})},className:"form-input",placeholder:"0 = Unlimited",min:"0",step:"0.01",style:{flex:1}}),e.jsxs("select",{value:d.data_limit_unit,onChange:function(y){p({...d,data_limit_unit:y.target.value})},className:"form-input",style:{width:"auto"},children:[e.jsx("option",{value:"mb",children:"MB"}),e.jsx("option",{value:"gb",children:"GB"}),e.jsx("option",{value:"tb",children:"TB"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Data Reset"}),e.jsxs("select",{value:d.data_limit_reset_strategy,onChange:function(y){p({...d,data_limit_reset_strategy:y.target.value})},className:"form-input",children:[e.jsx("option",{value:"no_reset",children:"No Reset"}),e.jsx("option",{value:"day",children:"Daily"}),e.jsx("option",{value:"week",children:"Weekly"}),e.jsx("option",{value:"month",children:"Monthly"}),e.jsx("option",{value:"year",children:"Yearly"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Inbounds"}),e.jsx("div",{style:{background:"rgba(255,255,255,0.03)",borderRadius:"12px",border:"1px solid var(--border-color)",padding:"16px"},children:E.length===0?e.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center",margin:0},children:"Loading Inbounds..."}):E.map(function(y){var R=h[y],P=x[y]||[],T=P.length===R.length&&R.length>0;return e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("div",{onClick:function(){b(y)},style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",cursor:"pointer"},children:[e.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"4px",border:"2px solid "+(T?"var(--accent-blue)":"var(--border-color)"),background:T?"var(--accent-blue)":"transparent",display:"flex",alignItems:"center",justifyContent:"center"},children:T&&e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",style:{width:"14px",height:"14px"},children:e.jsx("path",{d:"M5 13l4 4L19 7"})})}),e.jsx("span",{style:{fontWeight:"600",color:"var(--text-primary)",textTransform:"uppercase",fontSize:"0.8125rem"},children:y}),e.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["(",P.length,"/",R.length,")"]})]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",paddingLeft:"28px"},children:R.map(function(I){var _=P.includes(I);return e.jsxs("label",{onClick:function(){g(y,I)},style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",padding:"6px 12px",borderRadius:"8px",background:_?"rgba(59, 130, 246, 0.15)":"rgba(255,255,255,0.03)",border:"1px solid "+(_?"rgba(59, 130, 246, 0.3)":"var(--border-color)")},children:[e.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"4px",border:"2px solid "+(_?"var(--accent-blue)":"var(--text-muted)"),background:_?"var(--accent-blue)":"transparent",display:"flex",alignItems:"center",justifyContent:"center"},children:_&&e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",style:{width:"12px",height:"12px"},children:e.jsx("path",{d:"M5 13l4 4L19 7"})})}),e.jsx("span",{style:{fontSize:"0.8125rem",color:_?"var(--text-primary)":"var(--text-muted)"},children:I})]},I)})})]},y)})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Extend Expiration (days from now)"}),e.jsx("input",{type:"number",value:d.expire_days,onChange:function(y){p({...d,expire_days:y.target.value})},className:"form-input",placeholder:"Leave empty to keep current",min:"0"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Note"}),e.jsx("textarea",{value:d.note,onChange:function(y){p({...d,note:y.target.value})},className:"form-input",placeholder:"Optional...",rows:2})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:s,children:s?"Saving...":"Save Changes"})]})]})]})})}function oc(){const{user:t}=$e(),{configs:r,loadConfigs:n,selectConfig:a,activeConfig:o}=Ve(),[s,i]=m.useState(!1),[c,l]=m.useState(!1),[u,d]=m.useState(!1),[p,h]=m.useState(!1),[f,x]=m.useState(null),[v,g]=m.useState(null),b=w=>{g(w)},S=async()=>{if(v)try{await se.deleteConfig(v.id),M.success("Server removed successfully"),n(),g(null)}catch(w){M.error("Failed to remove server"),console.error(w)}},k=w=>{x(w),l(!0)};return e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:"700",color:"var(--text-primary)",margin:0},children:"Settings"}),e.jsx("p",{style:{color:"var(--text-muted)",marginTop:"8px"},children:"Manage your account and server connections"})]}),e.jsxs("div",{style:{background:"linear-gradient(135deg, var(--table-sha) 0%, var(--table-sha-2) 100%)",border:"1px solid var(--border-color)",borderRadius:"16px",marginBottom:"24px",overflow:"hidden"},children:[e.jsx("div",{style:{padding:"20px 24px",borderBottom:"1px solid var(--border-color)"},children:e.jsxs("h3",{style:{margin:0,fontSize:"1.125rem",fontWeight:"600",color:"var(--text-primary)",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"20px",height:"20px",color:"var(--accent-blue)"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Account Settings"]})}),e.jsxs("div",{style:{padding:"24px",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"16px",background:"linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem",fontWeight:"700",color:"white",boxShadow:"0 4px 12px rgba(139, 92, 246, 0.3)"},children:t&&t.email?t.email.charAt(0).toUpperCase():"A"}),e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,fontWeight:"600",fontSize:"1.125rem",color:"var(--text-primary)"},children:t&&(t.username||t.email)||"Administrator"}),e.jsx("p",{style:{margin:"4px 0 0 0",color:"var(--text-muted)",fontSize:"0.875rem"},children:t&&t.name||"Admin Account"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsxs("button",{onClick:()=>h(!0),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"8px",borderColor:"var(--accent-purple)",color:"var(--accent-purple)",fontWeight:"600"},children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"18px",height:"18px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m-4-4v12"})}),"Backup & Restore"]}),e.jsxs("button",{onClick:()=>d(!0),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"18px",height:"18px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit Profile"]})]})]})]}),e.jsxs("div",{style:{background:"linear-gradient(135deg, var(--table-sha) 0%, var(--table-sha-2) 100%)",border:"1px solid var(--border-color)",borderRadius:"16px",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"20px 24px",borderBottom:"1px solid var(--border-color)",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"16px"},children:[e.jsxs("h3",{style:{margin:0,fontSize:"1.125rem",fontWeight:"600",color:"var(--text-primary)",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"20px",height:"20px",color:"var(--accent-cyan)"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2"})}),"Marzban Servers"]}),e.jsxs("button",{onClick:()=>i(!0),className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",style:{width:"18px",height:"18px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"Add Server"]})]}),e.jsx("div",{style:{padding:"16px"},children:r.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"48px 24px"},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"16px",background:"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"var(--text-muted)",strokeWidth:"1.5",style:{width:"32px",height:"32px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2"})})}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"1rem",margin:0},children:"No servers configured"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem",marginTop:"8px",opacity:.7},children:"Add a Marzban server to get started"})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:r.map(w=>{const C=o&&o.id===w.id;return e.jsxs("div",{style:{background:C?"rgba(139, 92, 246, 0.1)":"rgba(255,255,255,0.02)",border:"1px solid "+(C?"rgba(139, 92, 246, 0.3)":"var(--border-color)"),borderRadius:"12px",padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"16px",transition:"all 0.2s ease"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"14px",flex:1,minWidth:"200px"},children:[e.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"#22c55e",boxShadow:"0 0 8px rgba(34, 197, 94, 0.5)"}}),e.jsxs("div",{children:[e.jsxs("p",{style:{margin:0,fontWeight:"600",color:"var(--text-primary)",fontSize:"1rem"},children:[w.name,C&&e.jsx("span",{style:{marginLeft:"10px",padding:"2px 8px",background:"var(--accent-purple)",borderRadius:"4px",fontSize:"0.6875rem",fontWeight:"600",color:"white",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Active"})]}),e.jsx("p",{style:{margin:"4px 0 0 0",color:"var(--text-muted)",fontSize:"0.8125rem"},children:w.endpointUrl})]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[!C&&e.jsxs("button",{onClick:()=>{a(w),M.success("Switched to "+w.name)},className:"btn btn-secondary",style:{padding:"8px 16px",fontSize:"0.8125rem"},children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"16px",height:"16px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Select"]}),e.jsxs("button",{onClick:()=>k(w),className:"btn btn-secondary",style:{padding:"8px 16px",fontSize:"0.8125rem"},children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"16px",height:"16px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),e.jsxs("button",{onClick:()=>b(w),className:"btn btn-danger",style:{padding:"8px 16px",fontSize:"0.8125rem"},children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"16px",height:"16px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Remove"]})]})]},w.id)})})})]}),s&&e.jsx(cc,{onClose:()=>i(!1),onSuccess:()=>{i(!1),n()}}),c&&f&&e.jsx(dc,{config:f,onClose:()=>{l(!1),x(null)},onSuccess:()=>{l(!1),x(null),n()}}),v&&e.jsx(lc,{server:v,onClose:()=>g(null),onConfirm:S}),p&&e.jsx(ic,{onClose:()=>h(!1)}),u&&e.jsx(pc,{onClose:()=>d(!1)})]})}function Bn(t){let r=t.trim();/^https?:\/\//i.test(r)||(r="https://"+r);try{const n=new URL(r);n.port||(n.port="8000"),n.pathname="/",n.search="",n.hash="";let a=n.toString();return a.endsWith("/")&&(a=a.slice(0,-1)),a}catch{return r}}function ic({onClose:t}){var l;const{logout:r}=$e(),n=m.useRef(null),[a,o]=m.useState({open:!1,file:null}),s=async()=>{const u=M.loading("Creating full backup archive...");try{const d=localStorage.getItem("token"),p=await Y.get("/api/auth/backup/full",{responseType:"blob",headers:{Authorization:`Bearer ${d}`}}),h=window.URL.createObjectURL(new Blob([p.data])),f=document.createElement("a");f.href=h;const x=new Date().toISOString().split("T")[0];f.setAttribute("download",`full-backup-${x}.zip`),document.body.appendChild(f),f.click(),f.remove(),window.URL.revokeObjectURL(h),M.success("Full backup downloaded!",{id:u})}catch(d){console.error("Download failed:",d),M.error("Backup failed. Check server logs.",{id:u})}},i=u=>{var p;const d=(p=u.target.files)==null?void 0:p[0];d&&(o({open:!0,file:d}),u.target.value=null)},c=async()=>{var h,f;const u=a.file;if(!u)return;const d=M.loading("Restoring backup... Please wait."),p=new FormData;p.append("backup",u);try{const x=localStorage.getItem("token");await Y.post("/api/auth/backup/restore",p,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${x}`}}),M.success("Restore successful! Logging out...",{id:d}),setTimeout(()=>{r(),window.location.href="/login"},1500)}catch(x){console.error("Restore failed:",x);const v=((f=(h=x.response)==null?void 0:h.data)==null?void 0:f.error)||"Failed to restore backup";M.error(v,{id:d})}finally{o({open:!1,file:null})}};return e.jsx("div",{className:"modal-overlay",onClick:t,style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px",position:"fixed",inset:0,zIndex:1e3,backgroundColor:"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)"},children:e.jsxs("div",{className:"modal-content",style:{width:"100%",maxWidth:"450px",margin:"0 auto",maxHeight:"90vh",overflowY:"auto",background:"linear-gradient(135deg, var(--table-sha) 0%, var(--table-sha-2) 100%)",border:"1px solid var(--border-color)",padding:"24px",borderRadius:"16px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5)",position:"relative"},onClick:u=>u.stopPropagation(),children:[a.open&&e.jsx("div",{className:"confirm-overlay",style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,padding:"16px",borderRadius:"16px",backdropFilter:"blur(4px)"},onClick:()=>o({open:!1,file:null}),children:e.jsxs("div",{className:"confirm-card",style:{width:"100%",maxWidth:"400px",background:"var(--bg-primary, #1a1a1a)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"20px",boxShadow:"0 0 40px rgba(0,0,0,0.8)"},onClick:u=>u.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-start"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"12px",display:"grid",placeItems:"center",background:"rgba(255, 165, 0, 0.15)",border:"1px solid rgba(255, 165, 0, 0.35)"},children:e.jsx("span",{style:{fontSize:"20px"},children:""})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:700,fontSize:"16px",marginBottom:"6px",color:"#fff"},children:"Confirm Restore"}),e.jsx("div",{style:{opacity:.9,lineHeight:1.5,fontSize:"14px",color:"#ddd"},children:"This will overwrite your current data. You will be logged out automatically."}),((l=a.file)==null?void 0:l.name)&&e.jsxs("div",{style:{marginTop:"10px",fontSize:"12px",color:"var(--accent-blue)"},children:["File: ",e.jsx("span",{style:{fontWeight:600},children:a.file.name})]})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[e.jsx("button",{type:"button",className:"btn",style:{padding:"8px 16px",borderRadius:"8px",border:"1px solid var(--border-color)",background:"transparent",color:"#fff",cursor:"pointer"},onClick:()=>o({open:!1,file:null}),children:"Cancel"}),e.jsx("button",{type:"button",className:"btn",style:{padding:"8px 16px",borderRadius:"8px",border:"none",background:"#ef4444",color:"#fff",fontWeight:700,cursor:"pointer"},onClick:c,children:"Restore Now"})]})]})}),e.jsxs("div",{className:"modal-header",style:{marginBottom:"20px"},children:[e.jsx("h3",{style:{margin:0},children:"Backup & Restore"}),e.jsx("button",{onClick:t,className:"modal-close",style:{background:"none",border:"none",color:"var(--text-muted)",cursor:"pointer"},children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"24px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"modal-body",style:{display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{style:{padding:"16px",background:"rgba(255,255,255,0.02)",borderRadius:"12px",border:"1px solid var(--border-color)"},children:[e.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:"1rem",color:"var(--text-primary)"},children:"Create Backup"}),e.jsx("p",{style:{margin:"0 0 16px 0",fontSize:"0.875rem",color:"var(--text-muted)"},children:"Download a complete backup of your database and configurations."}),e.jsxs("button",{onClick:s,className:"btn btn-primary",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"10px",borderRadius:"8px"},children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"18px",height:"18px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download Full Backup"]})]}),e.jsxs("div",{style:{padding:"16px",background:"rgba(239, 68, 68, 0.05)",borderRadius:"12px",border:"1px solid rgba(239, 68, 68, 0.2)"},children:[e.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:"1rem",color:"#ef4444"},children:"Restore Data"}),e.jsx("p",{style:{margin:"0 0 16px 0",fontSize:"0.875rem",color:"var(--text-muted)"},children:"Upload a .zip backup file to restore your system."}),e.jsx("input",{type:"file",ref:n,onChange:i,style:{display:"none"},accept:".zip"}),e.jsxs("button",{onClick:()=>n.current.click(),className:"btn",style:{width:"100%",background:"transparent",border:"1px solid #ef4444",color:"#ef4444",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"10px 16px",borderRadius:"8px",cursor:"pointer",fontWeight:"600"},children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"18px",height:"18px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m-4-4v12"})}),"Upload & Restore"]})]})]})]})})}function lc({server:t,onClose:r,onConfirm:n}){return e.jsx("div",{className:"modal-overlay",onClick:r,children:e.jsxs("div",{className:"modal-content",style:{maxWidth:"400px",width:"100%",background:"linear-gradient(135deg, var(--table-sha) 0%, var(--table-sha-2) 100%)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"0",position:"relative"},onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{style:{padding:"24px 24px 0 24px",textAlign:"center"},children:[e.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:"rgba(239, 68, 68, 0.1)",color:"#ef4444",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px auto"},children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"30px",height:"30px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"1.25rem",color:"var(--text-primary)"},children:"Remove Server?"}),e.jsxs("p",{style:{margin:0,color:"var(--text-muted)",lineHeight:"1.5"},children:["Are you sure you want to remove ",e.jsx("strong",{children:t.name}),"? This action cannot be undone."]})]}),e.jsxs("div",{className:"modal-footer",style:{marginTop:"24px",padding:"16px 24px",background:"rgba(0,0,0,0.02)"},children:[e.jsx("button",{onClick:r,className:"btn btn-secondary",style:{flex:1},children:"Cancel"}),e.jsx("button",{onClick:n,className:"btn btn-danger",style:{flex:1},children:"Remove Server"})]})]})})}function cc({onClose:t,onSuccess:r}){const[n,a]=m.useState(!1),[o,s]=m.useState({name:"",endpointUrl:"",username:"",password:""}),i=async c=>{var d,p;c.preventDefault(),a(!0);const l=Bn(o.endpointUrl);s(h=>({...h,endpointUrl:l}));const u={...o,endpointUrl:l};try{await se.connect(u),M.success("Server connected successfully!"),r()}catch(h){const f=((p=(d=h.response)==null?void 0:d.data)==null?void 0:p.error)||"Failed to connect to server";M.error(f)}finally{a(!1)}};return e.jsx("div",{className:"modal-overlay",onClick:t,style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e.jsxs("div",{className:"modal-content",style:{width:"100%",maxWidth:"480px",margin:"0 auto",maxHeight:"90vh",overflowY:"auto",background:"linear-gradient(135deg, var(--table-sha) 0%, var(--table-sha-2) 100%)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"24px"},onClick:c=>c.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Add Marzban Server"}),e.jsx("button",{onClick:t,className:"modal-close",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:i,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Server Name"}),e.jsx("input",{type:"text",value:o.name,onChange:c=>s({...o,name:c.target.value}),className:"form-input",placeholder:"My Marzban Server",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Endpoint URL or Domain"}),e.jsx("input",{type:"text",value:o.endpointUrl,onChange:c=>s({...o,endpointUrl:c.target.value}),className:"form-input",placeholder:"example.com",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Admin Username"}),e.jsx("input",{type:"text",value:o.username,onChange:c=>s({...o,username:c.target.value}),className:"form-input",placeholder:"admin",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Admin Password"}),e.jsx("input",{type:"password",value:o.password,onChange:c=>s({...o,password:c.target.value}),className:"form-input",placeholder:"",required:!0})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:t,className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?"Connecting...":"Connect Server"})]})]})]})})}function dc({config:t,onClose:r,onSuccess:n}){const[a,o]=m.useState(!1),[s,i]=m.useState({name:t.name||"",endpointUrl:t.endpointUrl||"",username:"",password:""}),c=async l=>{var d,p;if(l.preventDefault(),!s.name.trim()||!s.endpointUrl.trim()){M.error("Name and URL required");return}o(!0);const u=Bn(s.endpointUrl);try{const h={name:s.name.trim(),endpointUrl:u};s.username.trim()&&s.password&&(h.username=s.username.trim(),h.password=s.password),await se.updateConfig(t.id,h),M.success("Server updated successfully!"),n()}catch(h){let f=((p=(d=h.response)==null?void 0:d.data)==null?void 0:p.error)||"Failed to update server";M.error(f)}finally{o(!1)}};return e.jsx("div",{className:"modal-overlay",onClick:r,children:e.jsxs("div",{className:"modal-content",style:{maxWidth:"480px",background:"linear-gradient(135deg, var(--table-sha) 0%, var(--table-sha-2) 100%)",border:"1px solid var(--border-color)"},onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Edit Server"}),e.jsx("button",{onClick:r,className:"modal-close",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:c,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Server Name"}),e.jsx("input",{type:"text",value:s.name,onChange:l=>i({...s,name:l.target.value}),className:"form-input",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Endpoint URL"}),e.jsx("input",{type:"text",value:s.endpointUrl,onChange:l=>i({...s,endpointUrl:l.target.value}),className:"form-input",required:!0})]}),e.jsx("div",{style:{margin:"16px 0",fontSize:"0.8125rem",color:"var(--accent-blue)",background:"rgba(59,130,246,0.1)",padding:"12px",borderRadius:"8px"},children:"Leave credentials empty to keep current ones."}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"New Username (optional)"}),e.jsx("input",{type:"text",value:s.username,onChange:l=>i({...s,username:l.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"New Password (optional)"}),e.jsx("input",{type:"password",value:s.password,onChange:l=>i({...s,password:l.target.value}),className:"form-input"})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a,children:a?"Saving...":"Save Changes"})]})]})]})})}function pc({onClose:t}){const{user:r,logout:n}=$e(),[a,o]=m.useState(!1),[s,i]=m.useState(!1),[c,l]=m.useState(!1),[u,d]=m.useState(!1),[p,h]=m.useState(""),[f,x]=m.useState(""),[v,g]=m.useState(""),[b,S]=m.useState(""),[k,w]=m.useState(""),C=({isShown:y,onToggle:R})=>e.jsx("button",{type:"button",onClick:R,style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer",color:"var(--text-muted)",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center"},title:y?"Hide":"Show",children:y?e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"20px",height:"20px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"20px",height:"20px"},children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),E=async y=>{var P,T;y.preventDefault();const R=(r==null?void 0:r.username)||(r==null?void 0:r.email)||"";if(p.trim()!==R){M.error("Incorrect current username");return}if(!f){M.error("Current password is required");return}if(b||k){if(b!==k){M.error("New passwords do not match");return}if(b.length<6){M.error("New password must be at least 6 characters");return}}o(!0);try{const _={username:v.trim()!==""?v.trim():p.trim(),currentPassword:f};b&&(_.newPassword=b),await Ar.updateProfile(_),M.success("Profile updated! Please login with your new credentials."),n()}catch(I){const _=((T=(P=I.response)==null?void 0:P.data)==null?void 0:T.error)||"Failed to update profile";M.error(_)}finally{o(!1)}};return e.jsx("div",{className:"modal-overlay",onClick:t,style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e.jsxs("div",{className:"modal-content",style:{width:"100%",maxWidth:"450px",margin:"0 auto",maxHeight:"90vh",overflowY:"auto",background:"linear-gradient(135deg, var(--table-sha) 0%, var(--table-sha-2) 100%)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"24px"},onClick:y=>y.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Edit Profile"}),e.jsx("button",{onClick:t,className:"modal-close",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:E,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Current Username *"}),e.jsx("input",{type:"text",value:p,onChange:y=>h(y.target.value),className:"form-input",placeholder:"Enter your current username",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Current Password *"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:s?"text":"password",value:f,onChange:y=>x(y.target.value),className:"form-input",placeholder:"Enter current password",style:{paddingRight:"48px"},required:!0}),e.jsx(C,{isShown:s,onToggle:()=>i(!s)})]})]}),e.jsx("div",{style:{height:"1px",background:"var(--border-color)",margin:"20px 0"}}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"New Username (Optional)"}),e.jsx("input",{type:"text",value:v,onChange:y=>g(y.target.value),className:"form-input",placeholder:"Enter new username"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"New Password (Optional)"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:c?"text":"password",value:b,onChange:y=>S(y.target.value),className:"form-input",placeholder:"Min 6 chars",style:{paddingRight:"48px"}}),e.jsx(C,{isShown:c,onToggle:()=>l(!c)})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Confirm New Password"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:u?"text":"password",value:k,onChange:y=>w(y.target.value),className:"form-input",placeholder:"Re-type new password",style:{paddingRight:"48px"}}),e.jsx(C,{isShown:u,onToggle:()=>d(!u)})]})]}),e.jsx("div",{style:{padding:"12px",background:"rgba(245, 158, 11, 0.1)",borderRadius:"8px",border:"1px solid rgba(245, 158, 11, 0.2)",marginTop:"16px"},children:e.jsx("p",{style:{margin:0,fontSize:"0.8125rem",color:"var(--accent-orange)"},children:" After saving changes, you will be logged out."})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:t,className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a,children:a?"Saving...":"Save Changes"})]})]})]})})}const uc=["AES_128_GCM","AES_256_GCM","CHACHA20_POLY1305","ECDHE_ECDSA_AES_128_CBC","ECDHE_ECDSA_AES_256_CBC","ECDHE_RSA_AES_128_CBC","ECDHE_RSA_AES_256_CBC","ECDHE_ECDSA_AES_128_GCM","ECDHE_ECDSA_AES_256_GCM","ECDHE_RSA_AES_128_GCM","ECDHE_RSA_AES_256_GCM","ECDHE_ECDSA_CHACHA20_POLY1305","ECDHE_RSA_CHACHA20_POLY1305"],hc=[...uc,"TLS_AES_128_GCM_SHA256","TLS_AES_256_GCM_SHA384","TLS_CHACHA20_POLY1305_SHA256"],xc=({formData:t,setFormData:r})=>{const n=s=>{r(i=>({...i,[s]:!i[s]}))},a=s=>{const i=t.tlsCipherSuites||"";let c=i?i.split(":"):[];c.includes(s)?c=c.filter(l=>l!==s):c.push(s),r({...t,tlsCipherSuites:c.join(":")})},o=t.tlsCipherSuites?t.tlsCipherSuites.split(":"):[];return e.jsxs("div",{className:"card card-body",style:{gridColumn:"1 / -1",background:"rgba(0,0,0,0.2)",marginTop:"10px"},children:[e.jsx("h4",{style:{marginBottom:"16px",color:"#10b981",borderBottom:"1px solid #374151",paddingBottom:"8px"},children:"TLS Configuration"}),e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Server Name (SNI)"}),e.jsx("input",{type:"text",value:t.tlsServerName,onChange:s=>r({...t,tlsServerName:s.target.value}),className:"form-input",placeholder:"example.com"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"ALPN (comma separated)"}),e.jsx("input",{type:"text",value:t.tlsAlpn,onChange:s=>r({...t,tlsAlpn:s.target.value}),className:"form-input",placeholder:"h2,http/1.1"})]})]}),e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Min Version"}),e.jsxs("select",{value:t.tlsMinVersion,onChange:s=>r({...t,tlsMinVersion:s.target.value}),className:"form-input",children:[e.jsx("option",{value:"1.0",children:"1.0"}),e.jsx("option",{value:"1.1",children:"1.1"}),e.jsx("option",{value:"1.2",children:"1.2"}),e.jsx("option",{value:"1.3",children:"1.3"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Max Version"}),e.jsxs("select",{value:t.tlsMaxVersion,onChange:s=>r({...t,tlsMaxVersion:s.target.value}),className:"form-input",children:[e.jsx("option",{value:"1.0",children:"1.0"}),e.jsx("option",{value:"1.1",children:"1.1"}),e.jsx("option",{value:"1.2",children:"1.2"}),e.jsx("option",{value:"1.3",children:"1.3"})]})]})]}),e.jsxs("div",{className:"card card-body",style:{background:"rgba(255,255,255,0.03)",marginTop:"12px",marginBottom:"12px"},children:[e.jsx("h5",{style:{marginBottom:"10px",color:"var(--text-primary)",fontSize:"0.9rem"},children:"Certificate #1"}),e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Certificate File (.crt)"}),e.jsx("input",{type:"text",value:t.tlsCertFile,onChange:s=>r({...t,tlsCertFile:s.target.value}),className:"form-input",placeholder:"/var/lib/marzban/certs/fullchain.pem"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Key File (.key)"}),e.jsx("input",{type:"text",value:t.tlsKeyFile,onChange:s=>r({...t,tlsKeyFile:s.target.value}),className:"form-input",placeholder:"/var/lib/marzban/certs/privkey.pem"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Usage"}),e.jsxs("select",{value:t.tlsUsage,onChange:s=>r({...t,tlsUsage:s.target.value}),className:"form-input",children:[e.jsx("option",{value:"encipherment",children:"encipherment"}),e.jsx("option",{value:"verify",children:"verify"}),e.jsx("option",{value:"issue",children:"issue"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"OCSP Stapling (seconds)"}),e.jsx("input",{type:"number",value:t.tlsOcsp,onChange:s=>r({...t,tlsOcsp:s.target.value}),className:"form-input"})]})]})]}),e.jsxs("div",{className:"grid-2",style:{marginTop:"8px"},children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:[e.jsx("input",{type:"checkbox",checked:t.tlsRejectUnknownSni,onChange:()=>n("tlsRejectUnknownSni")}),"Reject Unknown SNI"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:[e.jsx("input",{type:"checkbox",checked:t.tlsDisableSystemRoot,onChange:()=>n("tlsDisableSystemRoot")}),"Disable System Root"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:[e.jsx("input",{type:"checkbox",checked:t.tlsSessionResumption,onChange:()=>n("tlsSessionResumption")}),"Enable Session Resumption"]})]}),e.jsxs("div",{className:"form-group",style:{marginTop:"20px"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:e.jsx("label",{className:"form-label",style:{margin:0},children:"Cipher Suites"})}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"8px",background:"rgba(0,0,0,0.1)",padding:"12px",borderRadius:"8px",border:"1px solid var(--border-color)",maxHeight:"300px",overflowY:"auto"},children:hc.map(s=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-white/5 p-1 rounded transition-colors",style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:[e.jsx("input",{type:"checkbox",checked:o.includes(s),onChange:()=>a(s),style:{accentColor:"var(--accent-color)"}}),e.jsx("span",{style:{wordBreak:"break-all"},children:s})]},s))}),e.jsxs("p",{style:{marginTop:"6px",fontSize:"0.75rem",color:"var(--text-muted)"},children:["Selected: ",o.length," cipher(s)"]})]})]})},tt=({headers:t=[],onChange:r,title:n="Headers"})=>{const a=()=>{r([...t,{key:"",value:""}])},o=i=>{const c=t.filter((l,u)=>u!==i);r(c)},s=(i,c,l)=>{const u=[...t];u[i][c]=l,r(u)};return e.jsxs("div",{className:"card card-body",style:{background:"rgba(0,0,0,0.1)",padding:"12px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsx("label",{className:"form-label",style:{margin:0},children:n}),e.jsx("button",{type:"button",onClick:a,className:"btn btn-secondary",style:{fontSize:"0.75rem",padding:"4px 8px",height:"auto"},children:"+ Add"})]}),t.length===0&&e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)",textAlign:"center",padding:"8px"},children:"No headers defined."}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:t.map((i,c)=>e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("input",{type:"text",placeholder:"Key",value:i.key,onChange:l=>s(c,"key",l.target.value),className:"form-input",style:{flex:1,fontSize:"0.85rem",padding:"8px"}}),e.jsx("input",{type:"text",placeholder:"Value",value:i.value,onChange:l=>s(c,"value",l.target.value),className:"form-input",style:{flex:1,fontSize:"0.85rem",padding:"8px"}}),e.jsx("button",{type:"button",onClick:()=>o(c),className:"btn btn-danger",style:{padding:"0 10px"},children:""})]},c))})]})},vr=({list:t=[],onChange:r,title:n="Values",placeholder:a="Value",onGenerate:o})=>{const s=()=>r([...t,""]),i=l=>r(t.filter((u,d)=>d!==l)),c=(l,u)=>{const d=[...t];d[l]=u,r(d)};return e.jsxs("div",{className:"card card-body",style:{background:"rgba(0,0,0,0.1)",padding:"12px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsx("label",{className:"form-label",style:{margin:0},children:n}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[o&&e.jsx("button",{type:"button",onClick:o,className:"btn btn-primary",style:{fontSize:"0.75rem",padding:"4px 8px",height:"auto",background:"#8b5cf6",borderColor:"#7c3aed"},children:"Generate"}),e.jsx("button",{type:"button",onClick:s,className:"btn btn-secondary",style:{fontSize:"0.75rem",padding:"4px 8px",height:"auto"},children:"+ Add"})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[t.length===0&&e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)",textAlign:"center",padding:"4px"},children:"No items."}),t.map((l,u)=>e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("input",{type:"text",placeholder:a,value:l,onChange:d=>c(u,d.target.value),className:"form-input",style:{flex:1,fontSize:"0.85rem",padding:"8px"}}),e.jsx("button",{type:"button",onClick:()=>i(u),className:"btn btn-danger",style:{padding:"0 10px"},children:""})]},u))]})]})},lr=({formData:t,setFormData:r,tab:n})=>{const o=["tcp","grpc","splithttp","xhttp"].includes(t.network);m.useEffect(()=>{!o&&t.security==="reality"&&r(l=>({...l,security:"none"}))},[t.network]);const s=()=>{const l=new Uint8Array(32);window.crypto.getRandomValues(l);let u="";for(let d=0;d<l.length;d++)u+=String.fromCharCode(l[d]);return btoa(u).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},i=()=>{r(l=>({...l,realityPrivateKey:s(),realityPublicKey:s()}))},c=()=>{const l=[...Array(16)].map(()=>Math.floor(Math.random()*16).toString(16)).join(""),d=[...Array.isArray(t.realityShortIds)?t.realityShortIds:[],l];r(p=>({...p,realityShortIds:d}))};return n==="transport"?e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Network"}),e.jsxs("select",{value:t.network,onChange:l=>r({...t,network:l.target.value}),className:"form-input",children:[e.jsx("option",{value:"tcp",children:"TCP"}),e.jsx("option",{value:"ws",children:"WebSocket"}),e.jsx("option",{value:"httpupgrade",children:"HTTPUpgrade"}),e.jsx("option",{value:"splithttp",children:"SplitHTTP"}),e.jsx("option",{value:"xhttp",children:"XHTTP"}),e.jsx("option",{value:"grpc",children:"gRPC"}),e.jsx("option",{value:"http",children:"HTTP/2"}),e.jsx("option",{value:"kcp",children:"mKCP"})]})]}),t.network==="tcp"&&e.jsxs("div",{className:"card card-body",style:{gridColumn:"1 / -1",background:"rgba(0,0,0,0.2)"},children:[e.jsx("h4",{style:{marginBottom:"12px",color:"#3b82f6"},children:"TCP Settings"}),e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Header Type"}),e.jsxs("select",{value:t.tcpHeaderType,onChange:l=>r({...t,tcpHeaderType:l.target.value}),className:"form-input",children:[e.jsx("option",{value:"none",children:"None"}),e.jsx("option",{value:"http",children:"HTTP"})]})]}),e.jsx("div",{className:"form-group",style:{display:"flex",alignItems:"center",paddingTop:"28px"},children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",style:{color:"var(--text-secondary)"},children:[e.jsx("input",{type:"checkbox",checked:t.tcpAcceptProxyProtocol,onChange:l=>r({...t,tcpAcceptProxyProtocol:l.target.checked})}),"Accept Proxy Protocol"]})})]}),t.tcpHeaderType==="http"&&e.jsxs("div",{style:{marginTop:"12px",display:"grid",gap:"12px"},children:[e.jsxs("div",{className:"card card-body",style:{background:"rgba(255,255,255,0.03)"},children:[e.jsx("h5",{style:{marginBottom:"12px",color:"var(--text-primary)"},children:"HTTP Request"}),e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Version"}),e.jsx("input",{type:"text",value:t.tcpReqVersion,onChange:l=>r({...t,tcpReqVersion:l.target.value}),className:"form-input",placeholder:"1.1"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Method"}),e.jsx("input",{type:"text",value:t.tcpReqMethod,onChange:l=>r({...t,tcpReqMethod:l.target.value}),className:"form-input",placeholder:"GET"})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Path"}),e.jsx("input",{type:"text",value:t.tcpReqPath,onChange:l=>r({...t,tcpReqPath:l.target.value}),className:"form-input",placeholder:"/"})]})]}),e.jsx("div",{className:"form-group",style:{marginTop:"10px"},children:e.jsx(tt,{headers:t.tcpReqHeaders,onChange:l=>r({...t,tcpReqHeaders:l}),title:"Request Headers"})})]}),e.jsxs("div",{className:"card card-body",style:{background:"rgba(255,255,255,0.03)"},children:[e.jsx("h5",{style:{marginBottom:"12px",color:"var(--text-primary)"},children:"HTTP Response"}),e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Version"}),e.jsx("input",{type:"text",value:t.tcpResVersion,onChange:l=>r({...t,tcpResVersion:l.target.value}),className:"form-input",placeholder:"1.1"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsx("input",{type:"text",value:t.tcpResStatus,onChange:l=>r({...t,tcpResStatus:l.target.value}),className:"form-input",placeholder:"200"})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Reason"}),e.jsx("input",{type:"text",value:t.tcpResReason,onChange:l=>r({...t,tcpResReason:l.target.value}),className:"form-input",placeholder:"OK"})]})]}),e.jsx("div",{className:"form-group",style:{marginTop:"10px"},children:e.jsx(tt,{headers:t.tcpResHeaders,onChange:l=>r({...t,tcpResHeaders:l}),title:"Response Headers"})})]})]})]}),t.network==="kcp"&&e.jsxs("div",{className:"card card-body",style:{gridColumn:"1 / -1",background:"rgba(0,0,0,0.2)"},children:[e.jsx("h4",{style:{marginBottom:"12px",color:"#eab308"},children:"mKCP Settings"}),e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"MTU"}),e.jsx("input",{type:"number",value:t.kcpMtu,onChange:l=>r({...t,kcpMtu:l.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"TTI"}),e.jsx("input",{type:"number",value:t.kcpTti,onChange:l=>r({...t,kcpTti:l.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Uplink (MB/s)"}),e.jsx("input",{type:"number",value:t.kcpUplink,onChange:l=>r({...t,kcpUplink:l.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Downlink (MB/s)"}),e.jsx("input",{type:"number",value:t.kcpDownlink,onChange:l=>r({...t,kcpDownlink:l.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Read Buffer"}),e.jsx("input",{type:"number",value:t.kcpReadBuffer,onChange:l=>r({...t,kcpReadBuffer:l.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Write Buffer"}),e.jsx("input",{type:"number",value:t.kcpWriteBuffer,onChange:l=>r({...t,kcpWriteBuffer:l.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Seed"}),e.jsx("input",{type:"text",value:t.kcpSeed,onChange:l=>r({...t,kcpSeed:l.target.value}),className:"form-input",placeholder:"Password"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Header Type"}),e.jsxs("select",{value:t.kcpHeaderType,onChange:l=>r({...t,kcpHeaderType:l.target.value}),className:"form-input",children:[e.jsx("option",{value:"none",children:"None"}),e.jsx("option",{value:"srtp",children:"SRTP"}),e.jsx("option",{value:"utp",children:"uTP"}),e.jsx("option",{value:"wechat-video",children:"WeChat Video"}),e.jsx("option",{value:"dtls",children:"DTLS"}),e.jsx("option",{value:"wireguard",children:"WireGuard"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Header Domain"}),e.jsx("input",{type:"text",value:t.kcpDomain,onChange:l=>r({...t,kcpDomain:l.target.value}),className:"form-input",placeholder:"example.com"})]}),e.jsx("div",{className:"form-group",style:{display:"flex",alignItems:"center"},children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",style:{color:"var(--text-secondary)"},children:[e.jsx("input",{type:"checkbox",checked:t.kcpCongestion,onChange:l=>r({...t,kcpCongestion:l.target.checked})})," Congestion"]})})]})]}),t.network==="ws"&&e.jsxs("div",{className:"card card-body",style:{gridColumn:"1 / -1",background:"rgba(0,0,0,0.2)"},children:[e.jsx("h4",{style:{marginBottom:"12px",color:"#3b82f6"},children:"WebSocket Settings"}),e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Path"}),e.jsx("input",{type:"text",value:t.wsPath,onChange:l=>r({...t,wsPath:l.target.value}),className:"form-input",placeholder:"/"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Host"}),e.jsx("input",{type:"text",value:t.wsHost,onChange:l=>r({...t,wsHost:l.target.value}),className:"form-input",placeholder:"example.com"})]}),e.jsx("div",{className:"form-group",style:{display:"flex",alignItems:"center"},children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",style:{color:"var(--text-secondary)"},children:[e.jsx("input",{type:"checkbox",checked:t.wsAcceptProxyProtocol,onChange:l=>r({...t,wsAcceptProxyProtocol:l.target.checked})})," Accept Proxy Protocol"]})})]}),e.jsx("div",{className:"form-group",style:{marginTop:"10px"},children:e.jsx(tt,{headers:t.wsHeaders,onChange:l=>r({...t,wsHeaders:l})})})]}),t.network==="httpupgrade"&&e.jsxs("div",{className:"card card-body",style:{gridColumn:"1 / -1",background:"rgba(0,0,0,0.2)"},children:[e.jsx("h4",{style:{marginBottom:"12px",color:"#ec4899"},children:"HTTPUpgrade Settings"}),e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Path"}),e.jsx("input",{type:"text",value:t.httpUpgradePath,onChange:l=>r({...t,httpUpgradePath:l.target.value}),className:"form-input",placeholder:"/"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Host"}),e.jsx("input",{type:"text",value:t.httpUpgradeHost,onChange:l=>r({...t,httpUpgradeHost:l.target.value}),className:"form-input",placeholder:"example.com"})]}),e.jsx("div",{className:"form-group",style:{display:"flex",alignItems:"center"},children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",style:{color:"var(--text-secondary)"},children:[e.jsx("input",{type:"checkbox",checked:t.httpUpgradeAcceptProxyProtocol,onChange:l=>r({...t,httpUpgradeAcceptProxyProtocol:l.target.checked})})," Accept Proxy Protocol"]})})]}),e.jsx("div",{className:"form-group",style:{marginTop:"10px"},children:e.jsx(tt,{headers:t.httpUpgradeHeaders,onChange:l=>r({...t,httpUpgradeHeaders:l})})})]}),t.network==="splithttp"&&e.jsxs("div",{className:"card card-body",style:{gridColumn:"1 / -1",background:"rgba(0,0,0,0.2)"},children:[e.jsx("h4",{style:{marginBottom:"12px",color:"#06b6d4"},children:"SplitHTTP Settings"}),e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Path"}),e.jsx("input",{type:"text",value:t.splitHttpPath,onChange:l=>r({...t,splitHttpPath:l.target.value}),className:"form-input",placeholder:"/"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Host"}),e.jsx("input",{type:"text",value:t.splitHttpHost,onChange:l=>r({...t,splitHttpHost:l.target.value}),className:"form-input",placeholder:"example.com"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Mode"}),e.jsx("input",{type:"text",value:t.splitHttpMode,onChange:l=>r({...t,splitHttpMode:l.target.value}),className:"form-input",placeholder:"auto"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"X Padding Bytes"}),e.jsx("input",{type:"text",value:t.splitHttpXPaddingBytes,onChange:l=>r({...t,splitHttpXPaddingBytes:l.target.value}),className:"form-input",placeholder:"100-1000"})]})]}),e.jsx("div",{className:"form-group",style:{marginTop:"12px"},children:e.jsx(tt,{headers:t.splitHttpHeaders,onChange:l=>r({...t,splitHttpHeaders:l})})}),e.jsxs("div",{className:"card card-body",style:{background:"rgba(255,255,255,0.03)",marginTop:"12px"},children:[e.jsx("h5",{style:{marginBottom:"10px",color:"var(--text-secondary)"},children:"Upload Config"}),e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Max Concurrent"}),e.jsx("input",{type:"text",value:t.splitHttpScMaxConcurrentPosts,onChange:l=>r({...t,splitHttpScMaxConcurrentPosts:l.target.value}),className:"form-input",placeholder:"100-200"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Max Post Bytes"}),e.jsx("input",{type:"text",value:t.splitHttpScMaxEachPostBytes,onChange:l=>r({...t,splitHttpScMaxEachPostBytes:l.target.value}),className:"form-input",placeholder:"1000000-2000000"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Min Interval (ms)"}),e.jsx("input",{type:"text",value:t.splitHttpScMinPostsIntervalMs,onChange:l=>r({...t,splitHttpScMinPostsIntervalMs:l.target.value}),className:"form-input",placeholder:"10-50"})]})]})]}),e.jsxs("div",{className:"card card-body",style:{background:"rgba(255,255,255,0.03)",marginTop:"12px"},children:[e.jsx("h5",{style:{marginBottom:"10px",color:"var(--text-secondary)"},children:"XMUX"}),e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Max Concurrency"}),e.jsx("input",{type:"text",value:t.splitHttpXmuxMaxConcurrency,onChange:l=>r({...t,splitHttpXmuxMaxConcurrency:l.target.value}),className:"form-input",placeholder:"16-32"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Max Connections"}),e.jsx("input",{type:"number",value:t.splitHttpXmuxMaxConnections,onChange:l=>r({...t,splitHttpXmuxMaxConnections:l.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Reuse Times"}),e.jsx("input",{type:"text",value:t.splitHttpXmuxCMaxReuseTimes,onChange:l=>r({...t,splitHttpXmuxCMaxReuseTimes:l.target.value}),className:"form-input",placeholder:"64-128"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Lifetime (ms)"}),e.jsx("input",{type:"number",value:t.splitHttpXmuxCMaxLifetimeMs,onChange:l=>r({...t,splitHttpXmuxCMaxLifetimeMs:l.target.value}),className:"form-input"})]})]})]}),e.jsxs("div",{className:"grid-2",style:{marginTop:"12px"},children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",style:{color:"var(--text-secondary)"},children:[e.jsx("input",{type:"checkbox",checked:t.splitHttpNoSSEHeader,onChange:l=>r({...t,splitHttpNoSSEHeader:l.target.checked})})," No SSE Header"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",style:{color:"var(--text-secondary)"},children:[e.jsx("input",{type:"checkbox",checked:t.splitHttpNoGRPCHeader,onChange:l=>r({...t,splitHttpNoGRPCHeader:l.target.checked})})," No GRPC Header"]})]})]}),t.network==="http"&&e.jsxs("div",{className:"card card-body",style:{gridColumn:"1 / -1",background:"rgba(0,0,0,0.2)"},children:[e.jsx("h4",{style:{marginBottom:"12px",color:"#10b981"},children:"HTTP/2 Settings"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Path"}),e.jsx("input",{type:"text",value:t.httpPath,onChange:l=>r({...t,httpPath:l.target.value}),className:"form-input",placeholder:"/path"})]}),e.jsx("div",{className:"form-group",style:{marginTop:"12px"},children:e.jsx(vr,{list:t.httpHost,onChange:l=>r({...t,httpHost:l}),placeholder:"example.com",title:"Hosts"})})]}),t.network==="grpc"&&e.jsxs("div",{className:"card card-body",style:{gridColumn:"1 / -1",background:"rgba(0,0,0,0.2)"},children:[e.jsx("h4",{style:{marginBottom:"12px",color:"#8b5cf6"},children:"gRPC Settings"}),e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Service Name"}),e.jsx("input",{type:"text",value:t.grpcServiceName,onChange:l=>r({...t,grpcServiceName:l.target.value}),className:"form-input",placeholder:"ServiceName"})]}),e.jsx("div",{className:"form-group",style:{display:"flex",alignItems:"center",paddingTop:"28px"},children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",style:{color:"var(--text-secondary)"},children:[e.jsx("input",{type:"checkbox",checked:t.grpcMultiMode,onChange:l=>r({...t,grpcMultiMode:l.target.checked})})," Multi Mode"]})})]})]}),t.network==="xhttp"&&e.jsxs("div",{className:"card card-body",style:{gridColumn:"1 / -1",background:"rgba(0,0,0,0.2)"},children:[e.jsx("h4",{style:{marginBottom:"12px",color:"#14b8a6"},children:"XHTTP Settings"}),e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Path"}),e.jsx("input",{type:"text",value:t.xhttpPath,onChange:l=>r({...t,xhttpPath:l.target.value}),className:"form-input",placeholder:"/path"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Host"}),e.jsx("input",{type:"text",value:t.xhttpHost,onChange:l=>r({...t,xhttpHost:l.target.value}),className:"form-input",placeholder:"hostname"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Mode"}),e.jsx("input",{type:"text",value:t.xhttpMode,onChange:l=>r({...t,xhttpMode:l.target.value}),className:"form-input",placeholder:"auto"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"X Padding Bytes"}),e.jsx("input",{type:"text",value:t.xhttpXPaddingBytes,onChange:l=>r({...t,xhttpXPaddingBytes:l.target.value}),className:"form-input",placeholder:"100-1000"})]})]}),e.jsx("div",{className:"form-group",style:{marginTop:"12px"},children:e.jsx(tt,{headers:t.xhttpHeaders,onChange:l=>r({...t,xhttpHeaders:l})})}),e.jsx("div",{className:"form-group",style:{marginTop:"8px"},children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",style:{color:"var(--text-secondary)"},children:[e.jsx("input",{type:"checkbox",checked:t.xhttpNoSSEHeader,onChange:l=>r({...t,xhttpNoSSEHeader:l.target.checked})})," No SSE Header"]})})]})]}):n==="security"?e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Security"}),e.jsxs("select",{value:t.security,onChange:l=>r({...t,security:l.target.value}),className:"form-input",children:[e.jsx("option",{value:"none",children:"None"}),e.jsx("option",{value:"tls",children:"TLS"}),o&&e.jsx("option",{value:"reality",children:"REALITY"})]})]}),t.security==="tls"&&e.jsx(xc,{formData:t,setFormData:r}),t.security==="reality"&&o&&e.jsxs("div",{className:"card card-body",style:{gridColumn:"1 / -1",background:"rgba(0,0,0,0.2)"},children:[e.jsx("h4",{style:{marginBottom:"12px",color:"#8b5cf6"},children:"REALITY Settings"}),e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Dest"}),e.jsx("input",{placeholder:"example.com:443",value:t.realityDest,onChange:l=>r({...t,realityDest:l.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Fingerprint"}),e.jsxs("select",{value:t.realityFingerprint,onChange:l=>r({...t,realityFingerprint:l.target.value}),className:"form-input",children:[e.jsx("option",{value:"chrome",children:"Chrome"}),e.jsx("option",{value:"firefox",children:"Firefox"}),e.jsx("option",{value:"safari",children:"Safari"}),e.jsx("option",{value:"ios",children:"iOS"}),e.jsx("option",{value:"android",children:"Android"}),e.jsx("option",{value:"edge",children:"Edge"}),e.jsx("option",{value:"360",children:"360"}),e.jsx("option",{value:"qq",children:"QQ"}),e.jsx("option",{value:"random",children:"Random"}),e.jsx("option",{value:"randomized",children:"Randomized"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"SpiderX"}),e.jsx("input",{placeholder:"/",value:t.realitySpiderX,onChange:l=>r({...t,realitySpiderX:l.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Xver"}),e.jsx("input",{type:"number",placeholder:"0",value:t.realityXver,onChange:l=>r({...t,realityXver:l.target.value}),className:"form-input"})]})]}),e.jsx("div",{className:"form-group",style:{marginTop:"12px"},children:e.jsx(vr,{title:"Server Names (SNI)",placeholder:"example.com",list:t.realityServerNames||[],onChange:l=>r({...t,realityServerNames:l})})}),e.jsxs("div",{className:"card card-body",style:{background:"rgba(255,255,255,0.03)",marginTop:"12px"},children:[e.jsx("h5",{style:{marginBottom:"10px",color:"var(--text-primary)"},children:"Key Pair"}),e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[e.jsx("label",{className:"form-label",style:{margin:0},children:"Private Key"}),e.jsx("button",{type:"button",onClick:i,className:"btn btn-primary",style:{fontSize:"0.75rem",padding:"4px 8px",height:"auto",background:"#8b5cf6",borderColor:"#7c3aed"},children:"Generate Key Pair"})]}),e.jsx("input",{value:t.realityPrivateKey,onChange:l=>r({...t,realityPrivateKey:l.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Public Key"}),e.jsx("input",{value:t.realityPublicKey,onChange:l=>r({...t,realityPublicKey:l.target.value}),className:"form-input",readOnly:!0,style:{opacity:.7}})]})]})]}),e.jsx("div",{className:"form-group",style:{marginTop:"12px"},children:e.jsx(vr,{title:"Short IDs",placeholder:"16-char hex",list:t.realityShortIds||[],onChange:l=>r({...t,realityShortIds:l}),onGenerate:c})})]})]}):n==="socket"?e.jsx("div",{className:"card card-body",style:{background:"rgba(0,0,0,0.2)"},children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"TProxy"}),e.jsxs("select",{value:t.sockTproxy,onChange:l=>r({...t,sockTproxy:l.target.value}),className:"form-input",children:[e.jsx("option",{value:"off",children:"Off"}),e.jsx("option",{value:"tproxy",children:"TProxy"}),e.jsx("option",{value:"redirect",children:"Redirect"})]})]})}):null},rt=t=>t?Object.entries(t).map(([r,n])=>({key:r,value:n})):[],st=t=>{const r={};return t&&t.forEach(n=>{n.key&&n.key.trim()!==""&&(r[n.key.trim()]=n.value)}),r},mc=(t,r)=>{var g,b,S,k,w,C,E,y,R,P,T,I,_,A,F,V,U,O,K,X,q;const n=(g=t==null?void 0:t.streamSettings)==null?void 0:g.tlsSettings,a=((b=n==null?void 0:n.certificates)==null?void 0:b[0])||{},o=((S=t==null?void 0:t.streamSettings)==null?void 0:S.realitySettings)||{},s=((k=t==null?void 0:t.streamSettings)==null?void 0:k.wsSettings)||{},i=((w=t==null?void 0:t.streamSettings)==null?void 0:w.tcpSettings)||{},c=((C=i==null?void 0:i.header)==null?void 0:C.request)||{},l=((E=i==null?void 0:i.header)==null?void 0:E.response)||{},u=((y=t==null?void 0:t.streamSettings)==null?void 0:y.kcpSettings)||{},d=((R=t==null?void 0:t.streamSettings)==null?void 0:R.grpcSettings)||{},p=((P=t==null?void 0:t.streamSettings)==null?void 0:P.httpupgradeSettings)||{},h=((T=t==null?void 0:t.streamSettings)==null?void 0:T.splithttpSettings)||{},f=h.xmux||{},x=((I=t==null?void 0:t.streamSettings)==null?void 0:I.xhttpSettings)||{},v=((_=t==null?void 0:t.streamSettings)==null?void 0:_.httpSettings)||{};return{tag:(t==null?void 0:t.tag)||"",port:(t==null?void 0:t.port)||8080,listen:(t==null?void 0:t.listen)||"0.0.0.0",protocol:"vless",network:((A=t==null?void 0:t.streamSettings)==null?void 0:A.network)||"tcp",security:((F=t==null?void 0:t.streamSettings)==null?void 0:F.security)||"none",tcpAcceptProxyProtocol:i.acceptProxyProtocol||!1,tcpHeaderType:((V=i.header)==null?void 0:V.type)||"none",tcpReqVersion:c.version||"1.1",tcpReqMethod:c.method||"GET",tcpReqPath:((U=c.path)==null?void 0:U.join(","))||"/",tcpReqHeaders:rt(c.headers),tcpResVersion:l.version||"1.1",tcpResStatus:l.status||"200",tcpResReason:l.reason||"OK",tcpResHeaders:rt(l.headers),kcpMtu:u.mtu||1350,kcpTti:u.tti||50,kcpUplink:u.uplinkCapacity||5,kcpDownlink:u.downlinkCapacity||20,kcpCongestion:u.congestion||!1,kcpReadBuffer:u.readBufferSize||2,kcpWriteBuffer:u.writeBufferSize||2,kcpHeaderType:((O=u.header)==null?void 0:O.type)||"none",kcpSeed:u.seed||"",kcpDomain:((K=u.header)==null?void 0:K.domain)||"",grpcServiceName:d.serviceName||"",grpcMultiMode:d.multiMode||!1,httpPath:v.path||"/",httpHost:v.host||[],httpUpgradePath:p.path||"/",httpUpgradeHost:p.host||"",httpUpgradeAcceptProxyProtocol:p.acceptProxyProtocol||!1,httpUpgradeHeaders:rt(p.headers),splitHttpPath:h.path||"/",splitHttpHost:h.host||"",splitHttpHeaders:rt(h.headers),splitHttpMode:h.mode||"auto",splitHttpScMaxConcurrentPosts:h.scMaxConcurrentPosts||"100-200",splitHttpScMaxEachPostBytes:h.scMaxEachPostBytes||"1000000-2000000",splitHttpScMinPostsIntervalMs:h.scMinPostsIntervalMs||"10-50",splitHttpXPaddingBytes:h.xPaddingBytes||"100-1000",splitHttpNoSSEHeader:h.noSSEHeader||!1,splitHttpNoGRPCHeader:h.noGRPCHeader||!1,splitHttpXmuxMaxConcurrency:f.maxConcurrency||"16-32",splitHttpXmuxMaxConnections:f.maxConnections||0,splitHttpXmuxCMaxReuseTimes:f.cMaxReuseTimes||"64-128",splitHttpXmuxCMaxLifetimeMs:f.cMaxLifetimeMs||0,xhttpPath:x.path||"",xhttpHost:x.host||"",xhttpHeaders:rt(x.headers),xhttpNoSSEHeader:x.noSSEHeader||!1,xhttpXPaddingBytes:x.xPaddingBytes||"100-1000",xhttpMode:x.mode||"auto",tlsServerName:(n==null?void 0:n.serverName)||"",tlsMinVersion:(n==null?void 0:n.minVersion)||"1.0",tlsMaxVersion:(n==null?void 0:n.maxVersion)||"1.3",tlsCipherSuites:(n==null?void 0:n.cipherSuites)||"TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-RSA-AES128-SHA:ECDHE-RSA-AES256-SHA:RSA-AES128-GCM-SHA256:RSA-AES256-GCM-SHA384:RSA-AES128-SHA:RSA-AES256-SHA",tlsRejectUnknownSni:(n==null?void 0:n.rejectUnknownSni)||!1,tlsDisableSystemRoot:(n==null?void 0:n.disableSystemRoot)||!1,tlsSessionResumption:(n==null?void 0:n.enableSessionResumption)||!1,tlsAlpn:((X=n==null?void 0:n.alpn)==null?void 0:X.join(","))||"h2,http/1.1",tlsCertFile:a.certificateFile||(r==null?void 0:r.certificateFile)||"/var/lib/marzban/certs/fullchain.pem",tlsKeyFile:a.keyFile||(r==null?void 0:r.keyFile)||"/var/lib/marzban/certs/privkey.pem",tlsOcsp:a.ocspStapling||3600,tlsUsage:a.usage||"encipherment",wsAcceptProxyProtocol:s.acceptProxyProtocol||!1,wsPath:s.path||"/",wsHost:((q=s.headers)==null?void 0:q.Host)||"",wsHeaders:rt(s.headers),realityDest:o.dest||"",realityServerNames:o.serverNames||[],realityPrivateKey:o.privateKey||"",realityPublicKey:o.publicKey||"",realityShortIds:o.shortIds||[],realitySpiderX:o.spiderX||"/",realityFingerprint:o.fingerprint||"chrome",realityXver:o.xver||0}};function js({initialData:t,defaultCert:r,onClose:n,onSave:a,saving:o}){const[s,i]=m.useState(mc(t,r)),[c,l]=m.useState("general");m.useEffect(()=>{if(!t){const d=s.network.toUpperCase(),p=s.security!=="none"?`+${s.security.toUpperCase()}`:"",h=`VLESS+${d}${p}+${s.port}`;i(f=>({...f,tag:h}))}},[s.network,s.security,s.port]);const u=d=>{d.preventDefault();const p={network:s.network,security:s.security};if(s.network==="tcp"){const f={acceptProxyProtocol:s.tcpAcceptProxyProtocol,header:{type:s.tcpHeaderType}};s.tcpHeaderType==="http"&&(f.header.request={version:s.tcpReqVersion,method:s.tcpReqMethod,path:s.tcpReqPath.split(",").map(x=>x.trim()).filter(x=>x),headers:st(s.tcpReqHeaders)},f.header.response={version:s.tcpResVersion,status:s.tcpResStatus,reason:s.tcpResReason,headers:st(s.tcpResHeaders)}),p.tcpSettings=f}if(s.network==="kcp"&&(p.kcpSettings={mtu:parseInt(s.kcpMtu),tti:parseInt(s.kcpTti),uplinkCapacity:parseInt(s.kcpUplink),downlinkCapacity:parseInt(s.kcpDownlink),congestion:s.kcpCongestion,readBufferSize:parseInt(s.kcpReadBuffer),writeBufferSize:parseInt(s.kcpWriteBuffer),header:{type:s.kcpHeaderType,domain:s.kcpDomain||void 0},seed:s.kcpSeed||void 0}),s.network==="ws"){const f=st(s.wsHeaders);s.wsHost&&(f.Host=s.wsHost),p.wsSettings={acceptProxyProtocol:s.wsAcceptProxyProtocol,path:s.wsPath,headers:f}}s.network==="grpc"&&(p.grpcSettings={serviceName:s.grpcServiceName,multiMode:s.grpcMultiMode}),s.network==="httpupgrade"&&(p.httpupgradeSettings={acceptProxyProtocol:s.httpUpgradeAcceptProxyProtocol,path:s.httpUpgradePath,host:s.httpUpgradeHost,headers:st(s.httpUpgradeHeaders)}),s.network==="splithttp"&&(p.splithttpSettings={path:s.splitHttpPath,host:s.splitHttpHost,headers:st(s.splitHttpHeaders),scMaxConcurrentPosts:s.splitHttpScMaxConcurrentPosts,scMaxEachPostBytes:s.splitHttpScMaxEachPostBytes,scMinPostsIntervalMs:s.splitHttpScMinPostsIntervalMs,xPaddingBytes:s.splitHttpXPaddingBytes,noSSEHeader:s.splitHttpNoSSEHeader,noGRPCHeader:s.splitHttpNoGRPCHeader,mode:s.splitHttpMode,xmux:{maxConcurrency:s.splitHttpXmuxMaxConcurrency,maxConnections:parseInt(s.splitHttpXmuxMaxConnections),cMaxReuseTimes:s.splitHttpXmuxCMaxReuseTimes,cMaxLifetimeMs:parseInt(s.splitHttpXmuxCMaxLifetimeMs)}}),s.network==="xhttp"&&(p.xhttpSettings={path:s.xhttpPath,host:s.xhttpHost,headers:st(s.xhttpHeaders),noSSEHeader:s.xhttpNoSSEHeader,xPaddingBytes:s.xhttpXPaddingBytes,mode:s.xhttpMode}),s.network==="http"&&(p.httpSettings={path:s.httpPath,host:s.httpHost}),s.security==="tls"&&(p.tlsSettings={serverName:s.tlsServerName,minVersion:s.tlsMinVersion,maxVersion:s.tlsMaxVersion,cipherSuites:s.tlsCipherSuites,rejectUnknownSni:s.tlsRejectUnknownSni,disableSystemRoot:s.tlsDisableSystemRoot,enableSessionResumption:s.tlsSessionResumption,alpn:s.tlsAlpn.split(",").map(f=>f.trim()).filter(f=>f),certificates:[{certificateFile:s.tlsCertFile,keyFile:s.tlsKeyFile,ocspStapling:parseInt(s.tlsOcsp),usage:s.tlsUsage,buildChain:!1}]}),s.security==="reality"&&(p.realitySettings={show:!0,dest:s.realityDest,xver:parseInt(s.realityXver),serverNames:s.realityServerNames.filter(f=>f&&f.trim()!==""),privateKey:s.realityPrivateKey,publicKey:s.realityPublicKey,shortIds:s.realityShortIds.filter(f=>f&&f.trim()!==""),spiderX:s.realitySpiderX,fingerprint:s.realityFingerprint});const h={tag:s.tag,listen:s.listen,port:parseInt(s.port),protocol:"vless",settings:{clients:[],decryption:"none"},streamSettings:p,sniffing:{enabled:!0,destOverride:["http","tls","quic","fakedns"],metadataOnly:!1,routeOnly:!1}};a(h)};return e.jsxs("form",{onSubmit:u,style:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx("div",{className:"nav-tabs",style:{borderRadius:"0",borderBottom:"1px solid var(--border-color)",margin:0,padding:"8px 16px 0"},children:["general","transport","security"].map(d=>e.jsx("button",{type:"button",onClick:()=>l(d),className:`nav-link ${c===d?"active":""}`,style:{textTransform:"capitalize",borderRadius:"8px 8px 0 0",borderBottom:c===d?"none":"1px solid transparent",padding:"10px 16px",cursor:"pointer"},children:d},d))}),e.jsxs("div",{className:"modal-body",style:{flex:1,overflowY:"auto",padding:"24px"},children:[c==="general"&&e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Tag"}),e.jsx("input",{type:"text",value:s.tag,onChange:d=>i({...s,tag:d.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Port"}),e.jsx("input",{type:"number",value:s.port,onChange:d=>i({...s,port:d.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Listen IP"}),e.jsx("input",{type:"text",value:s.listen,onChange:d=>i({...s,listen:d.target.value}),className:"form-input",placeholder:"0.0.0.0"})]})]}),e.jsx(lr,{tab:c,formData:s,setFormData:i})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:o,children:"Save VLESS"})]})]})}const nt=t=>t?Object.entries(t).map(([r,n])=>({key:r,value:n})):[],at=t=>{const r={};return t&&t.forEach(n=>{n.key&&n.key.trim()!==""&&(r[n.key.trim()]=n.value)}),r},fc=(t,r)=>{var g,b,S,k,w,C,E,y,R,P,T,I,_,A,F,V,U,O,K,X,q;const n=(g=t==null?void 0:t.streamSettings)==null?void 0:g.tlsSettings,a=((b=n==null?void 0:n.certificates)==null?void 0:b[0])||{},o=((S=t==null?void 0:t.streamSettings)==null?void 0:S.realitySettings)||{},s=((k=t==null?void 0:t.streamSettings)==null?void 0:k.wsSettings)||{},i=((w=t==null?void 0:t.streamSettings)==null?void 0:w.tcpSettings)||{},c=((C=i==null?void 0:i.header)==null?void 0:C.request)||{},l=((E=i==null?void 0:i.header)==null?void 0:E.response)||{},u=((y=t==null?void 0:t.streamSettings)==null?void 0:y.kcpSettings)||{},d=((R=t==null?void 0:t.streamSettings)==null?void 0:R.grpcSettings)||{},p=((P=t==null?void 0:t.streamSettings)==null?void 0:P.httpupgradeSettings)||{},h=((T=t==null?void 0:t.streamSettings)==null?void 0:T.splithttpSettings)||{},f=h.xmux||{},x=((I=t==null?void 0:t.streamSettings)==null?void 0:I.xhttpSettings)||{},v=((_=t==null?void 0:t.streamSettings)==null?void 0:_.httpSettings)||{};return{tag:(t==null?void 0:t.tag)||"",port:(t==null?void 0:t.port)||10086,listen:(t==null?void 0:t.listen)||"0.0.0.0",protocol:"vmess",network:((A=t==null?void 0:t.streamSettings)==null?void 0:A.network)||"tcp",security:((F=t==null?void 0:t.streamSettings)==null?void 0:F.security)||"none",tcpAcceptProxyProtocol:i.acceptProxyProtocol||!1,tcpHeaderType:((V=i.header)==null?void 0:V.type)||"none",tcpReqVersion:c.version||"1.1",tcpReqMethod:c.method||"GET",tcpReqPath:((U=c.path)==null?void 0:U.join(","))||"/",tcpReqHeaders:nt(c.headers),tcpResVersion:l.version||"1.1",tcpResStatus:l.status||"200",tcpResReason:l.reason||"OK",tcpResHeaders:nt(l.headers),kcpMtu:u.mtu||1350,kcpTti:u.tti||50,kcpUplink:u.uplinkCapacity||5,kcpDownlink:u.downlinkCapacity||20,kcpCongestion:u.congestion||!1,kcpReadBuffer:u.readBufferSize||2,kcpWriteBuffer:u.writeBufferSize||2,kcpHeaderType:((O=u.header)==null?void 0:O.type)||"none",kcpSeed:u.seed||"",kcpDomain:((K=u.header)==null?void 0:K.domain)||"",grpcServiceName:d.serviceName||"",grpcMultiMode:d.multiMode||!1,httpPath:v.path||"/",httpHost:v.host||[],httpUpgradePath:p.path||"/",httpUpgradeHost:p.host||"",httpUpgradeAcceptProxyProtocol:p.acceptProxyProtocol||!1,httpUpgradeHeaders:nt(p.headers),splitHttpPath:h.path||"/",splitHttpHost:h.host||"",splitHttpHeaders:nt(h.headers),splitHttpMode:h.mode||"auto",splitHttpScMaxConcurrentPosts:h.scMaxConcurrentPosts||"100-200",splitHttpScMaxEachPostBytes:h.scMaxEachPostBytes||"1000000-2000000",splitHttpScMinPostsIntervalMs:h.scMinPostsIntervalMs||"10-50",splitHttpXPaddingBytes:h.xPaddingBytes||"100-1000",splitHttpNoSSEHeader:h.noSSEHeader||!1,splitHttpNoGRPCHeader:h.noGRPCHeader||!1,splitHttpXmuxMaxConcurrency:f.maxConcurrency||"16-32",splitHttpXmuxMaxConnections:f.maxConnections||0,splitHttpXmuxCMaxReuseTimes:f.cMaxReuseTimes||"64-128",splitHttpXmuxCMaxLifetimeMs:f.cMaxLifetimeMs||0,xhttpPath:x.path||"/path",xhttpHost:x.host||"hostname",xhttpHeaders:nt(x.headers),xhttpNoSSEHeader:x.noSSEHeader||!1,xhttpXPaddingBytes:x.xPaddingBytes||"100-1000",xhttpMode:x.mode||"auto",tlsServerName:(n==null?void 0:n.serverName)||"",tlsMinVersion:(n==null?void 0:n.minVersion)||"1.0",tlsMaxVersion:(n==null?void 0:n.maxVersion)||"1.3",tlsCipherSuites:(n==null?void 0:n.cipherSuites)||"TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-RSA-AES128-SHA:ECDHE-RSA-AES256-SHA:RSA-AES128-GCM-SHA256:RSA-AES256-GCM-SHA384:RSA-AES128-SHA:RSA-AES256-SHA",tlsRejectUnknownSni:(n==null?void 0:n.rejectUnknownSni)||!1,tlsDisableSystemRoot:(n==null?void 0:n.disableSystemRoot)||!1,tlsSessionResumption:(n==null?void 0:n.enableSessionResumption)||!1,tlsAlpn:((X=n==null?void 0:n.alpn)==null?void 0:X.join(","))||"h2,http/1.1",tlsCertFile:a.certificateFile||(r==null?void 0:r.certificateFile)||"/var/lib/marzban/certs/fullchain.pem",tlsKeyFile:a.keyFile||(r==null?void 0:r.keyFile)||"/var/lib/marzban/certs/privkey.pem",tlsOcsp:a.ocspStapling||3600,tlsUsage:a.usage||"encipherment",wsAcceptProxyProtocol:s.acceptProxyProtocol||!1,wsPath:s.path||"/",wsHost:((q=s.headers)==null?void 0:q.Host)||"",wsHeaders:nt(s.headers),realityDest:o.dest||"",realityServerNames:o.serverNames||[],realityPrivateKey:o.privateKey||"",realityPublicKey:o.publicKey||"",realityShortIds:o.shortIds||[],realitySpiderX:o.spiderX||"/",realityFingerprint:o.fingerprint||"chrome",realityXver:o.xver||0}};function gc({initialData:t,defaultCert:r,onClose:n,onSave:a,saving:o}){const[s,i]=m.useState(fc(t,r)),[c,l]=m.useState("general");m.useEffect(()=>{if(!t){const d=s.network.toUpperCase(),p=s.security!=="none"?`+${s.security.toUpperCase()}`:"",h=`VMESS+${d}${p}+${s.port}`;i(f=>({...f,tag:h}))}},[s.network,s.security,s.port]);const u=d=>{var f;d.preventDefault();const p={network:s.network,security:s.security};if(s.network==="tcp"){const x={acceptProxyProtocol:s.tcpAcceptProxyProtocol,header:{type:s.tcpHeaderType}};s.tcpHeaderType==="http"&&(x.header.request={version:s.tcpReqVersion,method:s.tcpReqMethod,path:s.tcpReqPath.split(",").map(v=>v.trim()).filter(v=>v),headers:at(s.tcpReqHeaders)},x.header.response={version:s.tcpResVersion,status:s.tcpResStatus,reason:s.tcpResReason,headers:at(s.tcpResHeaders)}),p.tcpSettings=x}if(s.network==="kcp"&&(p.kcpSettings={mtu:parseInt(s.kcpMtu),tti:parseInt(s.kcpTti),uplinkCapacity:parseInt(s.kcpUplink),downlinkCapacity:parseInt(s.kcpDownlink),congestion:s.kcpCongestion,readBufferSize:parseInt(s.kcpReadBuffer),writeBufferSize:parseInt(s.kcpWriteBuffer),header:{type:s.kcpHeaderType,domain:s.kcpDomain||void 0},seed:s.kcpSeed||void 0}),s.network==="ws"){const x=at(s.wsHeaders);s.wsHost&&(x.Host=s.wsHost),p.wsSettings={acceptProxyProtocol:s.wsAcceptProxyProtocol,path:s.wsPath,headers:x}}s.network==="grpc"&&(p.grpcSettings={serviceName:s.grpcServiceName,multiMode:s.grpcMultiMode}),s.network==="httpupgrade"&&(p.httpupgradeSettings={acceptProxyProtocol:s.httpUpgradeAcceptProxyProtocol,path:s.httpUpgradePath,host:s.httpUpgradeHost,headers:at(s.httpUpgradeHeaders)}),s.network==="splithttp"&&(p.splithttpSettings={path:s.splitHttpPath,host:s.splitHttpHost,headers:at(s.splitHttpHeaders),scMaxConcurrentPosts:s.splitHttpScMaxConcurrentPosts,scMaxEachPostBytes:s.splitHttpScMaxEachPostBytes,scMinPostsIntervalMs:s.splitHttpScMinPostsIntervalMs,xPaddingBytes:s.splitHttpXPaddingBytes,noSSEHeader:s.splitHttpNoSSEHeader,noGRPCHeader:s.splitHttpNoGRPCHeader,mode:s.splitHttpMode,xmux:{maxConcurrency:s.splitHttpXmuxMaxConcurrency,maxConnections:parseInt(s.splitHttpXmuxMaxConnections),cMaxReuseTimes:s.splitHttpXmuxCMaxReuseTimes,cMaxLifetimeMs:parseInt(s.splitHttpXmuxCMaxLifetimeMs)}}),s.network==="xhttp"&&(p.xhttpSettings={path:s.xhttpPath,host:s.xhttpHost,headers:at(s.xhttpHeaders),noSSEHeader:s.xhttpNoSSEHeader,xPaddingBytes:s.xhttpXPaddingBytes,mode:s.xhttpMode}),s.network==="http"&&(p.httpSettings={path:s.httpPath,host:s.httpHost}),s.security==="tls"&&(p.tlsSettings={serverName:s.tlsServerName,minVersion:s.tlsMinVersion,maxVersion:s.tlsMaxVersion,cipherSuites:s.tlsCipherSuites,rejectUnknownSni:s.tlsRejectUnknownSni,disableSystemRoot:s.tlsDisableSystemRoot,enableSessionResumption:s.tlsSessionResumption,alpn:s.tlsAlpn.split(",").map(x=>x.trim()).filter(x=>x),certificates:[{certificateFile:s.tlsCertFile,keyFile:s.tlsKeyFile,ocspStapling:parseInt(s.tlsOcsp),usage:s.tlsUsage,buildChain:!1}]}),s.security==="reality"&&(p.realitySettings={show:!0,dest:s.realityDest,xver:parseInt(s.realityXver),serverNames:s.realityServerNames.filter(x=>x&&x.trim()!==""),privateKey:s.realityPrivateKey,publicKey:s.realityPublicKey,shortIds:s.realityShortIds.filter(x=>x&&x.trim()!==""),spiderX:s.realitySpiderX,fingerprint:s.realityFingerprint});const h={tag:s.tag,listen:s.listen,port:parseInt(s.port),protocol:"vmess",settings:{clients:((f=h==null?void 0:h.settings)==null?void 0:f.clients)||[]},streamSettings:p,sniffing:{enabled:!0,destOverride:["http","tls","quic","fakedns"],metadataOnly:!1,routeOnly:!1}};a(h)};return e.jsxs("form",{onSubmit:u,style:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx("div",{className:"nav-tabs",style:{borderRadius:"0",borderBottom:"1px solid var(--border-color)",margin:0,padding:"8px 16px 0"},children:["general","transport","security"].map(d=>e.jsx("button",{type:"button",onClick:()=>l(d),className:`nav-link ${c===d?"active":""}`,style:{textTransform:"capitalize",borderRadius:"8px 8px 0 0",borderBottom:c===d?"none":"1px solid transparent",padding:"10px 16px",cursor:"pointer"},children:d},d))}),e.jsxs("div",{className:"modal-body",style:{flex:1,overflowY:"auto",padding:"24px"},children:[c==="general"&&e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Tag"}),e.jsx("input",{type:"text",value:s.tag,onChange:d=>i({...s,tag:d.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Port"}),e.jsx("input",{type:"number",value:s.port,onChange:d=>i({...s,port:d.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Listen IP"}),e.jsx("input",{type:"text",value:s.listen,onChange:d=>i({...s,listen:d.target.value}),className:"form-input",placeholder:"0.0.0.0"})]})]}),e.jsx(lr,{tab:c,formData:s,setFormData:i})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:o,children:"Save VMess"})]})]})}const ot=t=>t?Object.entries(t).map(([r,n])=>({key:r,value:n})):[],it=t=>{const r={};return t&&t.forEach(n=>{n.key&&n.key.trim()!==""&&(r[n.key.trim()]=n.value)}),r},vc=(t,r)=>{var g,b,S,k,w,C,E,y,R,P,T,I,_,A,F,V,U,O,K,X,q;const n=(g=t==null?void 0:t.streamSettings)==null?void 0:g.tlsSettings,a=((b=n==null?void 0:n.certificates)==null?void 0:b[0])||{},o=((S=t==null?void 0:t.streamSettings)==null?void 0:S.realitySettings)||{},s=((k=t==null?void 0:t.streamSettings)==null?void 0:k.wsSettings)||{},i=((w=t==null?void 0:t.streamSettings)==null?void 0:w.tcpSettings)||{},c=((C=i==null?void 0:i.header)==null?void 0:C.request)||{},l=((E=i==null?void 0:i.header)==null?void 0:E.response)||{},u=((y=t==null?void 0:t.streamSettings)==null?void 0:y.kcpSettings)||{},d=((R=t==null?void 0:t.streamSettings)==null?void 0:R.grpcSettings)||{},p=((P=t==null?void 0:t.streamSettings)==null?void 0:P.httpupgradeSettings)||{},h=((T=t==null?void 0:t.streamSettings)==null?void 0:T.splithttpSettings)||{},f=h.xmux||{},x=((I=t==null?void 0:t.streamSettings)==null?void 0:I.xhttpSettings)||{},v=((_=t==null?void 0:t.streamSettings)==null?void 0:_.httpSettings)||{};return{tag:(t==null?void 0:t.tag)||"",port:(t==null?void 0:t.port)||443,listen:(t==null?void 0:t.listen)||"0.0.0.0",protocol:"trojan",network:((A=t==null?void 0:t.streamSettings)==null?void 0:A.network)||"tcp",security:((F=t==null?void 0:t.streamSettings)==null?void 0:F.security)||"tls",tcpAcceptProxyProtocol:i.acceptProxyProtocol||!1,tcpHeaderType:((V=i.header)==null?void 0:V.type)||"none",tcpReqVersion:c.version||"1.1",tcpReqMethod:c.method||"GET",tcpReqPath:((U=c.path)==null?void 0:U.join(","))||"/",tcpReqHeaders:ot(c.headers),tcpResVersion:l.version||"1.1",tcpResStatus:l.status||"200",tcpResReason:l.reason||"OK",tcpResHeaders:ot(l.headers),kcpMtu:u.mtu||1350,kcpTti:u.tti||50,kcpUplink:u.uplinkCapacity||5,kcpDownlink:u.downlinkCapacity||20,kcpCongestion:u.congestion||!1,kcpReadBuffer:u.readBufferSize||2,kcpWriteBuffer:u.writeBufferSize||2,kcpHeaderType:((O=u.header)==null?void 0:O.type)||"none",kcpSeed:u.seed||"",kcpDomain:((K=u.header)==null?void 0:K.domain)||"",grpcServiceName:d.serviceName||"",grpcMultiMode:d.multiMode||!1,httpPath:v.path||"/",httpHost:v.host||[],httpUpgradePath:p.path||"/",httpUpgradeHost:p.host||"",httpUpgradeAcceptProxyProtocol:p.acceptProxyProtocol||!1,httpUpgradeHeaders:ot(p.headers),splitHttpPath:h.path||"/",splitHttpHost:h.host||"",splitHttpHeaders:ot(h.headers),splitHttpMode:h.mode||"auto",splitHttpScMaxConcurrentPosts:h.scMaxConcurrentPosts||"100-200",splitHttpScMaxEachPostBytes:h.scMaxEachPostBytes||"1000000-2000000",splitHttpScMinPostsIntervalMs:h.scMinPostsIntervalMs||"10-50",splitHttpXPaddingBytes:h.xPaddingBytes||"100-1000",splitHttpNoSSEHeader:h.noSSEHeader||!1,splitHttpNoGRPCHeader:h.noGRPCHeader||!1,splitHttpXmuxMaxConcurrency:f.maxConcurrency||"16-32",splitHttpXmuxMaxConnections:f.maxConnections||0,splitHttpXmuxCMaxReuseTimes:f.cMaxReuseTimes||"64-128",splitHttpXmuxCMaxLifetimeMs:f.cMaxLifetimeMs||0,xhttpPath:x.path||"/path",xhttpHost:x.host||"hostname",xhttpHeaders:ot(x.headers),xhttpNoSSEHeader:x.noSSEHeader||!1,xhttpXPaddingBytes:x.xPaddingBytes||"100-1000",xhttpMode:x.mode||"auto",tlsServerName:(n==null?void 0:n.serverName)||"",tlsMinVersion:(n==null?void 0:n.minVersion)||"1.0",tlsMaxVersion:(n==null?void 0:n.maxVersion)||"1.3",tlsCipherSuites:(n==null?void 0:n.cipherSuites)||"TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-RSA-AES128-SHA:ECDHE-RSA-AES256-SHA:RSA-AES128-GCM-SHA256:RSA-AES256-GCM-SHA384:RSA-AES128-SHA:RSA-AES256-SHA",tlsRejectUnknownSni:(n==null?void 0:n.rejectUnknownSni)||!1,tlsDisableSystemRoot:(n==null?void 0:n.disableSystemRoot)||!1,tlsSessionResumption:(n==null?void 0:n.enableSessionResumption)||!1,tlsAlpn:((X=n==null?void 0:n.alpn)==null?void 0:X.join(","))||"h2,http/1.1",tlsCertFile:a.certificateFile||(r==null?void 0:r.certificateFile)||"/var/lib/marzban/certs/fullchain.pem",tlsKeyFile:a.keyFile||(r==null?void 0:r.keyFile)||"/var/lib/marzban/certs/privkey.pem",tlsOcsp:a.ocspStapling||3600,tlsUsage:a.usage||"encipherment",wsAcceptProxyProtocol:s.acceptProxyProtocol||!1,wsPath:s.path||"/",wsHost:((q=s.headers)==null?void 0:q.Host)||"",wsHeaders:ot(s.headers),realityDest:o.dest||"",realityServerNames:o.serverNames||[],realityPrivateKey:o.privateKey||"",realityPublicKey:o.publicKey||"",realityShortIds:o.shortIds||[],realitySpiderX:o.spiderX||"/",realityFingerprint:o.fingerprint||"chrome",realityXver:o.xver||0}};function yc({initialData:t,defaultCert:r,onClose:n,onSave:a,saving:o}){const[s,i]=m.useState(vc(t,r)),[c,l]=m.useState("general");m.useEffect(()=>{if(!t){const d=s.network.toUpperCase(),p=s.security!=="none"?`_${s.security.toUpperCase()}`:"",h=`TROJAN_${d}${p}_${s.port}`;i(f=>({...f,tag:h}))}},[s.network,s.security,s.port]);const u=d=>{var f;d.preventDefault();const p={network:s.network,security:s.security};if(s.network==="tcp"){const x={acceptProxyProtocol:s.tcpAcceptProxyProtocol,header:{type:s.tcpHeaderType}};s.tcpHeaderType==="http"&&(x.header.request={version:s.tcpReqVersion,method:s.tcpReqMethod,path:s.tcpReqPath.split(",").map(v=>v.trim()).filter(v=>v),headers:it(s.tcpReqHeaders)},x.header.response={version:s.tcpResVersion,status:s.tcpResStatus,reason:s.tcpResReason,headers:it(s.tcpResHeaders)}),p.tcpSettings=x}if(s.network==="kcp"&&(p.kcpSettings={mtu:parseInt(s.kcpMtu),tti:parseInt(s.kcpTti),uplinkCapacity:parseInt(s.kcpUplink),downlinkCapacity:parseInt(s.kcpDownlink),congestion:s.kcpCongestion,readBufferSize:parseInt(s.kcpReadBuffer),writeBufferSize:parseInt(s.kcpWriteBuffer),header:{type:s.kcpHeaderType,domain:s.kcpDomain||void 0},seed:s.kcpSeed||void 0}),s.network==="ws"){const x=it(s.wsHeaders);s.wsHost&&(x.Host=s.wsHost),p.wsSettings={acceptProxyProtocol:s.wsAcceptProxyProtocol,path:s.wsPath,headers:x}}s.network==="grpc"&&(p.grpcSettings={serviceName:s.grpcServiceName,multiMode:s.grpcMultiMode}),s.network==="httpupgrade"&&(p.httpupgradeSettings={acceptProxyProtocol:s.httpUpgradeAcceptProxyProtocol,path:s.httpUpgradePath,host:s.httpUpgradeHost,headers:it(s.httpUpgradeHeaders)}),s.network==="splithttp"&&(p.splithttpSettings={path:s.splitHttpPath,host:s.splitHttpHost,headers:it(s.splitHttpHeaders),scMaxConcurrentPosts:s.splitHttpScMaxConcurrentPosts,scMaxEachPostBytes:s.splitHttpScMaxEachPostBytes,scMinPostsIntervalMs:s.splitHttpScMinPostsIntervalMs,xPaddingBytes:s.splitHttpXPaddingBytes,noSSEHeader:s.splitHttpNoSSEHeader,noGRPCHeader:s.splitHttpNoGRPCHeader,mode:s.splitHttpMode,xmux:{maxConcurrency:s.splitHttpXmuxMaxConcurrency,maxConnections:parseInt(s.splitHttpXmuxMaxConnections),cMaxReuseTimes:s.splitHttpXmuxCMaxReuseTimes,cMaxLifetimeMs:parseInt(s.splitHttpXmuxCMaxLifetimeMs)}}),s.network==="xhttp"&&(p.xhttpSettings={path:s.xhttpPath,host:s.xhttpHost,headers:it(s.xhttpHeaders),noSSEHeader:s.xhttpNoSSEHeader,xPaddingBytes:s.xhttpXPaddingBytes,mode:s.xhttpMode}),s.network==="http"&&(p.httpSettings={path:s.httpPath,host:s.httpHost}),s.security==="tls"&&(p.tlsSettings={serverName:s.tlsServerName,minVersion:s.tlsMinVersion,maxVersion:s.tlsMaxVersion,cipherSuites:s.tlsCipherSuites,rejectUnknownSni:s.tlsRejectUnknownSni,disableSystemRoot:s.tlsDisableSystemRoot,enableSessionResumption:s.tlsSessionResumption,alpn:s.tlsAlpn.split(",").map(x=>x.trim()).filter(x=>x),certificates:[{certificateFile:s.tlsCertFile,keyFile:s.tlsKeyFile,ocspStapling:parseInt(s.tlsOcsp),usage:s.tlsUsage,buildChain:!1}]}),s.security==="reality"&&(p.realitySettings={show:!0,dest:s.realityDest,xver:parseInt(s.realityXver),serverNames:s.realityServerNames.filter(x=>x&&x.trim()!==""),privateKey:s.realityPrivateKey,publicKey:s.realityPublicKey,shortIds:s.realityShortIds.filter(x=>x&&x.trim()!==""),spiderX:s.realitySpiderX,fingerprint:s.realityFingerprint});const h={tag:s.tag,listen:s.listen,port:parseInt(s.port),protocol:"trojan",settings:{clients:((f=h==null?void 0:h.settings)==null?void 0:f.clients)||[],decryption:"none"},streamSettings:p,sniffing:{enabled:!0,destOverride:["http","tls","quic","fakedns"],metadataOnly:!1,routeOnly:!1}};a(h)};return e.jsxs("form",{onSubmit:u,style:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx("div",{className:"nav-tabs",style:{borderRadius:"0",borderBottom:"1px solid var(--border-color)",margin:0,padding:"8px 16px 0"},children:["general","transport","security"].map(d=>e.jsx("button",{type:"button",onClick:()=>l(d),className:`nav-link ${c===d?"active":""}`,style:{textTransform:"capitalize",borderRadius:"8px 8px 0 0",borderBottom:c===d?"none":"1px solid transparent",padding:"10px 16px",cursor:"pointer"},children:d},d))}),e.jsxs("div",{className:"modal-body",style:{flex:1,overflowY:"auto",padding:"24px"},children:[c==="general"&&e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Tag"}),e.jsx("input",{type:"text",value:s.tag,onChange:d=>i({...s,tag:d.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Port"}),e.jsx("input",{type:"number",value:s.port,onChange:d=>i({...s,port:d.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Listen IP"}),e.jsx("input",{type:"text",value:s.listen,onChange:d=>i({...s,listen:d.target.value}),className:"form-input",placeholder:"0.0.0.0"})]}),e.jsx("div",{className:"card card-body",style:{gridColumn:"1 / -1",background:"rgba(0,0,0,0.2)",border:"1px solid var(--border-color)"},children:e.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-muted)"},children:"Note: Client passwords for Trojan are usually managed via the Users section in Marzban, not directly here."})})]}),e.jsx(lr,{tab:c,formData:s,setFormData:i})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:o,children:"Save Trojan"})]})]})}const bc=["2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm","2022-blake3-chacha20-poly1305","aes-128-gcm","aes-256-gcm","chacha20-poly1305","chacha20-ietf-poly1305","xchacha20-poly1305","xchacha20-ietf-poly1305","aes-128-ctr","aes-192-ctr","aes-256-ctr","aes-128-cfb","aes-192-cfb","aes-256-cfb","rc4-md5","chacha20-ietf"],lt=t=>t?Object.entries(t).map(([r,n])=>({key:r,value:n})):[],ct=t=>{const r={};return t&&t.forEach(n=>{n.key&&n.key.trim()!==""&&(r[n.key.trim()]=n.value)}),r},In=()=>{const t=new Uint8Array(32);window.crypto.getRandomValues(t);let r="";for(let n=0;n<t.length;n++)r+=String.fromCharCode(t[n]);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},jc=(t,r)=>{var b,S,k,w,C,E,y,R,P,T,I,_,A,F,V,U,O,K,X,q,ne;const n=(t==null?void 0:t.settings)||{},a=(b=t==null?void 0:t.streamSettings)==null?void 0:b.tlsSettings,o=((S=a==null?void 0:a.certificates)==null?void 0:S[0])||{},s=((k=t==null?void 0:t.streamSettings)==null?void 0:k.realitySettings)||{},i=((w=t==null?void 0:t.streamSettings)==null?void 0:w.wsSettings)||{},c=((C=t==null?void 0:t.streamSettings)==null?void 0:C.tcpSettings)||{},l=((E=c==null?void 0:c.header)==null?void 0:E.request)||{},u=((y=c==null?void 0:c.header)==null?void 0:y.response)||{},d=((R=t==null?void 0:t.streamSettings)==null?void 0:R.kcpSettings)||{},p=((P=t==null?void 0:t.streamSettings)==null?void 0:P.grpcSettings)||{},h=((T=t==null?void 0:t.streamSettings)==null?void 0:T.httpupgradeSettings)||{},f=((I=t==null?void 0:t.streamSettings)==null?void 0:I.splithttpSettings)||{},x=f.xmux||{},v=((_=t==null?void 0:t.streamSettings)==null?void 0:_.xhttpSettings)||{},g=((A=t==null?void 0:t.streamSettings)==null?void 0:A.httpSettings)||{};return{tag:(t==null?void 0:t.tag)||"",port:(t==null?void 0:t.port)||8080,listen:(t==null?void 0:t.listen)||"0.0.0.0",protocol:"shadowsocks",ssMethod:n.method||"2022-blake3-aes-256-gcm",ssPassword:n.password||In(),ssNetwork:n.network||"tcp,udp",ssIvCheck:n.ivCheck!==!1,network:((F=t==null?void 0:t.streamSettings)==null?void 0:F.network)||"tcp",security:((V=t==null?void 0:t.streamSettings)==null?void 0:V.security)||"none",tcpAcceptProxyProtocol:c.acceptProxyProtocol||!1,tcpHeaderType:((U=c.header)==null?void 0:U.type)||"none",tcpReqVersion:l.version||"1.1",tcpReqMethod:l.method||"GET",tcpReqPath:((O=l.path)==null?void 0:O.join(","))||"/",tcpReqHeaders:lt(l.headers),tcpResVersion:u.version||"1.1",tcpResStatus:u.status||"200",tcpResReason:u.reason||"OK",tcpResHeaders:lt(u.headers),kcpMtu:d.mtu||1350,kcpTti:d.tti||50,kcpUplink:d.uplinkCapacity||5,kcpDownlink:d.downlinkCapacity||20,kcpCongestion:d.congestion||!1,kcpReadBuffer:d.readBufferSize||2,kcpWriteBuffer:d.writeBufferSize||2,kcpHeaderType:((K=d.header)==null?void 0:K.type)||"none",kcpSeed:d.seed||"",kcpDomain:((X=d.header)==null?void 0:X.domain)||"",grpcServiceName:p.serviceName||"",grpcMultiMode:p.multiMode||!1,httpPath:g.path||"/",httpHost:g.host||[],httpUpgradePath:h.path||"/",httpUpgradeHost:h.host||"",httpUpgradeAcceptProxyProtocol:h.acceptProxyProtocol||!1,httpUpgradeHeaders:lt(h.headers),splitHttpPath:f.path||"/",splitHttpHost:f.host||"",splitHttpHeaders:lt(f.headers),splitHttpMode:f.mode||"auto",splitHttpScMaxConcurrentPosts:f.scMaxConcurrentPosts||"100-200",splitHttpScMaxEachPostBytes:f.scMaxEachPostBytes||"1000000-2000000",splitHttpScMinPostsIntervalMs:f.scMinPostsIntervalMs||"10-50",splitHttpXPaddingBytes:f.xPaddingBytes||"100-1000",splitHttpNoSSEHeader:f.noSSEHeader||!1,splitHttpNoGRPCHeader:f.noGRPCHeader||!1,splitHttpXmuxMaxConcurrency:x.maxConcurrency||"16-32",splitHttpXmuxMaxConnections:x.maxConnections||0,splitHttpXmuxCMaxReuseTimes:x.cMaxReuseTimes||"64-128",splitHttpXmuxCMaxLifetimeMs:x.cMaxLifetimeMs||0,xhttpPath:v.path||"/path",xhttpHost:v.host||"hostname",xhttpHeaders:lt(v.headers),xhttpNoSSEHeader:v.noSSEHeader||!1,xhttpXPaddingBytes:v.xPaddingBytes||"100-1000",xhttpMode:v.mode||"auto",tlsServerName:(a==null?void 0:a.serverName)||"",tlsMinVersion:(a==null?void 0:a.minVersion)||"1.0",tlsMaxVersion:(a==null?void 0:a.maxVersion)||"1.3",tlsCipherSuites:(a==null?void 0:a.cipherSuites)||"TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-RSA-AES128-SHA:ECDHE-RSA-AES256-SHA:RSA-AES128-GCM-SHA256:RSA-AES256-GCM-SHA384:RSA-AES128-SHA:RSA-AES256-SHA",tlsRejectUnknownSni:(a==null?void 0:a.rejectUnknownSni)||!1,tlsDisableSystemRoot:(a==null?void 0:a.disableSystemRoot)||!1,tlsSessionResumption:(a==null?void 0:a.enableSessionResumption)||!1,tlsAlpn:((q=a==null?void 0:a.alpn)==null?void 0:q.join(","))||"h2,http/1.1",tlsCertFile:o.certificateFile||(r==null?void 0:r.certificateFile)||"/var/lib/marzban/certs/fullchain.pem",tlsKeyFile:o.keyFile||(r==null?void 0:r.keyFile)||"/var/lib/marzban/certs/privkey.pem",tlsOcsp:o.ocspStapling||3600,tlsUsage:o.usage||"encipherment",wsAcceptProxyProtocol:i.acceptProxyProtocol||!1,wsPath:i.path||"/",wsHost:((ne=i.headers)==null?void 0:ne.Host)||"",wsHeaders:lt(i.headers),realityDest:s.dest||"",realityServerNames:s.serverNames||[],realityPrivateKey:s.privateKey||"",realityPublicKey:s.publicKey||"",realityShortIds:s.shortIds||[],realitySpiderX:s.spiderX||"/",realityFingerprint:s.fingerprint||"chrome",realityXver:s.xver||0}};function Sc({initialData:t,defaultCert:r,onClose:n,onSave:a,saving:o}){const[s,i]=m.useState(jc(t,r)),[c,l]=m.useState("general");m.useEffect(()=>{if(!t){const p=`SS_${s.network.toUpperCase()}_${s.port}`;i(h=>({...h,tag:p}))}},[s.network,s.port]);const u=d=>{d.preventDefault();const p={network:s.network,security:s.security};if(s.network==="tcp"){const f={acceptProxyProtocol:s.tcpAcceptProxyProtocol,header:{type:s.tcpHeaderType}};s.tcpHeaderType==="http"&&(f.header.request={version:s.tcpReqVersion,method:s.tcpReqMethod,path:s.tcpReqPath.split(",").map(x=>x.trim()).filter(x=>x),headers:ct(s.tcpReqHeaders)},f.header.response={version:s.tcpResVersion,status:s.tcpResStatus,reason:s.tcpResReason,headers:ct(s.tcpResHeaders)}),p.tcpSettings=f}if(s.network==="kcp"&&(p.kcpSettings={mtu:parseInt(s.kcpMtu),tti:parseInt(s.kcpTti),uplinkCapacity:parseInt(s.kcpUplink),downlinkCapacity:parseInt(s.kcpDownlink),congestion:s.kcpCongestion,readBufferSize:parseInt(s.kcpReadBuffer),writeBufferSize:parseInt(s.kcpWriteBuffer),header:{type:s.kcpHeaderType,domain:s.kcpDomain||void 0},seed:s.kcpSeed||void 0}),s.network==="ws"){const f=ct(s.wsHeaders);s.wsHost&&(f.Host=s.wsHost),p.wsSettings={acceptProxyProtocol:s.wsAcceptProxyProtocol,path:s.wsPath,headers:f}}s.network==="grpc"&&(p.grpcSettings={serviceName:s.grpcServiceName,multiMode:s.grpcMultiMode}),s.network==="httpupgrade"&&(p.httpupgradeSettings={acceptProxyProtocol:s.httpUpgradeAcceptProxyProtocol,path:s.httpUpgradePath,host:s.httpUpgradeHost,headers:ct(s.httpUpgradeHeaders)}),s.network==="splithttp"&&(p.splithttpSettings={path:s.splitHttpPath,host:s.splitHttpHost,headers:ct(s.splitHttpHeaders),scMaxConcurrentPosts:s.splitHttpScMaxConcurrentPosts,scMaxEachPostBytes:s.splitHttpScMaxEachPostBytes,scMinPostsIntervalMs:s.splitHttpScMinPostsIntervalMs,xPaddingBytes:s.splitHttpXPaddingBytes,noSSEHeader:s.splitHttpNoSSEHeader,noGRPCHeader:s.splitHttpNoGRPCHeader,mode:s.splitHttpMode,xmux:{maxConcurrency:s.splitHttpXmuxMaxConcurrency,maxConnections:parseInt(s.splitHttpXmuxMaxConnections),cMaxReuseTimes:s.splitHttpXmuxCMaxReuseTimes,cMaxLifetimeMs:parseInt(s.splitHttpXmuxCMaxLifetimeMs)}}),s.network==="xhttp"&&(p.xhttpSettings={path:s.xhttpPath,host:s.xhttpHost,headers:ct(s.xhttpHeaders),noSSEHeader:s.xhttpNoSSEHeader,xPaddingBytes:s.xhttpXPaddingBytes,mode:s.xhttpMode}),s.network==="http"&&(p.httpSettings={path:s.httpPath,host:s.httpHost}),s.security==="tls"&&(p.tlsSettings={serverName:s.tlsServerName,minVersion:s.tlsMinVersion,maxVersion:s.tlsMaxVersion,cipherSuites:s.tlsCipherSuites,rejectUnknownSni:s.tlsRejectUnknownSni,disableSystemRoot:s.tlsDisableSystemRoot,enableSessionResumption:s.tlsSessionResumption,alpn:s.tlsAlpn.split(",").map(f=>f.trim()).filter(f=>f),certificates:[{certificateFile:s.tlsCertFile,keyFile:s.tlsKeyFile,ocspStapling:parseInt(s.tlsOcsp),usage:s.tlsUsage,buildChain:!1}]}),s.security==="reality"&&(p.realitySettings={show:!0,dest:s.realityDest,xver:parseInt(s.realityXver),serverNames:s.realityServerNames.filter(f=>f&&f.trim()!==""),privateKey:s.realityPrivateKey,publicKey:s.realityPublicKey,shortIds:s.realityShortIds.filter(f=>f&&f.trim()!==""),spiderX:s.realitySpiderX,fingerprint:s.realityFingerprint});const h={tag:s.tag,listen:s.listen,port:parseInt(s.port),protocol:"shadowsocks",settings:{method:s.ssMethod,password:s.ssPassword,network:s.ssNetwork,ivCheck:s.ssIvCheck,clients:[]},streamSettings:p,sniffing:{enabled:!0,destOverride:["http","tls","quic","fakedns"],metadataOnly:!1,routeOnly:!1}};a(h)};return e.jsxs("form",{onSubmit:u,style:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx("div",{className:"nav-tabs",style:{borderRadius:"0",borderBottom:"1px solid var(--border-color)",margin:0,padding:"8px 16px 0"},children:["general","transport","security"].map(d=>e.jsx("button",{type:"button",onClick:()=>l(d),className:`nav-link ${c===d?"active":""}`,style:{textTransform:"capitalize",borderRadius:"8px 8px 0 0",borderBottom:c===d?"none":"1px solid transparent",padding:"10px 16px",cursor:"pointer"},children:d},d))}),e.jsxs("div",{className:"modal-body",style:{flex:1,overflowY:"auto",padding:"24px"},children:[c==="general"&&e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Tag"}),e.jsx("input",{type:"text",value:s.tag,onChange:d=>i({...s,tag:d.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Port"}),e.jsx("input",{type:"number",value:s.port,onChange:d=>i({...s,port:d.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Listen IP"}),e.jsx("input",{type:"text",value:s.listen,onChange:d=>i({...s,listen:d.target.value}),className:"form-input",placeholder:"0.0.0.0"})]}),e.jsxs("div",{className:"card card-body",style:{gridColumn:"1 / -1",background:"rgba(0,0,0,0.2)",border:"1px solid var(--border-color)"},children:[e.jsx("h4",{style:{marginBottom:"16px",color:"#f59e0b"},children:"Shadowsocks Settings"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Method"}),e.jsx("select",{value:s.ssMethod,onChange:d=>i({...s,ssMethod:d.target.value}),className:"form-input",children:bc.map(d=>e.jsx("option",{value:d,children:d},d))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Password"}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("input",{type:"text",value:s.ssPassword,onChange:d=>i({...s,ssPassword:d.target.value}),className:"form-input",style:{flex:1}}),e.jsx("button",{type:"button",onClick:()=>i({...s,ssPassword:In()}),className:"btn btn-primary",style:{background:"#f59e0b",borderColor:"#d97706",whiteSpace:"nowrap"},children:"Generate"})]})]}),e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Network"}),e.jsx("input",{type:"text",value:s.ssNetwork,onChange:d=>i({...s,ssNetwork:d.target.value}),className:"form-input",placeholder:"tcp,udp"})]}),e.jsx("div",{className:"form-group",style:{display:"flex",alignItems:"center",paddingTop:"28px"},children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",style:{color:"var(--text-secondary)"},children:[e.jsx("input",{type:"checkbox",checked:s.ssIvCheck,onChange:d=>i({...s,ssIvCheck:d.target.checked})}),"IV Check"]})})]})]})]}),e.jsx(lr,{tab:c,formData:s,setFormData:i})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:o,children:"Save Shadowsocks"})]})]})}const wc=t=>Array.isArray(t)?t:typeof t=="string"?t.split(",").map(r=>r.trim()):["tcp","udp"];function kc({initialData:t,onClose:r,onSave:n,saving:a}){var l,u,d,p;const o=wc((l=t==null?void 0:t.settings)==null?void 0:l.network),[s,i]=m.useState({tag:(t==null?void 0:t.tag)||"",listen:(t==null?void 0:t.listen)||"0.0.0.0",port:(t==null?void 0:t.port)||1080,address:((u=t==null?void 0:t.settings)==null?void 0:u.address)||"127.0.0.1",targetPort:((d=t==null?void 0:t.settings)==null?void 0:d.port)||80,networkTcp:o.includes("tcp"),networkUdp:o.includes("udp"),followRedirect:((p=t==null?void 0:t.settings)==null?void 0:p.followRedirect)||!1});m.useEffect(()=>{if(!t){const h=`DOKO_${s.port}`;i(f=>({...f,tag:h}))}},[s.port]);const c=h=>{h.preventDefault();const f=[];s.networkTcp&&f.push("tcp"),s.networkUdp&&f.push("udp"),n({tag:s.tag,protocol:"dokodemo-door",port:parseInt(s.port),listen:s.listen,settings:{address:s.address,port:parseInt(s.targetPort),network:f.length>0?f:["tcp","udp"],followRedirect:s.followRedirect},streamSettings:null,sniffing:null})};return e.jsxs("form",{onSubmit:c,style:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx("div",{className:"nav-tabs",style:{borderRadius:"0",borderBottom:"1px solid var(--border-color)",margin:0,padding:"8px 16px 0"},children:e.jsx("button",{type:"button",className:"nav-link active",style:{textTransform:"capitalize",borderRadius:"8px 8px 0 0",borderBottom:"none",padding:"10px 16px"},children:"General"})}),e.jsx("div",{className:"modal-body",style:{flex:1,overflowY:"auto",padding:"24px"},children:e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Tag"}),e.jsx("input",{type:"text",value:s.tag,onChange:h=>i({...s,tag:h.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Inbound Port"}),e.jsx("input",{type:"number",value:s.port,onChange:h=>i({...s,port:h.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Listen IP"}),e.jsx("input",{type:"text",value:s.listen,onChange:h=>i({...s,listen:h.target.value}),className:"form-input",placeholder:"0.0.0.0"})]}),e.jsxs("div",{className:"card card-body",style:{gridColumn:"1 / -1",background:"rgba(0,0,0,0.2)",border:"1px solid var(--border-color)"},children:[e.jsx("h4",{style:{marginBottom:"16px",color:"#10b981"},children:"Forward Settings"}),e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Target Address"}),e.jsx("input",{type:"text",value:s.address,onChange:h=>i({...s,address:h.target.value}),className:"form-input",placeholder:"127.0.0.1"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Target Port"}),e.jsx("input",{type:"number",value:s.targetPort,onChange:h=>i({...s,targetPort:h.target.value}),className:"form-input"})]})]}),e.jsxs("div",{className:"grid-2",style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid var(--border-color)"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Networks"}),e.jsxs("div",{style:{display:"flex",gap:"16px",marginTop:"8px"},children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",style:{color:"var(--text-secondary)"},children:[e.jsx("input",{type:"checkbox",checked:s.networkTcp,onChange:h=>i({...s,networkTcp:h.target.checked})}),"TCP"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",style:{color:"var(--text-secondary)"},children:[e.jsx("input",{type:"checkbox",checked:s.networkUdp,onChange:h=>i({...s,networkUdp:h.target.checked})}),"UDP"]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Options"}),e.jsx("div",{style:{marginTop:"8px"},children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",style:{color:"var(--text-secondary)"},children:[e.jsx("input",{type:"checkbox",checked:s.followRedirect,onChange:h=>i({...s,followRedirect:h.target.checked})}),"Follow Redirect"]})})]})]})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a,children:"Save Dokodemo"})]})]})}const Cc=({accounts:t=[],onChange:r})=>{const n=()=>{r([...t,{user:"",pass:""}])},a=s=>{const i=t.filter((c,l)=>l!==s);r(i)},o=(s,i,c)=>{const l=[...t];l[s][i]=c,r(l)};return e.jsxs("div",{className:"card card-body",style:{background:"rgba(0,0,0,0.1)",padding:"12px",border:"1px solid var(--border-color)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsx("label",{className:"form-label",style:{margin:0},children:"Accounts"}),e.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",style:{fontSize:"0.75rem",padding:"4px 8px",height:"auto"},children:"+ Add User"})]}),t.length===0&&e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)",textAlign:"center",padding:"8px"},children:"No authentication (Open Proxy)"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:t.map((s,i)=>e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("input",{type:"text",placeholder:"Username",value:s.user,onChange:c=>o(i,"user",c.target.value),className:"form-input",style:{flex:1,fontSize:"0.85rem",padding:"8px"}}),e.jsx("input",{type:"text",placeholder:"Password",value:s.pass,onChange:c=>o(i,"pass",c.target.value),className:"form-input",style:{flex:1,fontSize:"0.85rem",padding:"8px"}}),e.jsx("button",{type:"button",onClick:()=>a(i),className:"btn btn-danger",style:{padding:"0 10px"},title:"Remove",children:""})]},i))})]})};function Nc({initialData:t,onClose:r,onSave:n,saving:a}){var c,l;const[o,s]=m.useState({tag:(t==null?void 0:t.tag)||"",port:(t==null?void 0:t.port)||8080,listen:(t==null?void 0:t.listen)||"0.0.0.0",accounts:((c=t==null?void 0:t.settings)==null?void 0:c.accounts)||[],allowTransparent:((l=t==null?void 0:t.settings)==null?void 0:l.allowTransparent)||!1});m.useEffect(()=>{if(!t){const u=`HTTP_${o.port}`;s(d=>({...d,tag:u}))}},[o.port]);const i=u=>{u.preventDefault();const d={tag:o.tag,port:parseInt(o.port),listen:o.listen,protocol:"http",settings:{accounts:o.accounts.filter(p=>p.user&&p.pass),allowTransparent:o.allowTransparent,timeout:0,userLevel:0},sniffing:{enabled:!0,destOverride:["http","tls","quic","fakedns"]}};n(d)};return e.jsxs("form",{onSubmit:i,style:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx("div",{className:"nav-tabs",style:{borderRadius:"0",borderBottom:"1px solid var(--border-color)",margin:0,padding:"8px 16px 0"},children:e.jsx("button",{type:"button",className:"nav-link active",style:{textTransform:"capitalize",borderRadius:"8px 8px 0 0",borderBottom:"none",padding:"10px 16px",cursor:"pointer"},children:"General"})}),e.jsx("div",{className:"modal-body",style:{flex:1,overflowY:"auto",padding:"24px"},children:e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Tag"}),e.jsx("input",{type:"text",value:o.tag,onChange:u=>s({...o,tag:u.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Port"}),e.jsx("input",{type:"number",value:o.port,onChange:u=>s({...o,port:u.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Listen IP"}),e.jsx("input",{type:"text",value:o.listen,onChange:u=>s({...o,listen:u.target.value}),className:"form-input",placeholder:"0.0.0.0"})]}),e.jsxs("div",{className:"card card-body",style:{gridColumn:"1 / -1",background:"rgba(0,0,0,0.2)",border:"1px solid var(--border-color)"},children:[e.jsx("h4",{style:{marginBottom:"16px",color:"#10b981"},children:"HTTP Settings"}),e.jsx("div",{className:"form-group",children:e.jsx(Cc,{accounts:o.accounts,onChange:u=>s({...o,accounts:u})})}),e.jsxs("div",{className:"form-group",style:{marginTop:"16px"},children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",style:{color:"var(--text-secondary)"},children:[e.jsx("input",{type:"checkbox",checked:o.allowTransparent,onChange:u=>s({...o,allowTransparent:u.target.checked})}),"Allow Transparent"]}),e.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-muted)",marginTop:"4px",marginLeft:"24px"},children:"Enable transparent proxying (requires traffic redirection)."})]})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a,children:"Save HTTP"})]})]})}const Rc=({accounts:t=[],onChange:r})=>{const n=()=>{r([...t,{user:"",pass:""}])},a=s=>{const i=t.filter((c,l)=>l!==s);r(i)},o=(s,i,c)=>{const l=[...t];l[s][i]=c,r(l)};return e.jsxs("div",{className:"card card-body",style:{background:"rgba(0,0,0,0.1)",padding:"12px",border:"1px solid var(--border-color)",marginTop:"8px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsx("label",{className:"form-label",style:{margin:0},children:"Accounts"}),e.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",style:{fontSize:"0.75rem",padding:"4px 8px",height:"auto"},children:"+ Add User"})]}),t.length===0&&e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)",textAlign:"center",padding:"8px"},children:"No accounts defined."}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:t.map((s,i)=>e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("input",{type:"text",placeholder:"Username",value:s.user,onChange:c=>o(i,"user",c.target.value),className:"form-input",style:{flex:1,fontSize:"0.85rem",padding:"8px"}}),e.jsx("input",{type:"text",placeholder:"Password",value:s.pass,onChange:c=>o(i,"pass",c.target.value),className:"form-input",style:{flex:1,fontSize:"0.85rem",padding:"8px"}}),e.jsx("button",{type:"button",onClick:()=>a(i),className:"btn btn-danger",style:{padding:"0 10px"},title:"Remove",children:""})]},i))})]})};function Ec({initialData:t,onClose:r,onSave:n,saving:a}){var c,l,u,d;const[o,s]=m.useState({tag:(t==null?void 0:t.tag)||"",port:(t==null?void 0:t.port)||1080,listen:(t==null?void 0:t.listen)||"0.0.0.0",auth:((c=t==null?void 0:t.settings)==null?void 0:c.auth)||"noauth",accounts:((l=t==null?void 0:t.settings)==null?void 0:l.accounts)||[],udp:((u=t==null?void 0:t.settings)==null?void 0:u.udp)!==!1,ip:((d=t==null?void 0:t.settings)==null?void 0:d.ip)||"127.0.0.1"});m.useEffect(()=>{if(!t){const p=`SOCKS_${o.port}`;s(h=>({...h,tag:p}))}},[o.port]);const i=p=>{p.preventDefault();const h={tag:o.tag,port:parseInt(o.port),listen:o.listen,protocol:"socks",settings:{auth:o.auth,accounts:o.auth==="password"?o.accounts.filter(f=>f.user&&f.pass):[],udp:o.udp,ip:o.ip,userLevel:0},sniffing:{enabled:!0,destOverride:["http","tls","quic","fakedns"]}};n(h)};return e.jsxs("form",{onSubmit:i,style:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx("div",{className:"nav-tabs",style:{borderRadius:"0",borderBottom:"1px solid var(--border-color)",margin:0,padding:"8px 16px 0"},children:e.jsx("button",{type:"button",className:"nav-link active",style:{textTransform:"capitalize",borderRadius:"8px 8px 0 0",borderBottom:"none",padding:"10px 16px",cursor:"pointer"},children:"General"})}),e.jsx("div",{className:"modal-body",style:{flex:1,overflowY:"auto",padding:"24px"},children:e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Tag"}),e.jsx("input",{type:"text",value:o.tag,onChange:p=>s({...o,tag:p.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Port"}),e.jsx("input",{type:"number",value:o.port,onChange:p=>s({...o,port:p.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Listen IP"}),e.jsx("input",{type:"text",value:o.listen,onChange:p=>s({...o,listen:p.target.value}),className:"form-input",placeholder:"0.0.0.0"})]}),e.jsxs("div",{className:"card card-body",style:{gridColumn:"1 / -1",background:"rgba(0,0,0,0.2)",border:"1px solid var(--border-color)"},children:[e.jsx("h4",{style:{marginBottom:"16px",color:"#3b82f6"},children:"SOCKS5 Settings"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Authentication"}),e.jsxs("select",{value:o.auth,onChange:p=>s({...o,auth:p.target.value}),className:"form-input",children:[e.jsx("option",{value:"noauth",children:"No Authentication"}),e.jsx("option",{value:"password",children:"Password"})]})]}),o.auth==="password"&&e.jsx("div",{className:"form-group",children:e.jsx(Rc,{accounts:o.accounts,onChange:p=>s({...o,accounts:p})})}),e.jsxs("div",{className:"grid-2",style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid var(--border-color)"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"UDP Address (IP)"}),e.jsx("input",{type:"text",value:o.ip,onChange:p=>s({...o,ip:p.target.value}),className:"form-input",placeholder:"127.0.0.1"})]}),e.jsx("div",{className:"form-group",style:{display:"flex",alignItems:"center",paddingTop:"28px"},children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",style:{color:"var(--text-secondary)"},children:[e.jsx("input",{type:"checkbox",checked:o.udp,onChange:p=>s({...o,udp:p.target.checked})}),"Enable UDP"]})})]})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a,children:"Save SOCKS"})]})]})}const Pc=({inbound:t,defaultCert:r,onClose:n,onSave:a,saving:o})=>{const[s,i]=m.useState((t==null?void 0:t.protocol)||"vless"),c={initialData:t,defaultCert:r,onClose:n,onSave:a,saving:o},l=()=>{switch(s){case"vless":return e.jsx(js,{...c});case"vmess":return e.jsx(gc,{...c});case"trojan":return e.jsx(yc,{...c});case"shadowsocks":return e.jsx(Sc,{...c});case"dokodemo-door":return e.jsx(kc,{...c});case"http":return e.jsx(Nc,{...c});case"socks":return e.jsx(Ec,{...c});default:return e.jsx(js,{...c})}};return e.jsx("div",{className:"modal-overlay",onClick:n,children:e.jsxs("div",{className:"modal-content",style:{maxWidth:"900px",width:"95%",height:"90vh",display:"flex",flexDirection:"column",padding:0,overflow:"hidden"},onClick:u=>u.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsxs("h3",{style:{margin:0},children:[t?"Edit":"Add"," Inbound"]}),!t&&e.jsxs("select",{value:s,onChange:u=>i(u.target.value),className:"form-input",style:{width:"auto",padding:"6px 32px 6px 12px",fontSize:"0.9rem",height:"auto",backgroundPosition:"right 8px center"},children:[e.jsx("option",{value:"vless",children:"VLESS"}),e.jsx("option",{value:"vmess",children:"VMess"}),e.jsx("option",{value:"trojan",children:"Trojan"}),e.jsx("option",{value:"shadowsocks",children:"Shadowsocks"}),e.jsx("option",{value:"dokodemo-door",children:"Dokodemo-door"}),e.jsx("option",{value:"http",children:"HTTP"}),e.jsx("option",{value:"socks",children:"SOCKS"})]})]}),e.jsx("button",{onClick:n,className:"modal-close",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:l()})]})})};function Ss({initialData:t,onClose:r,onSave:n,saving:a}){var c,l;const[o,s]=m.useState({tag:(t==null?void 0:t.tag)||"direct",domainStrategy:((c=t==null?void 0:t.settings)==null?void 0:c.domainStrategy)||"AsIs",redirect:((l=t==null?void 0:t.settings)==null?void 0:l.redirect)||""});m.useEffect(()=>{t||s(u=>({...u,tag:"freedom_out"}))},[]);const i=u=>{u.preventDefault();const d={tag:o.tag,protocol:"freedom",settings:{domainStrategy:o.domainStrategy,redirect:o.redirect||void 0}};n(d)};return e.jsxs("form",{onSubmit:i,style:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx("div",{className:"nav-tabs",style:{borderRadius:"0",borderBottom:"1px solid var(--border-color)",margin:0,padding:"8px 16px 0"},children:e.jsx("button",{type:"button",className:"nav-link active",style:{textTransform:"capitalize",borderRadius:"8px 8px 0 0",borderBottom:"none",padding:"10px 16px"},children:"General"})}),e.jsx("div",{className:"modal-body",style:{flex:1,overflowY:"auto",padding:"24px"},children:e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Tag"}),e.jsx("input",{type:"text",value:o.tag,onChange:u=>s({...o,tag:u.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"card card-body",style:{gridColumn:"1 / -1",background:"rgba(0,0,0,0.2)",border:"1px solid var(--border-color)"},children:[e.jsx("h4",{style:{marginBottom:"16px",color:"#3b82f6"},children:"Freedom Settings"}),e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Domain Strategy"}),e.jsxs("select",{value:o.domainStrategy,onChange:u=>s({...o,domainStrategy:u.target.value}),className:"form-input",children:[e.jsx("option",{value:"AsIs",children:"AsIs"}),e.jsx("option",{value:"UseIP",children:"UseIP"}),e.jsx("option",{value:"ForceIPv4",children:"ForceIPv4"}),e.jsx("option",{value:"ForceIPv6",children:"ForceIPv6"})]}),e.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"4px"},children:"Resolution strategy for domain names."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Redirect (Optional)"}),e.jsx("input",{type:"text",value:o.redirect,onChange:u=>s({...o,redirect:u.target.value}),className:"form-input",placeholder:"127.0.0.1:80"}),e.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"4px"},children:"Redirect traffic to this address."})]})]})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a,children:"Save Freedom"})]})]})}function Tc({initialData:t,onClose:r,onSave:n,saving:a}){var c,l;const[o,s]=m.useState({tag:(t==null?void 0:t.tag)||"block",type:((l=(c=t==null?void 0:t.settings)==null?void 0:c.response)==null?void 0:l.type)||"none"});m.useEffect(()=>{t||s(u=>({...u,tag:"blackhole_out"}))},[]);const i=u=>{u.preventDefault(),n({tag:o.tag,protocol:"blackhole",settings:{response:{type:o.type}}})};return e.jsxs("form",{onSubmit:i,style:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx("div",{className:"nav-tabs",style:{borderRadius:"0",borderBottom:"1px solid var(--border-color)",margin:0,padding:"8px 16px 0"},children:e.jsx("button",{type:"button",className:"nav-link active",style:{textTransform:"capitalize",borderRadius:"8px 8px 0 0",borderBottom:"none",padding:"10px 16px"},children:"General"})}),e.jsx("div",{className:"modal-body",style:{flex:1,overflowY:"auto",padding:"24px"},children:e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Tag"}),e.jsx("input",{type:"text",value:o.tag,onChange:u=>s({...o,tag:u.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"card card-body",style:{gridColumn:"1 / -1",background:"rgba(0,0,0,0.2)",border:"1px solid var(--border-color)"},children:[e.jsx("h4",{style:{marginBottom:"16px",color:"#ef4444"},children:"Blackhole Settings"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Response Type"}),e.jsxs("select",{value:o.type,onChange:u=>s({...o,type:u.target.value}),className:"form-input",children:[e.jsx("option",{value:"none",children:"None (Drop)"}),e.jsx("option",{value:"http",children:"HTTP (403 Forbidden)"})]})]})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a,children:"Save Blackhole"})]})]})}const dt=()=>{const t=new Uint8Array(32);window.crypto.getRandomValues(t);let r="";for(let n=0;n<t.length;n++)r+=String.fromCharCode(t[n]);return btoa(r)},Ac=({peers:t=[],onChange:r})=>{const n=()=>{r([...t,{publicKey:"",endpoint:"",preSharedKey:"",allowedIPs:["0.0.0.0/0","::/0"],keepAlive:25}])},a=()=>{r([...t,{publicKey:dt(),endpoint:"127.0.0.1:51820",preSharedKey:dt(),allowedIPs:["0.0.0.0/0","::/0"],keepAlive:25}])},o=c=>{r(t.filter((l,u)=>u!==c))},s=(c,l,u)=>{const d=[...t];l==="allowedIPs"?d[c][l]=u.split(",").map(p=>p.trim()).filter(p=>p):d[c][l]=u,r(d)},i=c=>{const l=[...t];l[c].publicKey=dt(),l[c].preSharedKey=dt(),r(l)};return e.jsxs("div",{className:"card card-body",style:{background:"rgba(0,0,0,0.1)",padding:"12px",border:"1px solid var(--border-color)",marginTop:"8px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("label",{className:"form-label",style:{margin:0},children:"Peers"}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{type:"button",onClick:a,className:"btn btn-primary",style:{fontSize:"0.75rem",padding:"4px 8px",height:"auto",background:"#8b5cf6",borderColor:"#7c3aed"},children:"+ Generate"}),e.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",style:{fontSize:"0.75rem",padding:"4px 8px",height:"auto"},children:"+ Add"})]})]}),t.length===0&&e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)",textAlign:"center",padding:"8px"},children:"No peers configured."}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:t.map((c,l)=>e.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",padding:"12px",borderRadius:"6px",border:"1px solid var(--border-color)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsxs("span",{style:{fontSize:"0.8rem",fontWeight:"bold",color:"#10b981"},children:["Peer #",l+1]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{type:"button",onClick:()=>i(l),className:"btn btn-sm btn-secondary",style:{fontSize:"0.7rem",padding:"2px 6px"},children:"Gen Keys"}),e.jsx("button",{type:"button",onClick:()=>o(l),className:"btn btn-sm btn-danger",style:{fontSize:"0.7rem",padding:"2px 6px"},children:"Remove"})]})]}),e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",style:{fontSize:"0.75rem"},children:"Peer Public Key"}),e.jsx("input",{type:"text",value:c.publicKey,onChange:u=>s(l,"publicKey",u.target.value),className:"form-input",style:{fontSize:"0.8rem",fontFamily:"monospace"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",style:{fontSize:"0.75rem"},children:"Endpoint (Host:Port)"}),e.jsx("input",{type:"text",value:c.endpoint,onChange:u=>s(l,"endpoint",u.target.value),className:"form-input",placeholder:"example.com:51820",style:{fontSize:"0.8rem"}})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",style:{fontSize:"0.75rem"},children:"Pre-Shared Key (Optional)"}),e.jsx("input",{type:"text",value:c.preSharedKey,onChange:u=>s(l,"preSharedKey",u.target.value),className:"form-input",style:{fontSize:"0.8rem",fontFamily:"monospace"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",style:{fontSize:"0.75rem"},children:"Allowed IPs"}),e.jsx("input",{type:"text",value:Array.isArray(c.allowedIPs)?c.allowedIPs.join(", "):c.allowedIPs,onChange:u=>s(l,"allowedIPs",u.target.value),className:"form-input",placeholder:"0.0.0.0/0",style:{fontSize:"0.8rem"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",style:{fontSize:"0.75rem"},children:"Keep Alive (s)"}),e.jsx("input",{type:"number",value:c.keepAlive,onChange:u=>s(l,"keepAlive",parseInt(u.target.value)),className:"form-input",style:{fontSize:"0.8rem"}})]})]})]},l))})]})};function Hc({initialData:t,onClose:r,onSave:n,saving:a}){var c,l,u,d,p;const[o,s]=m.useState({tag:(t==null?void 0:t.tag)||"wireguard_out",mtu:((c=t==null?void 0:t.settings)==null?void 0:c.mtu)||1420,secretKey:((l=t==null?void 0:t.settings)==null?void 0:l.secretKey)||dt(),address:(u=t==null?void 0:t.settings)!=null&&u.address?t.settings.address.join(", "):"172.16.0.2/32",peers:((d=t==null?void 0:t.settings)==null?void 0:d.peers)||[],noKernelTun:((p=t==null?void 0:t.settings)==null?void 0:p.noKernelTun)||!1}),i=h=>{h.preventDefault();const f={tag:o.tag,protocol:"wireguard",settings:{mtu:parseInt(o.mtu),secretKey:o.secretKey,address:o.address.split(",").map(x=>x.trim()).filter(x=>x),peers:o.peers,noKernelTun:o.noKernelTun}};n(f)};return e.jsxs("form",{onSubmit:i,style:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx("div",{className:"nav-tabs",style:{borderRadius:"0",borderBottom:"1px solid var(--border-color)",margin:0,padding:"8px 16px 0"},children:e.jsx("button",{type:"button",className:"nav-link active",style:{textTransform:"capitalize",borderRadius:"8px 8px 0 0",borderBottom:"none",padding:"10px 16px"},children:"Outbound Config"})}),e.jsx("div",{className:"modal-body",style:{flex:1,overflowY:"auto",padding:"24px"},children:e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Tag"}),e.jsx("input",{type:"text",value:o.tag,onChange:h=>s({...o,tag:h.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"card card-body",style:{gridColumn:"1 / -1",background:"rgba(0,0,0,0.2)",border:"1px solid var(--border-color)"},children:[e.jsx("h4",{style:{marginBottom:"16px",color:"#10b981"},children:"WireGuard Interface"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Client Private Key"}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("input",{type:"text",value:o.secretKey,onChange:h=>s({...o,secretKey:h.target.value}),className:"form-input",style:{flex:1,fontFamily:"monospace"}}),e.jsx("button",{type:"button",onClick:()=>s({...o,secretKey:dt()}),className:"btn btn-primary",style:{background:"#10b981",borderColor:"#059669",whiteSpace:"nowrap"},children:"Generate"})]})]}),e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Local Address"}),e.jsx("input",{type:"text",value:o.address,onChange:h=>s({...o,address:h.target.value}),className:"form-input",placeholder:"172.16.0.2/32"}),e.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"4px"},children:"The IP address of this interface."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"MTU"}),e.jsx("input",{type:"number",value:o.mtu,onChange:h=>s({...o,mtu:h.target.value}),className:"form-input"})]}),e.jsx("div",{className:"form-group",style:{display:"flex",alignItems:"center",paddingTop:"10px"},children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",style:{color:"var(--text-secondary)"},children:[e.jsx("input",{type:"checkbox",checked:o.noKernelTun,onChange:h=>s({...o,noKernelTun:h.target.checked})}),"No Kernel Tun"]})})]}),e.jsx("div",{className:"form-group",style:{marginTop:"16px"},children:e.jsx(Ac,{peers:o.peers,onChange:h=>s({...o,peers:h})})})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a,children:"Save WireGuard"})]})]})}const Mc=({outbound:t,onClose:r,onSave:n,saving:a})=>{const[o,s]=m.useState((t==null?void 0:t.protocol)||"freedom"),i={initialData:t,onClose:r,onSave:n,saving:a},c=()=>{switch(o){case"freedom":return e.jsx(Ss,{...i});case"blackhole":return e.jsx(Tc,{...i});case"wireguard":return e.jsx(Hc,{...i});default:return e.jsx(Ss,{...i})}};return e.jsx("div",{className:"modal-overlay",onClick:r,children:e.jsxs("div",{className:"modal-content",style:{maxWidth:"900px",width:"95%",height:"90vh",display:"flex",flexDirection:"column",padding:0,overflow:"hidden"},onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsxs("h3",{style:{margin:0},children:[t?"Edit":"Add"," Outbound"]}),!t&&e.jsxs("select",{value:o,onChange:l=>s(l.target.value),className:"form-input",style:{width:"auto",padding:"6px 32px 6px 12px",fontSize:"0.9rem",height:"auto",backgroundPosition:"right 8px center"},children:[e.jsx("option",{value:"freedom",children:"Freedom (Direct)"}),e.jsx("option",{value:"wireguard",children:"WireGuard"}),e.jsx("option",{value:"blackhole",children:"Blackhole (Block)"})]})]}),e.jsx("button",{onClick:r,className:"modal-close",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:c()})]})})};function Lc({rule:t,outbounds:r,inbounds:n,onClose:a,onSave:o,saving:s}){const i=t!=null&&t.inboundTag?Array.isArray(t.inboundTag)?t.inboundTag:[t.inboundTag]:[],[c,l]=m.useState({type:(t==null?void 0:t.type)||"field",outboundTag:(t==null?void 0:t.outboundTag)||"DIRECT",ips:t!=null&&t.ip?t.ip.join(`
`):"",domains:t!=null&&t.domain?t.domain.join(`
`):"",port:(t==null?void 0:t.port)||"",inboundTags:i,protocols:t!=null&&t.protocol?t.protocol.join(","):""}),u=p=>{p.preventDefault();const h={type:c.type,outboundTag:c.outboundTag};c.ips.trim()&&(h.ip=c.ips.split(`
`).map(f=>f.trim()).filter(f=>f)),c.domains.trim()&&(h.domain=c.domains.split(`
`).map(f=>f.trim()).filter(f=>f)),c.port.trim()&&(h.port=c.port.trim()),c.inboundTags.length>0&&(h.inboundTag=c.inboundTags),c.protocols.trim()&&(h.protocol=c.protocols.split(",").map(f=>f.trim()).filter(f=>f)),o(h)},d=p=>{l(h=>{const x=h.inboundTags.includes(p)?h.inboundTags.filter(v=>v!==p):[...h.inboundTags,p];return{...h,inboundTags:x}})};return e.jsx("div",{className:"modal-overlay",onClick:a,children:e.jsxs("div",{className:"modal-content",style:{maxWidth:"700px",width:"95%",maxHeight:"90vh",display:"flex",flexDirection:"column"},onClick:p=>p.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{style:{margin:0},children:t?"Edit Routing Rule":"Add Routing Rule"}),e.jsx("button",{onClick:a,className:"modal-close",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:u,className:"modal-body",style:{overflowY:"auto"},children:[e.jsxs("div",{className:"card card-body",style:{background:"rgba(59, 130, 246, 0.1)",marginBottom:"16px",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[e.jsx("h4",{style:{fontSize:"0.9rem",color:"#60a5fa",marginBottom:"8px",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Target (Destination)"}),e.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[e.jsx("label",{className:"form-label",children:"Route traffic to:"}),e.jsxs("select",{value:c.outboundTag,onChange:p=>l({...c,outboundTag:p.target.value}),className:"form-input",style:{fontWeight:"bold"},children:[r.map((p,h)=>e.jsxs("option",{value:p.tag,children:[p.tag," (",p.protocol,")"]},h)),!r.find(p=>p.tag==="DIRECT")&&e.jsx("option",{value:"DIRECT",children:"DIRECT"}),!r.find(p=>p.tag==="BLOCK")&&e.jsx("option",{value:"BLOCK",children:"BLOCK"})]})]})]}),e.jsx("div",{className:"grid-2",children:e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Source Inbounds"}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",border:"1px solid var(--border-color)",borderRadius:"0.375rem",padding:"12px",maxHeight:"150px",overflowY:"auto",display:"flex",flexWrap:"wrap",gap:"8px"},children:[n&&n.length>0?n.map((p,h)=>e.jsxs("label",{className:"badge badge-gray cursor-pointer",style:{display:"flex",alignItems:"center",gap:"6px",background:c.inboundTags.includes(p.tag)?"var(--accent-blue)":void 0,color:c.inboundTags.includes(p.tag)?"#fff":void 0,border:c.inboundTags.includes(p.tag)?"1px solid var(--accent-blue)":void 0},children:[e.jsx("input",{type:"checkbox",checked:c.inboundTags.includes(p.tag),onChange:()=>d(p.tag),style:{display:"none"}}),p.tag||"Unnamed"]},h)):e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem"},children:"No inbounds available."}),e.jsxs("label",{className:"badge badge-gray cursor-pointer",style:{display:"flex",alignItems:"center",gap:"6px",background:c.inboundTags.includes("api")?"var(--accent-blue)":void 0,color:c.inboundTags.includes("api")?"#fff":void 0},children:[e.jsx("input",{type:"checkbox",checked:c.inboundTags.includes("api"),onChange:()=>d("api"),style:{display:"none"}}),"api"]})]}),e.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"4px"},children:"Select which inbounds this rule applies to. Leave empty to apply to all (unless other conditions match)."})]})}),e.jsx("hr",{style:{borderColor:"var(--border-color)",margin:"16px 0"}}),e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Target IP Rules (One per line)"}),e.jsx("textarea",{value:c.ips,onChange:p=>l({...c,ips:p.target.value}),className:"form-input",rows:5,placeholder:`geoip:private
8.8.8.8`,style:{fontFamily:"monospace",fontSize:"0.85rem"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Target Domain Rules (One per line)"}),e.jsx("textarea",{value:c.domains,onChange:p=>l({...c,domains:p.target.value}),className:"form-input",rows:5,placeholder:`geosite:google
domain:example.com`,style:{fontFamily:"monospace",fontSize:"0.85rem"}})]})]}),e.jsxs("div",{className:"grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Target Port"}),e.jsx("input",{type:"text",value:c.port,onChange:p=>l({...c,port:p.target.value}),className:"form-input",placeholder:"80,443 or 1000-2000"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Target Protocol"}),e.jsx("input",{type:"text",value:c.protocols,onChange:p=>l({...c,protocols:p.target.value}),className:"form-input",placeholder:"http,tls,bittorrent"})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:a,className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{onClick:u,className:"btn btn-primary",disabled:s,children:s?"Saving...":"Save Rule"})]})]})})}const Bc=t=>{switch(t){case"vless":return{background:"rgba(15, 91, 32, 0.15)",color:"var(--accent-purple)",border:"1px solid rgba(139, 92, 246, 0.3)"};case"vmess":return{background:"rgba(59, 130, 246, 0.15)",color:"var(--accent-blue)",border:"1px solid rgba(59, 130, 246, 0.3)"};case"trojan":return{background:"rgba(6, 182, 212, 0.15)",color:"var(--accent-cyan)",border:"1px solid rgba(6, 182, 212, 0.3)"};case"shadowsocks":return{background:"rgba(249, 115, 22, 0.15)",color:"var(--accent-orange)",border:"1px solid rgba(249, 115, 22, 0.3)"};case"wireguard":return{background:"rgba(34, 197, 94, 0.15)",color:"var(--accent-green)",border:"1px solid rgba(34, 197, 94, 0.3)"};default:return{background:"rgba(115, 115, 115, 0.15)",color:"var(--text-muted)",border:"1px solid rgba(115, 115, 115, 0.3)"}}};function Ic({inbounds:t,onAdd:r,onEdit:n,onDelete:a,isMobile:o}){return e.jsxs("div",{children:[e.jsxs("div",{className:"section-header",style:{display:"flex",flexDirection:o?"column":"row",justifyContent:"space-between",alignItems:o?"flex-start":"center",marginBottom:"16px",gap:o?"12px":"0"},children:[e.jsx("h3",{style:{margin:0},children:"Inbound Connections"}),e.jsxs("button",{onClick:r,className:"btn btn-primary",style:{width:o?"100%":"auto"},children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"18px",height:"18px",marginRight:"6px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"Add Inbound"]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[t.map((s,i)=>{var c,l;return e.jsxs("div",{className:"card card-body",style:{display:"flex",flexDirection:o?"column":"row",justifyContent:"space-between",alignItems:o?"flex-start":"center",flexWrap:"wrap",gap:"16px"},children:[e.jsxs("div",{style:{width:"100%"},children:[e.jsxs("div",{className:"flex gap-2 items-center mb-2",style:{flexWrap:"wrap"},children:[e.jsx("span",{className:"badge",style:Bc(s.protocol),children:s.protocol}),e.jsx("span",{className:"badge badge-gray",children:((c=s.streamSettings)==null?void 0:c.network)||"tcp"}),((l=s.streamSettings)==null?void 0:l.security)&&s.streamSettings.security!=="none"&&e.jsx("span",{className:"badge badge-success",children:s.streamSettings.security})]}),e.jsx("h4",{style:{fontSize:"1.1rem",fontWeight:"600",color:"var(--text-primary)",marginBottom:"4px",wordBreak:"break-all"},children:s.tag||"Unnamed Inbound"}),e.jsxs("p",{style:{fontSize:"0.9rem",color:"var(--text-muted)"},children:["Port: ",e.jsx("span",{style:{color:"var(--text-primary)"},children:s.port})," | Listen: ",e.jsx("span",{style:{color:"var(--text-primary)"},children:s.listen||"0.0.0.0"})]})]}),e.jsxs("div",{className:"flex gap-2",style:{width:o?"100%":"auto",marginTop:o?"8px":"0"},children:[e.jsx("button",{onClick:()=>n(i),className:"btn btn-secondary",style:{flex:1},children:"Edit"}),e.jsx("button",{onClick:()=>a(i),className:"btn btn-danger",style:{flex:1},children:"Delete"})]})]},i)}),t.length===0&&e.jsx("div",{className:"card card-body",style:{textAlign:"center",padding:"32px",color:"var(--text-muted)"},children:e.jsx("p",{children:"No inbounds found. Add one to get started."})})]})]})}function _c({outbounds:t,onAdd:r,onEdit:n,onDelete:a,isMobile:o}){const s=i=>{switch(i){case"freedom":return"";case"blackhole":return"";case"shadowsocks":return"";case"vmess":return"";case"vless":return"";case"wireguard":return"";default:return""}};return e.jsxs("div",{children:[e.jsxs("div",{className:"section-header",style:{display:"flex",flexDirection:o?"column":"row",justifyContent:"space-between",alignItems:o?"flex-start":"center",marginBottom:"16px",gap:o?"12px":"0"},children:[e.jsx("h3",{style:{margin:0},children:"Outbound Connections"}),e.jsxs("button",{onClick:r,className:"btn btn-primary",style:{width:o?"100%":"auto"},children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"18px",height:"18px",marginRight:"6px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"Add Outbound"]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:o?"1fr":"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px"},children:t.map((i,c)=>{var l;return e.jsxs("div",{className:"card card-body",style:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx("div",{className:"flex justify-between items-start mb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{style:{fontSize:"1.8rem"},children:s(i.protocol)}),e.jsxs("div",{children:[e.jsx("h4",{style:{fontWeight:"600",color:"var(--text-primary)",wordBreak:"break-all"},children:i.tag||"Unnamed"}),e.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-muted)",textTransform:"uppercase"},children:i.protocol})]})]})}),((l=i.settings)==null?void 0:l.domainStrategy)&&e.jsxs("div",{className:"badge badge-gray",style:{alignSelf:"flex-start",marginBottom:"16px"},children:["Strategy: ",i.settings.domainStrategy]}),e.jsxs("div",{className:"flex gap-2 mt-auto pt-3",style:{borderTop:"1px solid var(--border-color)"},children:[e.jsx("button",{onClick:()=>n(c),className:"btn btn-secondary",style:{flex:1,padding:"8px"},children:"Edit"}),e.jsx("button",{onClick:()=>a(c),className:"btn btn-danger",style:{padding:"8px"},children:"Delete"})]})]},c)})})]})}function zc({rules:t,outbounds:r,onAdd:n,onEdit:a,onDelete:o,isMobile:s}){return e.jsxs("div",{children:[e.jsxs("div",{className:"section-header",style:{display:"flex",flexDirection:s?"column":"row",justifyContent:"space-between",alignItems:s?"flex-start":"center",marginBottom:"16px",gap:s?"12px":"0"},children:[e.jsx("h3",{style:{margin:0},children:"Routing Rules"}),e.jsxs("button",{onClick:n,className:"btn btn-primary",style:{width:s?"100%":"auto"},children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"18px",height:"18px",marginRight:"6px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"Add Rule"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:t.map((i,c)=>{var l,u;return e.jsxs("div",{className:"card card-body",style:{display:"flex",flexDirection:s?"column":"row",justifyContent:"space-between",alignItems:s?"flex-start":"center",gap:"16px",flexWrap:"wrap"},children:[e.jsxs("div",{style:{flex:1,minWidth:s?"100%":"200px"},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",style:{flexWrap:"wrap"},children:[e.jsxs("span",{className:"badge badge-gray",children:["Rule #",c+1]}),e.jsx("span",{style:{color:"var(--text-muted)"},children:""}),e.jsx("span",{className:`badge ${i.outboundTag==="BLOCK"?"badge-danger":"badge-success"}`,children:i.outboundTag})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.ip&&i.ip.slice(0,3).map((d,p)=>e.jsxs("span",{className:"badge badge-gray",style:{fontFamily:"monospace"},children:["IP: ",d]},p)),i.domain&&i.domain.slice(0,3).map((d,p)=>e.jsxs("span",{className:"badge badge-gray",style:{fontFamily:"monospace"},children:["Dom: ",d]},p)),i.port&&e.jsxs("span",{className:"badge badge-gray",style:{fontFamily:"monospace"},children:["Port: ",i.port]}),(((l=i.ip)==null?void 0:l.length)>3||((u=i.domain)==null?void 0:u.length)>3)&&e.jsx("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)",alignSelf:"center"},children:"...more"})]})]}),e.jsxs("div",{className:"flex gap-2",style:{width:s?"100%":"auto"},children:[e.jsx("button",{onClick:()=>a(c),className:"btn btn-secondary",style:{flex:1},children:"Edit"}),e.jsx("button",{onClick:()=>o(c),className:"btn btn-danger",style:{flex:1},children:"Delete"})]})]},c)})})]})}function Oc({config:t,onClose:r,onSave:n,saving:a,isMobile:o}){const[s,i]=m.useState(JSON.stringify(t,null,2)),[c,l]=m.useState("");m.useEffect(()=>{i(JSON.stringify(t,null,2))},[t]);const u=p=>{const h=p.target.value;i(h);try{if(h.trim()===""){l("");return}JSON.parse(h),l("")}catch(f){let x=f.message;const v=x.match(/at position (\d+)/);if(v){const g=parseInt(v[1],10),b=h.substring(0,g).split(`
`).length,S=x.replace(/ in JSON at position \d+/,"");x=`Syntax Error (Line ${b}): ${S}`}else x=`Syntax Error: ${x}`;l(x)}},d=()=>{if(!c)try{const p=JSON.parse(s);if(!p.inbounds||!Array.isArray(p.inbounds))throw new Error("Invalid Configuration: 'inbounds' array is missing or invalid.");if(p.inbounds.length===0)throw new Error("Invalid Configuration: You must have at least one Inbound connection defined.");n(p)}catch(p){const h=p.message.replace(/^JSON.parse: /,"");l("Error: "+h)}};return e.jsx("div",{className:"modal-overlay",onClick:r,style:{padding:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{className:"modal-content",style:{maxWidth:"800px",width:"100%",height:o?"85vh":"80vh",maxHeight:"90vh",display:"flex",flexDirection:"column"},onClick:p=>p.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{style:{margin:0},children:"Raw JSON Editor"}),e.jsx("button",{onClick:r,className:"modal-close",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"modal-body",style:{flex:1,display:"flex",flexDirection:"column",padding:o?"10px":"20px",overflow:"hidden"},children:[c&&e.jsxs("div",{className:"badge badge-danger",style:{marginBottom:"12px",width:"100%",display:"flex",alignItems:"center",padding:"10px",fontSize:"0.9rem",fontWeight:"500",borderRadius:"8px"},children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"20px",height:"20px",marginRight:"8px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),c]}),e.jsx("textarea",{value:s,onChange:u,className:"form-input",style:{flex:1,fontFamily:"monospace",fontSize:o?"12px":"13px",lineHeight:"1.5",whiteSpace:"pre",resize:"none",overflow:"auto",width:"100%",borderColor:c?"#ef4444":"var(--border-color)"},autoCorrect:"off",autoCapitalize:"off",spellCheck:"false"})]}),e.jsxs("div",{className:"modal-footer",style:{flexDirection:o?"column-reverse":"row",gap:o?"8px":"12px"},children:[e.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",style:{width:o?"100%":"auto"},children:"Cancel"}),e.jsx("button",{onClick:d,className:"btn btn-primary",disabled:a||!!c,style:{width:o?"100%":"auto",opacity:a||c?.6:1,cursor:a||c?"not-allowed":"pointer"},children:a?"Saving...":"Save Configuration"})]})]})})}function Uc({title:t,message:r,onConfirm:n,onCancel:a,isMobile:o}){return e.jsx("div",{className:"modal-overlay",onClick:a,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(4px)",padding:"16px"},children:e.jsxs("div",{className:"modal-content",style:{width:"100%",maxWidth:"400px",margin:"auto",position:"relative",background:"var(--bg-card, #1e1e1e)",borderRadius:"16px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},onClick:function(s){s.stopPropagation()},children:[e.jsx("div",{className:"modal-header",style:{borderBottom:"none",paddingBottom:"0"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"rgba(239, 68, 68, 0.15)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#ef4444",strokeWidth:"2",style:{width:"24px",height:"24px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h3",{style:{margin:0},children:t})]})}),e.jsx("div",{className:"modal-body",style:{paddingTop:"16px"},children:e.jsx("p",{style:{color:"var(--text-secondary)",margin:0},children:r})}),e.jsxs("div",{className:"modal-footer",style:{borderTop:"none",paddingTop:"8px"},children:[e.jsx("button",{onClick:a,className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{onClick:n,className:"btn btn-danger",children:"Confirm"})]})]})})}function Wc(){var je,me;const{activeConfig:t}=Ve(),r=We(),[n,a]=m.useState(!0),[o,s]=m.useState(!1),[i,c]=m.useState(null),[l,u]=m.useState("inbounds"),[d,p]=m.useState(window.innerWidth<768);m.useEffect(()=>{const H=()=>p(window.innerWidth<768);return window.addEventListener("resize",H),()=>window.removeEventListener("resize",H)},[]);const[h,f]=m.useState(!1),[x,v]=m.useState(null),[g,b]=m.useState(!1),[S,k]=m.useState(null),[w,C]=m.useState(!1),[E,y]=m.useState(null),[R,P]=m.useState(!1),[T,I]=m.useState(null);m.useEffect(()=>{t?_():a(!1)},[t]);const _=async()=>{try{a(!0);const H=await se.getCoreConfig(t.id);c(H.data)}catch(H){console.error(H),M.error("Failed to load core config")}finally{a(!1)}},A=async H=>{try{return s(!0),await se.updateCoreConfig(t.id,H),c(H),M.success("Configuration saved"),!0}catch{return M.error("Failed to save configuration"),!1}finally{s(!1)}},F=()=>{var H,L;if(!(i!=null&&i.inbounds))return null;for(const ie of i.inbounds){const fe=(L=(H=ie==null?void 0:ie.streamSettings)==null?void 0:H.tlsSettings)==null?void 0:L.certificates;if(fe&&fe.length>0)return{certificateFile:fe[0].certificateFile,keyFile:fe[0].keyFile}}return null},V=(H,L,ie)=>{I({title:H,message:L,onConfirm:()=>{ie(),I(null)}})},U=H=>{const L={...i};L.inbounds||(L.inbounds=[]),x!==null?L.inbounds[x]=H:L.inbounds.push(H),A(L).then(ie=>{ie&&(f(!1),v(null))})},O=H=>{V("Delete Inbound","Are you sure you want to delete this inbound connection?",()=>{const L={...i};L.inbounds.splice(H,1),A(L)})},K=H=>{const L={...i};L.outbounds||(L.outbounds=[]),S!==null?L.outbounds[S]=H:L.outbounds.push(H),A(L).then(ie=>{ie&&(b(!1),k(null))})},X=H=>{V("Delete Outbound","Are you sure you want to delete this outbound connection?",()=>{const L={...i};L.outbounds.splice(H,1),A(L)})},q=H=>{const L={...i};L.routing||(L.routing={}),L.routing.rules||(L.routing.rules=[]),E!==null?L.routing.rules[E]=H:L.routing.rules.push(H),A(L).then(ie=>{ie&&(C(!1),y(null))})},ne=H=>{V("Delete Rule","Are you sure you want to delete this routing rule?",()=>{const L={...i};L.routing.rules.splice(H,1),A(L)})},ce=H=>{const L={...i,log:{...i.log,loglevel:H}};A(L)};return n?e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{className:"loading-text",children:"Loading Config..."})]}):t?e.jsxs("div",{className:"animate-fade-in",style:{padding:d?"16px":"24px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:d?"column":"row",justifyContent:"space-between",alignItems:d?"flex-start":"center",marginBottom:"24px",gap:d?"16px":"0"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--text-primary)",marginBottom:"8px"},children:"Core Configuration"}),e.jsxs("p",{style:{color:"var(--text-muted)"},children:["Manage low-level Xray configuration for ",t.name]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",width:d?"100%":"auto"},children:[e.jsxs("select",{value:((je=i==null?void 0:i.log)==null?void 0:je.loglevel)||"warning",onChange:H=>ce(H.target.value),className:"form-input",style:{width:d?"50%":"auto",minWidth:"140px",paddingRight:"35px",cursor:"pointer"},children:[e.jsx("option",{value:"debug",children:"Log: Debug"}),e.jsx("option",{value:"info",children:"Log: Info"}),e.jsx("option",{value:"warning",children:"Log: Warning"}),e.jsx("option",{value:"error",children:"Log: Error"}),e.jsx("option",{value:"none",children:"Log: None"})]}),e.jsxs("button",{onClick:()=>P(!0),className:"btn btn-secondary",style:{height:"42px",padding:"0 16px",whiteSpace:"nowrap",display:"flex",alignItems:"center",flex:d?1:"none",justifyContent:"center"},children:[e.jsx("svg",{style:{width:"18px",height:"18px",marginRight:"6px"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})}),"Edit JSON"]})]})]}),e.jsx("div",{className:"nav-tabs",style:{overflowX:"auto",whiteSpace:"nowrap"},children:["inbounds","outbounds","routing"].map(H=>e.jsx("button",{onClick:()=>u(H),className:`nav-link ${l===H?"active":""}`,style:{textTransform:"capitalize"},children:H},H))}),e.jsxs("div",{style:{marginTop:"20px"},children:[l==="inbounds"&&e.jsx(Ic,{inbounds:(i==null?void 0:i.inbounds)||[],onAdd:()=>f(!0),onEdit:H=>v(H),onDelete:O,isMobile:d}),l==="outbounds"&&e.jsx(_c,{outbounds:(i==null?void 0:i.outbounds)||[],onAdd:()=>b(!0),onEdit:H=>k(H),onDelete:X,isMobile:d}),l==="routing"&&e.jsx(zc,{rules:((me=i==null?void 0:i.routing)==null?void 0:me.rules)||[],outbounds:(i==null?void 0:i.outbounds)||[],onAdd:()=>C(!0),onEdit:H=>y(H),onDelete:ne,isMobile:d})]}),(h||x!==null)&&e.jsx(Pc,{inbound:x!==null?i.inbounds[x]:null,defaultCert:F(),onClose:()=>{f(!1),v(null)},onSave:U,saving:o,isMobile:d}),(g||S!==null)&&e.jsx(Mc,{outbound:S!==null?i.outbounds[S]:null,onClose:()=>{b(!1),k(null)},onSave:K,saving:o,isMobile:d}),(w||E!==null)&&e.jsx(Lc,{rule:E!==null?i.routing.rules[E]:null,outbounds:(i==null?void 0:i.outbounds)||[],inbounds:(i==null?void 0:i.inbounds)||[],onClose:()=>{C(!1),y(null)},onSave:q,saving:o,isMobile:d}),R&&e.jsx(Oc,{config:i,onClose:()=>P(!1),onSave:H=>{A(H).then(L=>{L&&P(!1)})},saving:o,isMobile:d}),T&&e.jsx(Uc,{title:T.title,message:T.message,onConfirm:T.onConfirm,onCancel:()=>I(null),isMobile:d})]}):e.jsxs("div",{className:"empty-state",style:{padding:"40px",textAlign:"center",marginTop:"40px"},children:[e.jsx("div",{className:"icon-box",style:{background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6",width:"64px",height:"64px",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px auto"},children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"32px",height:"32px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2"})})}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"10px"},children:"Server Not Configured"}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"20px"},children:"You haven't added a Marzban server yet."}),e.jsx("button",{onClick:()=>r("/settings"),className:"btn btn-primary",children:"Go to Settings"})]})}function Fc(){const{activeConfig:t}=Ve(),r=We(),[n,a]=m.useState(!0),[o,s]=m.useState(!1),[i,c]=m.useState(null),[l,u]=m.useState(!1);m.useEffect(()=>{u(window.innerWidth<768);const C=()=>u(window.innerWidth<768);return window.addEventListener("resize",C),()=>window.removeEventListener("resize",C)},[]);const[d,p]=m.useState(null),[h,f]=m.useState(!1),[x,v]=m.useState(null);m.useEffect(()=>{t?g():a(!1)},[t]);const g=async()=>{try{a(!0);const C=await se.getHosts(t.id);c(C.data)}catch(C){console.error("Failed to load hosts:",C),M.error("Failed to load host configuration")}finally{a(!1)}},b=async C=>{try{return s(!0),await se.updateHosts(t.id,C),c(C),M.success("Configuration saved successfully! "),!0}catch(E){return console.error("Failed to save hosts:",E),M.error("Failed to save changes"),!1}finally{s(!1)}},S=C=>{const E={...i};E[C]||(E[C]=[]);const y={remark:"New Host Rule",address:"example.com",port:443,sni:"",host:"",security:"inbound_default",alpn:"",fingerprint:"",allowinsecure:!1,is_disabled:!1,mux_enable:!1,random_user_agent:!1};E[C].push(y),c(E),p({tag:C,index:E[C].length-1,data:y})},k=C=>{const E={...i};E[d.tag][d.index]=C,b(E).then(y=>{y&&p(null)})},w=()=>{if(!x)return;const C={...i};C[x.tag].splice(x.index,1),b(C).then(()=>{v(null)})};return n?e.jsx(qc,{}):t?e.jsxs("div",{className:"animate-fade-in",style:{padding:l?"16px":"0"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:l?"column":"row",justifyContent:"space-between",alignItems:l?"flex-start":"center",marginBottom:"24px",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:"700",color:"var(--text-primary)",margin:0},children:"Host Configuration"}),e.jsxs("p",{style:{color:"var(--text-muted)",marginTop:"4px"},children:["Manage connection rules for ",t.name]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",width:l?"100%":"auto"},children:[e.jsxs("button",{onClick:()=>f(!0),className:"btn btn-secondary",style:{flex:l?1:"none",justifyContent:"center"},children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"18px",height:"18px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})}),"Raw JSON"]}),e.jsxs("button",{onClick:g,className:"btn btn-primary",style:{flex:l?1:"none",justifyContent:"center"},children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"18px",height:"18px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 00 4.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"32px"},children:i&&Object.entries(i).map(([C,E])=>e.jsxs("div",{className:"animate-slide-up",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px",paddingBottom:"8px",borderBottom:"1px solid var(--border-color)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"700",color:"var(--accent-color)",textTransform:"uppercase",letterSpacing:"0.05em"},children:C}),e.jsx("span",{style:{background:"var(--bg-card-hover)",color:"var(--text-secondary)",padding:"2px 8px",borderRadius:"6px",fontSize:"0.75rem",fontWeight:"600"},children:E.length})]}),e.jsx("button",{onClick:()=>S(C),className:"btn btn-secondary",style:{padding:"6px 12px",fontSize:"0.8rem"},children:"+ Add"})]}),l?e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"20px"},children:E.map((y,R)=>e.jsx(Vc,{host:y,isMobile:l,onEdit:()=>p({tag:C,index:R,data:y}),onDelete:()=>v({tag:C,index:R})},R))}):e.jsx("div",{style:{border:"1px solid rgba(255, 255, 255, 0.05)",borderRadius:"12px",overflow:"hidden",background:"rgba(0, 0, 0, 0.2)"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",background:"linear-gradient(135deg, var(--table-sha) 0%, var(--table-sha-2) 100%)"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"rgba(5, 1, 1, 0.02)",borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:[e.jsx("th",{style:Ie,children:"Status"}),e.jsx("th",{style:Ie,children:"Remark"}),e.jsx("th",{style:Ie,children:"Address"}),e.jsx("th",{style:Ie,children:"Port"}),e.jsx("th",{style:Ie,children:"SNI"}),e.jsx("th",{style:Ie,children:"Host"}),e.jsx("th",{style:Ie,children:"Security"}),e.jsx("th",{style:Ie,children:"Actions"})]})}),e.jsx("tbody",{children:E.map((y,R)=>e.jsx($c,{index:R,host:y,onEdit:()=>p({tag:C,index:R,data:y}),onDelete:()=>v({tag:C,index:R})},R))})]})})]},C))}),d&&e.jsx(Kc,{host:d.data,onClose:()=>p(null),onSave:k,saving:o,isMobile:l}),x&&e.jsx(Dc,{title:"Delete Rule",message:"Are you sure?  This will remove the host rule permanently.",onConfirm:w,onCancel:()=>v(null),saving:o,isMobile:l}),h&&e.jsx(Xc,{data:i,onClose:()=>f(!1),onSave:C=>b(C).then(E=>E&&f(!1)),saving:o,isMobile:l})]}):e.jsxs("div",{className:"empty-state",style:{padding:"40px",textAlign:"center",marginTop:"40px"},children:[e.jsx("div",{className:"icon-box",style:{background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6",width:"64px",height:"64px",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px auto"},children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"32px",height:"32px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2"})})}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"10px"},children:"Server Not Configured"}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"20px"},children:"You haven't added a Marzban server yet."}),e.jsx("button",{onClick:()=>r("/settings"),className:"btn btn-primary",children:"Go to Settings"})]})}const Ie={padding:"18px 24px",textAlign:"left",fontSize:"0.75rem",fontWeight:"600",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.8px",borderBottom:"1px solid var(--border-color)"};function $c({host:t,index:r,onEdit:n,onDelete:a}){const o=!t.is_disabled,s=r%2===0,i={background:s?"transparent":"var(--bg-secondary)",transition:"background 0.15s ease",cursor:"default"},c={padding:"18px 24px",fontSize:"0.9rem",color:o?"var(--text-primary)":"var(--text-muted)",borderBottom:"1px solid var(--border-color)"};return e.jsxs("tr",{style:i,onMouseEnter:l=>l.currentTarget.style.background="var(--bg-card-hover)",onMouseLeave:l=>l.currentTarget.style.background=s?"transparent":"var(--bg-secondary)",children:[e.jsx("td",{style:{...c,paddingLeft:"24px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:o?"#22c55e":"#ef4444",boxShadow:o?"0 0 10px rgba(34, 197, 94, 0.6)":"0 0 10px rgba(239, 68, 68, 0.6)"}}),e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:"600",color:o?"#22c55e":"#ef4444",textTransform:"lowercase"},children:o?"active":"disabled"})]})}),e.jsx("td",{style:{...c,fontWeight:"500"},children:t.remark||"Unnamed Rule"}),e.jsx("td",{style:{...c,fontFamily:"monospace",fontSize:"0.85rem",color:"var(--text-primary)"},children:t.address}),e.jsx("td",{style:{...c,fontFamily:"monospace",fontSize:"0.85rem"},children:t.port||"-"}),e.jsx("td",{style:{...c,fontFamily:"monospace",fontSize:"0.8rem",color:"var(--text-secondary)"},children:t.sni||"-"}),e.jsx("td",{style:{...c,fontFamily:"monospace",fontSize:"0.8rem",color:"var(--text-secondary)"},children:t.host||"-"}),e.jsx("td",{style:c,children:e.jsx("span",{style:{background:t.security!=="inbound_default"?"rgba(34, 197, 94, 0.15)":"var(--bg-secondary)",color:t.security!=="inbound_default"?"#22c55e":"var(--text-muted)",padding:"4px 10px",borderRadius:"6px",fontSize:"0.75rem",fontWeight:"600",display:"inline-block"},children:t.security==="inbound_default"?"default":t.security.toLowerCase()})}),e.jsx("td",{style:{...c,paddingRight:"24px"},children:e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:n,title:"Edit",style:{padding:"6px",background:"transparent",border:"none",cursor:"pointer",color:"#fbbf24",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"6px"},onMouseEnter:l=>{l.currentTarget.style.background="rgba(251, 191, 36, 0.15)",l.currentTarget.style.transform="scale(1.1)"},onMouseLeave:l=>{l.currentTarget.style.background="transparent",l.currentTarget.style.transform="scale(1)"},children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"18px",height:"18px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:a,title:"Delete",style:{padding:"6px",background:"transparent",border:"none",cursor:"pointer",color:"#ef4444",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"6px"},onMouseEnter:l=>{l.currentTarget.style.background="rgba(239, 68, 68, 0.15)",l.currentTarget.style.transform="scale(1.1)"},onMouseLeave:l=>{l.currentTarget.style.background="transparent",l.currentTarget.style.transform="scale(1)"},children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"18px",height:"18px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]})}function Vc({host:t,onEdit:r,onDelete:n,isMobile:a}){const o=!t.is_disabled;return e.jsxs("div",{className:"card",style:{border:"1px solid var(--border-color)",borderRadius:"16px",overflow:"hidden",background:o?"var(--bg-card)":"var(--bg-card-hover)",opacity:o?1:.7,display:"flex",flexDirection:"column",boxShadow:"var(--shadow-sm)",transition:"all 0.2s ease-in-out"},children:[e.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid var(--border-color)",display:"flex",justifyContent:"space-between",alignItems:"center",background:"rgba(255,255,255,0.02)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",overflow:"hidden"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:o?"#22c55e":"#ef4444",boxShadow:o?"0 0 8px rgba(34, 197, 94, 0.4)":"none",flexShrink:0}}),e.jsx("h4",{style:{margin:0,fontSize:"0.95rem",fontWeight:"600",color:"var(--text-primary)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.remark||"Unnamed Rule"})]}),e.jsx("span",{style:{fontSize:"0.7rem",fontWeight:"600",color:o?"#22c55e":"#ef4444",background:o?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)",padding:"2px 8px",borderRadius:"6px"},children:o?"Active":"Disabled"})]}),e.jsxs("div",{style:{padding:"20px",display:"flex",flexDirection:"column",gap:"16px",flex:1},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsx(ws,{label:"Address",value:t.address}),e.jsx(ws,{label:"Port",value:t.port||"Default",highlight:!0})]}),(t.sni||t.host||t.security&&t.security!=="inbound_default"||t.alpn)&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",padding:"12px",background:"var(--bg-primary)",borderRadius:"10px",border:"1px solid var(--border-color)"},children:[t.sni&&e.jsx(zt,{label:"SNI",value:t.sni}),t.host&&e.jsx(zt,{label:"Host",value:t.host}),t.security&&t.security!=="inbound_default"&&e.jsx(zt,{label:"Security",value:t.security}),t.alpn&&e.jsx(zt,{label:"ALPN",value:t.alpn})]})]}),e.jsxs("div",{style:{padding:"12px 20px",borderTop:"1px solid var(--border-color)",display:"flex",gap:"10px",background:"rgba(255,255,255,0.01)"},children:[e.jsx("button",{onClick:r,className:"btn btn-secondary",style:{flex:1,padding:"8px",fontSize:"0.85rem",justifyContent:"center"},children:"Edit"}),e.jsx("button",{onClick:n,className:"btn btn-danger",style:{flex:1,padding:"8px",fontSize:"0.85rem",justifyContent:"center"},children:"Delete"})]})]})}function ws({label:t,value:r,highlight:n}){return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px",overflow:"hidden"},children:[e.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.5px"},children:t}),e.jsx("span",{style:{fontSize:"0.9rem",fontWeight:"500",color:n?"var(--accent-color)":"var(--text-primary)",fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:r})]})}function zt({label:t,value:r}){return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"0.8rem"},children:[e.jsxs("span",{style:{color:"var(--text-secondary)"},children:[t,":"]}),e.jsx("span",{style:{color:"var(--text-primary)",fontFamily:"monospace",fontWeight:"500",maxWidth:"65%",textAlign:"right",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:r})]})}function Kc({host:t,onClose:r,onSave:n,saving:a,isMobile:o}){const[s,i]=m.useState("basic"),[c,l]=m.useState({...t}),u=(p,h)=>l(f=>({...f,[p]:h})),d=p=>{p.preventDefault();const h={...c};h.port||(h.port=null),n(h)};return e.jsx("div",{className:"modal-overlay",onClick:r,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(4px)",padding:"10px"},children:e.jsxs("div",{className:"modal-content",style:{maxWidth:"600px",width:"100%",maxHeight:"90vh",overflowY:"auto",margin:"auto",position:"relative",background:"var(--bg-card, #1e1e1e)",borderRadius:"16px"},onClick:p=>p.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:t.remark?"Edit Rule":"New Rule"}),e.jsx("button",{onClick:r,className:"modal-close",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{style:{display:"flex",borderBottom:"1px solid var(--border-color)",padding:"0 24px",overflowX:"auto"},children:["basic","connection","advanced"].map(p=>e.jsx("button",{onClick:()=>i(p),style:{padding:"12px 16px",color:s===p?"var(--accent-color)":"var(--text-muted)",borderBottom:s===p?"2px solid var(--accent-color)":"2px solid transparent",fontWeight:"600",textTransform:"capitalize",fontSize:"0.9rem",whiteSpace:"nowrap"},children:p},p))}),e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{className:"modal-body",style:{maxHeight:"60vh",overflowY:"auto"},children:[s==="basic"&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Remark Name"}),e.jsx("input",{type:"text",className:"form-input",value:c.remark||"",onChange:p=>u("remark",p.target.value),placeholder:"e.g.  My Custom Rule",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Destination Address"}),e.jsx("input",{type:"text",className:"form-input",value:c.address||"",onChange:p=>u("address",p.target.value),placeholder:"domain.com or IP",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Port"}),e.jsx("input",{type:"number",className:"form-input",value:c.port||"",onChange:p=>u("port",p.target.value),placeholder:"Leave empty for default"})]}),e.jsx("div",{style:{padding:"16px",background:"var(--bg-primary)",borderRadius:"8px",border:"1px solid var(--border-color)"},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},children:[e.jsx("span",{style:{fontWeight:"500"},children:"Enable this rule"}),e.jsx("input",{type:"checkbox",style:{width:"18px",height:"18px"},checked:!c.is_disabled,onChange:p=>u("is_disabled",!p.target.checked)})]})})]}),s==="connection"&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"SNI (Server Name Indication)"}),e.jsx("input",{type:"text",className:"form-input",value:c.sni||"",onChange:p=>u("sni",p.target.value),placeholder:"Optional"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Host Header"}),e.jsx("input",{type:"text",className:"form-input",value:c.host||"",onChange:p=>u("host",p.target.value),placeholder:"Optional"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Path"}),e.jsx("input",{type:"text",className:"form-input",value:c.path||"",onChange:p=>u("path",p.target.value),placeholder:"/"})]})]}),s==="advanced"&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Security"}),e.jsxs("select",{className:"form-input",value:c.security||"inbound_default",onChange:p=>u("security",p.target.value),children:[e.jsx("option",{value:"inbound_default",children:"Default"}),e.jsx("option",{value:"none",children:"None"}),e.jsx("option",{value:"tls",children:"TLS"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Fingerprint"}),e.jsxs("select",{className:"form-input",value:c.fingerprint||"",onChange:p=>u("fingerprint",p.target.value),children:[e.jsx("option",{value:"",children:"None"}),e.jsx("option",{value:"chrome",children:"Chrome"}),e.jsx("option",{value:"firefox",children:"Firefox"}),e.jsx("option",{value:"random",children:"Random"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"ALPN"}),e.jsx("input",{type:"text",className:"form-input",value:c.alpn||"",onChange:p=>u("alpn",p.target.value),placeholder:"h2,http/1.1"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsx(yr,{label:"Allow Insecure",checked:c.allowinsecure,onChange:p=>u("allowinsecure",p)}),e.jsx(yr,{label:"Enable Mux",checked:c.mux_enable,onChange:p=>u("mux_enable",p)}),e.jsx(yr,{label:"Random User Agent",checked:c.random_user_agent,onChange:p=>u("random_user_agent",p)})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a,children:a?"Saving.. .":"Save Rule"})]})]})]})})}function yr({label:t,checked:r,onChange:n}){return e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px",background:"var(--bg-primary)",borderRadius:"8px",cursor:"pointer",border:"1px solid var(--border-color)"},children:[e.jsx("input",{type:"checkbox",checked:!!r,onChange:a=>n(a.target.checked),style:{width:"16px",height:"16px"}}),e.jsx("span",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:t})]})}function Dc({title:t,message:r,onConfirm:n,onCancel:a,saving:o,isMobile:s}){return e.jsx("div",{className:"modal-overlay",onClick:a,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(4px)",padding:"10px"},children:e.jsxs("div",{className:"modal-content",style:{maxWidth:"400px",width:"100%",margin:"auto",position:"relative",background:"var(--bg-card, #1e1e1e)",borderRadius:"16px"},onClick:i=>i.stopPropagation(),children:[e.jsx("div",{className:"modal-header",children:e.jsx("h3",{style:{color:"#ef4444"},children:t})}),e.jsx("div",{className:"modal-body",children:e.jsx("p",{style:{color:"var(--text-secondary)"},children:r})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{onClick:a,className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{onClick:n,className:"btn btn-danger",disabled:o,children:o?"Processing...":"Confirm"})]})]})})}function Xc({data:t,onClose:r,onSave:n,saving:a,isMobile:o}){const[s,i]=m.useState(JSON.stringify(t,null,2)),[c,l]=m.useState(""),u=p=>{const h=p.target.value;i(h);try{if(h.trim()===""){l("");return}JSON.parse(h),l("")}catch(f){let x=f.message||"Syntax Error";const v=x.match(/at position (\d+)/);if(v){const g=parseInt(v[1],10);x=`Syntax Error (Line ${h.substring(0,g).split(`
`).length}): ${x.replace(/ in JSON at position \d+/,"")}`}l(x)}},d=()=>{if(!c)try{n(JSON.parse(s))}catch(p){l(p.message)}};return e.jsx("div",{className:"modal-overlay",onClick:r,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(4px)",padding:"10px"},children:e.jsxs("div",{className:"modal-content",style:{maxWidth:"800px",width:"100%",height:o?"85vh":"80vh",maxHeight:"90vh",display:"flex",flexDirection:"column",margin:"auto",position:"relative",background:"var(--bg-card, #1e1e1e)",borderRadius:"16px"},onClick:p=>p.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Raw JSON"}),e.jsx("button",{onClick:r,className:"modal-close",children:"X"})]}),e.jsxs("div",{className:"modal-body",style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[c&&e.jsx("div",{style:{color:"#ef4444",marginBottom:"10px",padding:"10px",background:"rgba(239,68,68,0.1)",borderRadius:"4px"},children:c}),e.jsx("textarea",{className:"form-input",style:{fontFamily:"monospace",flex:1,resize:"none",width:"100%"},value:s,onChange:u,autoCorrect:"off",autoCapitalize:"off",spellCheck:"false"})]}),e.jsxs("div",{className:"modal-footer",style:{flexDirection:o?"column-reverse":"row",gap:o?"8px":"12px"},children:[e.jsx("button",{onClick:r,className:"btn btn-secondary",style:{width:o?"100%":"auto"},children:"Cancel"}),e.jsx("button",{onClick:d,className:"btn btn-primary",disabled:a||!!c,style:{width:o?"100%":"auto"},children:"Save"})]})]})})}function qc(){return e.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"60px"},children:e.jsx("div",{className:"spinner"})})}function Gc(){var{user:t,logout:r}=$e(),{configs:n,activeConfig:a,selectConfig:o}=Ve(),{theme:s,toggleTheme:i}=gn(),c=We();const[l,u]=m.useState(window.innerWidth<768);m.useEffect(()=>{const v=()=>{u(window.innerWidth<768)};return window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]);var d=function(){r(),c("/login")},p=function(v){for(var g=v.target.value,b=null,S=0;S<n.length;S++)if(n[S].id===g){b=n[S];break}b&&o(b)};const h={display:"flex",alignItems:"center",background:"var(--nav-bg)",padding:"6px",borderRadius:"16px",border:"1px solid var(--border-color)",width:"100%",boxSizing:"border-box",gap:"6px",overflowX:"auto",scrollbarWidth:"none",msOverflowStyle:"none"},f=({isActive:v})=>({flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:l?"12px 0":"12px 16px",borderRadius:"12px",textDecoration:"none",fontSize:"0.95rem",fontWeight:"600",whiteSpace:"nowrap",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",background:v?"#2563eb":"transparent",color:v?"#ffffff":"#6b6b6eff",boxShadow:v?"0 4px 12px rgba(37, 99, 235, 0.3)":"none",transform:v?"scale(1.01)":"scale(1)"}),x={display:l?"none":"block",marginLeft:"8px"};return e.jsxs("div",{className:"app-container",children:[e.jsx("header",{className:"header",children:e.jsxs("div",{className:"header-content",style:{flexWrap:l?"wrap":"nowrap",gap:l?"12px":"0"},children:[e.jsxs("div",{className:"logo",children:[e.jsx("div",{className:"logo-icon",children:e.jsx("img",{src:"/logo.png",alt:"App Logo",style:{width:"64px",height:"64px",objectFit:"contain"}})}),e.jsxs("div",{className:"logo-text",children:[e.jsx("h1",{children:"MARZ-X"}),e.jsx("p",{children:"Dashboard"})]})]}),e.jsxs("div",{className:"header-right",style:{width:l?"100%":"auto",justifyContent:l?"space-between":"flex-end"},children:[e.jsx("button",{onClick:i,className:"icon-btn",style:{marginRight:"8px",color:"var(--text-muted)"},title:`Switch to ${s==="dark"?"Light":"Dark"} Mode`,children:s==="dark"?e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"22px",height:"22px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"22px",height:"22px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),n.length>0&&e.jsxs("div",{className:"server-selector",style:{flex:l?1:"none"},children:[e.jsx("div",{className:"status-dot"}),e.jsx("select",{value:a?a.id:"",onChange:p,style:{width:"100%"},children:n.map(function(v){return e.jsx("option",{value:v.id,children:v.name},v.id)})})]}),e.jsxs("div",{className:"user-menu",children:[e.jsx("div",{className:"user-avatar",children:t&&t.username?t.username.charAt(0).toUpperCase():t&&t.email?t.email.charAt(0).toUpperCase():"A"}),!l&&e.jsxs("div",{className:"user-info",children:[e.jsx("p",{className:"name",children:t&&(t.username||t.name)||"Administrator"}),e.jsx("p",{className:"email",children:t&&t.name||""})]}),e.jsx("button",{onClick:d,className:"logout-btn",title:"Logout",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]})]})}),e.jsxs("main",{className:"main-content",style:{display:"flex",flexDirection:"column",minHeight:"calc(100vh - 80px)"},children:[e.jsx("div",{style:{width:"100%",padding:l?"0 16px":"0 32px",boxSizing:"border-box",marginTop:"24px"},children:e.jsxs("nav",{style:h,children:[e.jsxs(bt,{to:"/",end:!0,style:f,children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{width:"20px",height:"20px"},children:[e.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1"}),e.jsx("rect",{x:"14",y:"3",width:"7",height:"7",rx:"1"}),e.jsx("rect",{x:"14",y:"14",width:"7",height:"7",rx:"1"}),e.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"1"})]}),e.jsx("span",{style:x,children:"Dashboard"})]}),e.jsxs(bt,{to:"/users",style:f,children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"20px",height:"20px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),e.jsx("span",{style:x,children:"Users"})]}),e.jsxs(bt,{to:"/core-config",style:f,children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"20px",height:"20px"},children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("span",{style:x,children:"Core"})]}),e.jsxs(bt,{to:"/hosts",style:f,children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"20px",height:"20px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),e.jsx("span",{style:x,children:"Hosts"})]}),e.jsxs(bt,{to:"/settings",style:f,children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:"20px",height:"20px"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),e.jsx("span",{style:x,children:"Settings"})]})]})}),e.jsx("div",{style:{flex:1,padding:l?"16px":"24px 32px",width:"100%"},children:e.jsx(_a,{})}),e.jsxs("footer",{style:{marginTop:"auto",padding:"24px 0",textAlign:"center",color:"var(--text-muted)",fontSize:"0.8125rem",borderTop:"1px solid var(--border-color)"},children:["Made by ",e.jsx("a",{href:"https://github.com/wmm-x",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--text-primary)",fontWeight:"600",textDecoration:"none",transition:"color 0.2s"},onMouseOver:v=>v.currentTarget.style.color="var(--accent-color)",onMouseOut:v=>v.currentTarget.style.color="var(--text-primary)",children:"@wmm-x"})]})]})]})}function Yc({children:t}){const{user:r}=$e();return r?t:e.jsx(Bs,{to:"/login",replace:!0})}function Jc(){const{loading:t}=$e();return t?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsx(yn,{children:e.jsx(jl,{children:e.jsxs(Oa,{children:[e.jsx(Te,{path:"/login",element:e.jsx(Sl,{})}),e.jsxs(Te,{path:"/",element:e.jsx(Yc,{children:e.jsx(Gc,{})}),children:[e.jsx(Te,{index:!0,element:e.jsx(wl,{})}),e.jsx(Te,{path:"users",element:e.jsx(tc,{})}),e.jsx(Te,{path:"/core-config",element:e.jsx(Wc,{})}),e.jsx(Te,{path:"/hosts",element:e.jsx(Fc,{})}),e.jsx(Te,{path:"settings",element:e.jsx(oc,{})})]}),e.jsx(Te,{path:"*",element:e.jsx(Bs,{to:"/",replace:!0})})]})})})}br.createRoot(document.getElementById("root")).render(e.jsx(Un.StrictMode,{children:e.jsx(Xa,{children:e.jsx(bl,{children:e.jsxs(yn,{children:[e.jsx(Jc,{}),e.jsx(Fo,{position:"top-right"})]})})})}));
